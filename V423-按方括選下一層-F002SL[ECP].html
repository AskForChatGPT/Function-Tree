<!DOCTYPE html><html lang="zh-Hant"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ÊöóÈªëÁØÄÈªûÁ∑®ËºØÂô®</title><style>body{background:#1e1e1e;color:#ffffff;font-family:'Arial',sans-serif;margin:0;overflow:hidden;user-select:none;}#canvas-container{position:fixed;width:100vw;height:100vh;overflow:hidden;cursor:grab;}#canvas-container.panning{cursor:grabbing;}#canvas-container.connecting,#canvas-container.selecting{cursor:crosshair;}#transform-container{position:absolute;top:0;left:0;transform-origin:0 0;will-change:transform;}#nodes-container{position:absolute;top:0;left:0;width:100%;height:100%;transform-origin:0 0;}#toolbar{position:fixed;top:10px;left:10px;z-index:1000;background:rgba(45,45,45,0.3);padding:10px;border-radius:5px;box-shadow:0 2px 5px rgba(0,0,0,0.5);backdrop-filter:blur(5px);}#left-panel{position:fixed;left:0;top:261px;width:300px;height:calc(100vh - 70px);background:rgba(30,30,30,0.9);border-right:1px solid #444;padding:10px;overflow-y:auto;z-index:100;}#node-list-container h3{color:#fff;margin-bottom:15px;padding-bottom:5px;border-bottom:1px solid #555;}canvas{position:absolute;top:0;left:0;z-index:1;pointer-events:none;}.node{position:absolute;background:rgba(45,45,45,0.85);border:1px solid rgba(68,68,68,0.5);border-radius:8px;width:200px;padding:10px;box-shadow:0 4px 8px rgba(0,0,0,0.5);z-index:10;transform-origin:0 0;transform:none !important;backdrop-filter:blur(2px);}.node.transparent{background:rgba(30,30,30,0.5);backdrop-filter:blur(4px);}.node.selected{border:2px solid #4a90e2;box-shadow:0 0 10px rgba(74,144,226,0.5);}.node.highlight{box-shadow:0 0 15px 5px rgba(255,255,0,0.7);transition:box-shadow 0.3s;}.node.highlight-same-name{box-shadow:0 0 15px 5px rgba(255,204,0,0.7);transition:box-shadow 0.3s;}.node.highlight-found{box-shadow:0 0 15px 5px rgba(0,255,255,0.7) !important;transition:box-shadow 0.3s;}.node-header{display:flex;align-items:center;margin-bottom:10px;gap:5px;z-index:15;}.node-title,.item-text,.paragraph-input,.N-input{background:rgba(58,58,58,0.8) !important;color:#ffffff !important;border:1px solid rgba(85,85,85,0.5) !important;}.node-title{order:4;flex-grow:1;padding:5px;font-size:14px;border-radius:4px;margin:0 5px;width:calc(100% - 50px);}.node-title:focus,.item-text:focus,.paragraph-input:focus{outline:none;border-color:#777 !important;}.input-port,.output-port{width:6px;height:6px;border-radius:50%;cursor:pointer;position:relative;z-index:30;border:2px solid #333;}.input-port{background:#4CAF50;margin-right:5px;order:1;}.output-port{background:#FF5722;margin-left:5px;}.input-port:hover,.output-port:hover{background:#ffffff;transform:scale(1.2);box-shadow:0 0 5px rgba(255,255,255,0.8);}.item{display:flex;align-items:center;margin:5px 0;background:#333;padding:5px;border-radius:4px;}.item-text{flex-grow:1;padding:5px;font-size:12px;border-radius:4px;width:calc(100% - 50px);}.paragraph-input,.N-input{width:95%;min-height:60px;padding:5px;margin-bottom:10px;border-radius:4px;resize:vertical;}.node-list-item{margin-bottom:15px;padding:10px;background:rgba(45,45,45,0.7);border-radius:4px;opacity:0.6;}.node-list-name{color:#fff;font-weight:bold;margin-bottom:5px;}.node-list-description{width:100%;min-height:60px;background:#3a3a3a;border:1px solid #555;color:#fff;padding:5px;border-radius:4px;resize:vertical;opacity:0.8;transition:opacity 0.8s ease;}.node-list-description:focus{opacity:1;}.add-node-btn,.toolbar-btn,.add-item-btn,.generate-btn,.update-btn,.hide-children-btn{background:#555;border:none;color:#fff;cursor:pointer;border-radius:4px;}.add-node-btn{margin-right:5px;padding:2px 8px;}.add-node-btn:hover,.toolbar-btn:hover,.add-item-btn:hover,.generate-btn:hover,.update-btn:hover{background:#777;}.toolbar-btn,#node-search-btn{background:rgba(85,85,85,0.3) !important;border:none;color:#fff;cursor:pointer;border-radius:4px;padding:8px 12px;margin:0 5px;transition:background 0.2s;}.toolbar-btn:hover,#node-search-btn:hover{background:rgba(119,119,119,0.3) !important;}.add-item-btn{padding:5px 10px;width:80px;margin-right:5px;text-align:center;}.generate-btn{padding:5px 10px;width:80px;margin-left:5px;display:inline-block;text-align:center;}.update-btn{margin-left:5px;padding:5px 10px;font-size:12px;}.delete-node-btn{background:#ff4444;border:none;color:#fff;cursor:pointer;margin-left:5px;padding:2px 6px;border-radius:4px;font-size:12px;order:5;}.delete-node-btn:hover{background:#ff6666;}.copy-btn{position:absolute;top:5px;right:5px;background:rgba(255,165,0,0.7);border:none;color:white;padding:3px 8px;border-radius:4px;cursor:pointer;font-size:12px;z-index:1;}.copy-btn:hover{background:rgba(255,165,0,0.9);}.jump-to-btn{position:relative;width:15px;height:15px;margin-right:5px;background:#ffcc00;border-radius:50%;border:none;cursor:pointer;opacity:0.7;transition:opacity 0.2s;flex-shrink:0;order:3;}.jump-to-btn::after{content:attr(data-count);position:absolute;top:-8px;right:-8px;background:#ff4444;color:white;border-radius:50%;width:16px;height:16px;font-size:10px;display:flex;align-items:center;justify-content:center;}.jump-to-btn:hover{opacity:1;transform:scale(1.2);}.jump-to-btn.hidden{display:none;}.paragraph-btn{width:100%;background:#4a4a4a;border:1px solid #555;color:#aaa;padding:8px;margin-bottom:10px;border-radius:4px;cursor:pointer;text-align:left;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}.paragraph-popup-container{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:2147483647;pointer-events:none;display:flex;justify-content:center;align-items:center;}.paragraph-popup-container>div:first-child{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.5);pointer-events:auto;}.paragraph-popup{position:relative;background:rgba(45,45,45,0.7);border:1px solid #555;border-radius:4px;padding:10px;max-width:80vw;max-height:80vh;overflow:auto;z-index:2147483647;box-shadow:0 4px 8px rgba(0,0,0,0.5);white-space:pre-wrap;font-family:monospace;pointer-events:auto;display:none;backdrop-filter:blur(2px);}.paragraph-popup::after{content:"Êåâ X Ê∏ÖÁ©∫ÂÖßÂÆπ";position:absolute;bottom:5px;right:5px;font-size:10px;color:#888;}.selection-box{position:absolute;background:rgba(100,100,255,0.1);border:1px solid rgba(100,100,255,0.8);pointer-events:none;z-index:5;}.update-dialog{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.7);display:flex;justify-content:center;align-items:center;z-index:1000;}.update-dialog-content{background-color:#333;padding:20px;border-radius:8px;width:80%;max-width:600px;box-shadow:0 0 20px rgba(0,0,0,0.5);}.update-dialog textarea{width:100%;height:200px;background-color:#444;color:#fff;border:1px solid #555;padding:10px;margin-bottom:15px;font-family:inherit;resize:vertical;}.update-dialog-buttons{display:flex;justify-content:flex-end;gap:10px;}.update-dialog-buttons button{padding:8px 15px;border:none;border-radius:4px;cursor:pointer;}.update-dialog-confirm{background-color:#4CAF50;color:white;}.update-dialog-cancel{background-color:#f44336;color:white;}.buttons-container{display:flex;justify-content:space-between;margin-top:10px;width:100%;}#file-input,#import-selected-input{display:none;opacity:0.3;}.connection-color-0{stroke:#FF6B6B !important;}.connection-color-1{stroke:#4ECDC4 !important;}.connection-color-2{stroke:#45B7D1 !important;}.connection-color-3{stroke:#96CEB4 !important;}.connection-color-4{stroke:#FFEAA7 !important;}.connection-color-5{stroke:#DDA0DD !important;}.connection-color-6{stroke:#98D8C8 !important;}.connection-color-7{stroke:#F7DC6F !important;}.connection-color-8{stroke:#BB8FCE !important;}.connection-color-9{stroke:#85C1E9 !important;}.connection-color-10{stroke:#F8C471 !important;}.connection-color-11{stroke:#82E0AA !important;}.connection-color-12{stroke:#F1948A !important;}.connection-color-13{stroke:#7FB3D5 !important;}.connection-color-14{stroke:#FAD7A0 !important;}.connection-color-15{stroke:#AED6F1 !important;}.node.color-0{background:rgba(45,45,45,0.85) !important;}.node.color-1{background:rgba(78,205,196,0.38) !important;}.node.color-2{background:rgba(69,183,209,0.38) !important;}.node.color-3{background:rgba(150,206,180,0.38) !important;}.node.color-4{background:rgba(255,234,167,0.38) !important;}.node.color-5{background:rgba(221,160,221,0.38) !important;}.node.color-6{background:rgba(152,216,200,0.38) !important;}.node.color-7{background:rgba(247,220,111,0.38) !important;}.node.color-8{background:rgba(187,143,206,0.38) !important;}.node.color-9{background:rgba(133,193,233,0.38) !important;}.node.color-10{background:rgba(248,196,113,0.38) !important;}.node.color-11{background:rgba(130,224,170,0.38) !important;}.node.color-12{background:rgba(241,148,138,0.38) !important;}.node.color-13{background:rgba(127,179,213,0.38) !important;}.node.color-14{background:rgba(250,215,160,0.38) !important;}.node.color-15{background:rgba(174,214,241,0.38) !important;}.node.transparent.color-0{background:rgba(255,107,107,0.4) !important;}.node.transparent.color-1{background:rgba(78,205,196,0.4) !important;}.node.transparent.color-2{background:rgba(69,183,209,0.4) !important;}.node.transparent.color-3{background:rgba(150,206,180,0.4) !important;}.node.transparent.color-4{background:rgba(255,234,167,0.4) !important;}.node.transparent.color-5{background:rgba(221,160,221,0.4) !important;}.node.transparent.color-6{background:rgba(152,216,200,0.4) !important;}.node.transparent.color-7{background:rgba(247,220,111,0.4) !important;}.node.transparent.color-8{background:rgba(187,143,206,0.4) !important;}.node.transparent.color-9{background:rgba(133,193,233,0.4) !important;}.node.transparent.color-10{background:rgba(248,196,113,0.4) !important;}.node.transparent.color-11{background:rgba(130,224,170,0.4) !important;}.node.transparent.color-12{background:rgba(241,148,138,0.4) !important;}.node.transparent.color-13{background:rgba(127,179,213,0.4) !important;}.node.transparent.color-14{background:rgba(250,215,160,0.4) !important;}.node.transparent.color-15{background:rgba(174,214,241,0.4) !important;}.paragraph-popup.color-0{background:rgba(255,107,107,0.3) !important;}.paragraph-popup.color-1{background:rgba(78,205,196,0.3) !important;}.paragraph-popup.color-2{background:rgba(69,183,209,0.3) !important;}.paragraph-popup.color-3{background:rgba(150,206,180,0.3) !important;}.paragraph-popup.color-4{background:rgba(255,234,167,0.3) !important;}.paragraph-popup.color-5{background:rgba(221,160,221,0.3) !important;}.paragraph-popup.color-6{background:rgba(152,216,200,0.3) !important;}.paragraph-popup.color-7{background:rgba(247,220,111,0.3) !important;}.paragraph-popup.color-8{background:rgba(187,143,206,0.3) !important;}.paragraph-popup.color-9{background:rgba(133,193,233,0.3) !important;}.paragraph-popup.color-10{background:rgba(248,196,113,0.3) !important;}.paragraph-popup.color-11{background:rgba(130,224,170,0.3) !important;}.paragraph-popup.color-12{background:rgba(241,148,138,0.3) !important;}.paragraph-popup.color-13{background:rgba(127,179,213,0.3) !important;}.paragraph-popup.color-14{background:rgba(250,215,160,0.3) !important;}.paragraph-popup.color-15{background:rgba(174,214,241,0.3) !important;}.node.collapsed{width:auto !important;min-width:150px;padding:5px !important;overflow:visible !important;}.node.collapsed .node-header{margin-bottom:0 !important;}.node.collapsed .collapsible{display:none !important;}.node.collapsed .output-port{margin-left:5px !important;order:5 !important;}#connection-canvas{z-index:0 !important;}.node.collapsed .header-port{position:absolute;right:25px;top:50%;transform:translateY(-50%);width:12px;height:12px;background:#FF5722;border-radius:50%;border:2px solid #333;z-index:30;}.collapse-btn{order:2;background:#555;border:none;color:#fff;cursor:pointer;border-radius:4px;padding:2px 6px;font-size:20px;margin-right:5px;}#node-search-input{background:rgba(58,58,58,0.3) !important;color:#ffffff !important;border:1px solid rgba(85,85,85,0.3) !important;border-radius:4px;padding:5px;font-family:inherit;margin-left:10px;}#node-search-input:focus{outline:none;border-color:rgba(119,119,119,0.3) !important;}.drag-handle{cursor:move;padding:0 5px;user-select:none;opacity:0.5;transition:opacity 0.2s;font-family:Arial,sans-serif;display:inline-block;}.drag-handle:hover{opacity:1;}.item.dragging{box-shadow:0 4px 8px rgba(0,0,0,0.2);background:rgba(255,255,255,0.1);}.item-placeholder{background:rgba(255,255,255,0.1);border:1px dashed #888;margin:5px 0;border-radius:4px;transition:all 0.2s;}#minimap-container{position:fixed;left:0;top:60px;width:300px;height:200px;background:rgba(30,30,30,0.7);border-bottom:1px solid #444;z-index:100;overflow:hidden;}#minimap{position:absolute;width:100%;height:100%;}#viewport-indicator{position:absolute;border:2px solid rgba(255,255,255,0.8);background:rgba(255,255,255,0.1);pointer-events:none;z-index:101;transform-origin:center center;box-sizing:border-box;}.node.group-node{border:2px dashed #666;background-color:rgba(200,200,200,0.2);}.node.group-node .group-node-info{padding:5px;text-align:center;color:#666;font-size:0.9em;}.node.group-node .ungroup-btn{background-color:#ffcccc;border:1px solid #ff9999;margin-left:5px;font-size:12px;padding:2px 5px;}.node.group-node .ungroup-btn:hover{background-color:#ff9999;}.variable-analysis-container{margin-top:10px;border:1px solid #444;border-radius:4px;overflow:hidden;background-color:#2d2d2d;}.variable-analysis-header{display:flex;justify-content:space-between;align-items:center;padding:6px 10px;background-color:#1e1e1e;cursor:pointer;border-bottom:1px solid #444;color:#e0e0e0;user-select:none;}.variable-analysis-title{flex-grow:1;}.variable-analysis-content{padding:8px;display:none;max-height:150px;overflow-y:auto;background-color:#2d2d2d;}.variable-analysis-container.expanded .variable-analysis-content{display:block;}.variable-btn{display:block;width:calc(100% - 12px);padding:6px 8px;margin:4px 0;text-align:left;border:1px solid #444;border-radius:3px;background-color:#3d3d3d;color:#e0e0e0;cursor:pointer;transition:all 0.2s;font-size:0.85em;}.variable-btn:hover{background-color:#4a4a4a;}.variable-btn[data-active="true"]{background-color:#1a5276;color:white;border-color:#154360;}.no-variables-message{color:#999;font-style:italic;text-align:center;padding:8px 0;font-size:0.85em;}.toggle-variable-analysis-btn{border:none;background:none;color:#e0e0e0;cursor:pointer;font-size:1.2em;padding:0 5px;min-width:20px;text-align:center;}.dark-mode .variable-analysis-container{border-color:#555;background-color:#333;}.dark-mode .variable-analysis-header{background-color:#252525;border-bottom-color:#555;}.dark-mode .variable-btn{background-color:#3a3a3a;border-color:#555;}.dark-mode .variable-btn:hover{background-color:#4a4a4a;}.variable-highlight{color:#4a90e2;font-weight:bold;background-color:rgba(74,144,226,0.1);padding:0 2px;border-radius:3px;}#load-html-btn{margin-left:10px;}@keyframes pulse{0%{background-color:rgba(0,255,255,0.3);}50%{background-color:rgba(0,255,255,0.8);}100%{background-color:transparent;}}.title-highlight{animation:pulse 1s ease-in-out;}.toolbar-select{margin-left:5px;padding:5px 25px 5px 10px;border-radius:4px;border:1px solid #4a5568;background-color:#2d3748;color:#e2e8f0;cursor:pointer;transition:all 0.2s ease;}.toolbar-checkbox{margin-left:10px;vertical-align:middle;}.frame-node{border:2px dashed #4a90e2 !important;background:rgba(74,144,226,0.1) !important;min-width:300px;min-height:200px;z-index:1 !important;position:relative;display:flex;flex-direction:column;pointer-events:none;}.frame-node .frame-header,.frame-node .frame-content,.frame-node .frame-footer{pointer-events:auto;}.frame-header{padding:10px;flex-shrink:0;position:relative;}.frame-content{flex:1;padding:10px;border-top:1px solid #444;overflow-y:auto;}.frame-footer{padding:10px;border-top:1px solid #444;flex-shrink:0;position:relative;}.add-note-btn{background:#555;border:none;color:#fff;padding:8px;width:100%;border-radius:4px;cursor:pointer;}.add-note-btn:hover{background:#777;}.frame-note{background:rgba(255,255,255,0.05);padding:8px;margin:5px 0;border-radius:4px;border:1px solid #444;}.delete-node-btn{position:absolute;right:10px;top:10px;background:rgba(255,68,68,0.6);border:none;color:#fff;cursor:pointer;border-radius:4px;font-size:12px;width:20px;height:20px;display:flex;align-items:center;justify-content:center;z-index:10;}.resize-handle{position:absolute;width:10px;height:10px;background:#4a90e2;right:-5px;bottom:-5px;cursor:nwse-resize;z-index:1;border-radius:2px;}.frame-content{flex:1;padding:10px;border-top:1px solid #444;overflow-y:auto;}.node.highlight-missing{box-shadow:0 0 15px 5px rgba(255,0,0,0.7) !important;transition:box-shadow 0.3s;}.item.highlight-missing{background:rgba(255,0,0,0.3) !important;border:1px solid rgba(255,0,0,0.5) !important;}</style></head><body><div id="toolbar"><button class="toolbar-btn" id="save-btn">‰øùÂ≠ò</button><button class="toolbar-btn" id="load-btn">ËºâÂÖ•</button><button class="toolbar-btn" id="select-jump-nodes-btn">ÈÅ∏ÂèñÊâÄÊúâjump-to-btn</button><button class="toolbar-btn" id="rearrange-all-btn">ÈáçÊñ∞ÊéíÂàóÊâÄÊúâNODE</button><button class="toolbar-btn" id="export-selected-btn">ÊªôÂá∫Ê°ÜÈÅ∏NODE</button><button class="toolbar-btn" id="import-selected-btn">ÊªôÂÖ•Ê°ÜÈÅ∏NODE</button><input type="file" id="file-input" accept=".json"><button class="toolbar-btn" id="load-html-btn">ËºâÂÖ•Ê™îÊ°àÊõ¥Êñ∞NODE</button><button class="toolbar-btn" id="check-missing-nodes-btn">üîçÊú™ÊúâNODE</button><input type="file" id="html-file-input" accept=".html,.htm" style="display:none"><input type="file" id="import-selected-input" accept=".json," style="display:none"><button class="toolbar-btn" id="add-frame-btn">ÂçÄÂüüÊèèËø∞Ê°Ü</button><div id="minimap-container"><canvas id="minimap"></canvas><div id="viewport-indicator"></div></div><!-- Êñ∞Â¢ûÊêúÂ∞ãÊ°ÜÂíåÊåâÈàï --><input type="text" id="node-search-input" placeholder="ÊêúÂ∞ãÁØÄÈªûÂêçÁ®±" style="margin-left: 10px; padding: 5px;"><button class="toolbar-btn" id="node-search-btn">ÊêúÂ∞ã</button><select id="code-language-selector" class="toolbar-select"><option value="html">HTML</option><option value="python">Python</option></select><input type="checkbox" id="exclude-duplicates-checkbox" class="toolbar-checkbox"><label for="exclude-duplicates-checkbox">ÊåâA‰∏çÈÅ∏ÂèñÈáçË¶Ü</label></select></div><div id="left-panel"><div id="node-list-container"><h3>ÂèØË¶ãÁØÄÈªû</h3><div id="node-list"></div></div></div><div id="canvas-container"><canvas id="connection-canvas"></canvas><div id="canvas-container"><div id="transform-container"><canvas id="connection-canvas"></canvas><div id="nodes-container"></div></div></div></div><script>
let deletedNodeNames=new Set(),isAutoColorizeEnabled=!![];const EXTRA_WIDTH=0x78;let hoveredNode=null,originalNodeWidth=null,isNodeWidthExpanded=![],nodeWidthTimeout=null,generatedNodeCount=0x0,autoProcessingInterval=null,autoProcessingStartTime=null,processingQueue=[],processedNodes=new Set(),currentPhase='initial',loadedHtmlFunctions={};const container=document['getElementById']('canvas-container'),nodesContainer=document['getElementById']('nodes-container'),canvas=document['getElementById']('connection-canvas'),ctx=canvas['getContext']('2d'),minimapCanvas=document['getElementById']('minimap'),minimapCtx=minimapCanvas['getContext']('2d'),viewportIndicator=document['getElementById']('viewport-indicator'),ALL_ACTIVE_POPUPS=new Set(),COLOR_CLASSES=['color-0','color-1','color-2','color-3','color-4','color-5','color-6','color-7','color-8','color-9','color-10','color-11','color-12','color-13','color-14'];document['getElementById']('export-selected-btn')['addEventListener']('click',exportSelectedNodes),document['getElementById']('import-selected-btn')['addEventListener']('click',()=>{document['getElementById']('import-selected-input')['click']();}),document['getElementById']('import-selected-input')['addEventListener']('change',importSelectedNodes),document['getElementById']('node-search-btn')['addEventListener']('click',searchNodesByName),document['getElementById']('add-frame-btn')['addEventListener']('click',addNewFrame),document['getElementById']('rearrange-all-btn')['addEventListener']('click',rearrangeAllNodesEnhanced),document['getElementById']('select-jump-nodes-btn')['addEventListener']('click',selectAllJumpNodes);const FUNCTION_BLACKLIST=['HTML','point2','imageLocked','locationNames','editingCharMapping','mapping','currentKeys','emoji','value','actualDeliveryManPosition','greenTargetY','newEstimatedArrival','isPowerModeEnabled','powerMode','pointToRoadMap','currentHistoryIndex','restaurantLocationInput','addRestaurantBtn','currentFoodQuantity','requiredScaleY','arr','bestMatchIndex','heightRatio','defaultCharMapping','currentMonth','todoData','recurringChecklist','equipmentList','todayEquipmentStatus','text','weatherData','id','expense','month','dates','balances','padding','pointY','nextY','selectedMonth','normalizedMonth','expenses','categoryExpenses','totalExpense','sortedCategories','colors','isMobileAllAutoSave','isTripAutoSaveEnabled','shapeData','finalPoint','FloorPlanCorridorPoints','canvasX','boundedY','estimatedArrivalTime','newPosition','currentEstimatedArrival','arrivalTime','locationInput','restaurantTrimmed','matchIndex','displayName','p3','button','newType','originalRestaurantLocation','carriedOrders','remainingOrders','routeSteps','options','optionUpper','defaultMapping','buttonName','weatherValue','imageId','customWeatherImages','name','category','amount','suggestionsList','nameInput','expenseCategories','labelX','labelY','centerX','centerY','FloorPlanIsDrawingNumbers','FloorPlanIsDeletingNumbers','FloorPlanActiveMode','currentAngle','missingButtons','endChecked','elevator','newIndex','color','waitTime','roadIndex','angle','markerIndex','newX','newY','prevKey','travelForward','cost','keyB','baseCost','checkModification','touchY','dx','elementFromPoint','clientY','point','newScale','index','maxScroll','detectionThreshold','canvasY','touch2','seconds','pointKey','direction','segmentIndex','to','pointIndex','viewHistory','currentDailyTripDate','price','step','stepIndex','trip','alignedPoint','axis','action','statusMessage','areaGroup','threshold','mirrorAxisY','useDownhillPreference','y2','currentMirrorAxisMode','pointData','fileName','accountingData','slot','endPoint','lineData','clickedText','clickedY','line','end','side','data','elevatorId','gridCols','FloorPlanOriginalPositions','currentFloorPlanPointId','FloorPlanElevators','FloorPlanData','err','blob','timeSlot','symmetryAxis','marker','deletedCount','allPoints','graph','actualEndKey','x2','minX','minY','maxX','maxY','bounds','existingId','stableId','effectiveMinFloor','type','finalFloorNum','numberCombination','targetAngle','actualRotation','vibrate','updateEmojisVisibilityButton','updateAttentionAreasButton','updatePowerModeButton','toDataURL','translateX','gradient','saturate','contrast','x','closeListHandler','startSession','execCommand','clamp','closeFunc','arrayBuffer','Array','createTreeWalker','cancelScheduledValues','getChannelData','Float32Array','setPeriodicWave','linearRampToValueAtTime','exponentialRampToValueAtTime','prompt','rows','polygon','not','substr','Event','String','File','ClipboardItem','showIOSInstructions','showDataForManualCopy','getContext','getComputedStyle','call','showSaveFilePicker','createWritable','select','group','groupEnd','brightness','add','Set','splice','Time','join','concat','copyWithin','entries','every','fill','filter','find','findIndex','findLast','findLastIndex','flat','flatMap','forEach','from','includes','indexOf','lastIndexOf','map','pop','push','reduce','reduceRight','reverse','shift','slice','some','sort','splice','toLocaleString','toString','unshift','values','DOMParser','parseFromString','isArray','abs','acos','acosh','asin','asinh','atan','atan2','atanh','cbrt','ceil','clz32','cos','cosh','exp','expm1','floor','fround','hypot','imul','log','log10','log1p','log2','max','min','pow','random','round','sign','sin','sinh','sqrt','tan','tanh','trunc','setTimeout','clearTimeout','setInterval','clearInterval','requestAnimationFrame','cancelAnimationFrame','now','performance.now','arc','arcTo','beginPath','bezierCurveTo','clearRect','clip','closePath','createImageData','createLinearGradient','createPattern','createRadialGradient','addColorStop','drawFocusIfNeeded','drawImage','ellipse','fill','fillRect','fillText','getImageData','getLineDash','isPointInPath','isPointInStroke','lineTo','measureText','moveTo','putImageData','quadraticCurveTo','rect','restore','rotate','save','scale','setLineDash','setTransform','stroke','strokeRect','strokeText','transform','translate','addEventListener','append','appendChild','attachShadow','blur','click','cloneNode','closest','contains','createAttribute','createComment','createDocumentFragment','createElement','createElementNS','createEvent','createTextNode','dispatchEvent','focus','getAttribute','getAttributeNS','getBoundingClientRect','getElementsByClassName','getElementsByTagName','getElementsByTagNameNS','getElementById','getSelection','hasAttribute','hasAttributeNS','insertAdjacentElement','insertAdjacentHTML','insertAdjacentText','insertBefore','matches','normalize','prepend','querySelector','querySelectorAll','remove','removeAttribute','removeAttributeNS','removeChild','removeEventListener','replaceChild','replaceWith','requestFullscreen','scroll','scrollIntoView','scrollTo','setAttribute','setAttributeNS','setPointerCapture','toggle','toggleAttribute','charAt','charCodeAt','codePointAt','concat','endsWith','fromCharCode','fromCodePoint','includes','indexOf','lastIndexOf','localeCompare','match','matchAll','normalize','padEnd','padStart','repeat','replace','replaceAll','search','slice','split','startsWith','substring','toLocaleLowerCase','toLocaleUpperCase','toLowerCase','toString','toUpperCase','trim','trimEnd','trimLeft','trimRight','trimStart','valueOf','assign','create','defineProperties','defineProperty','entries','freeze','fromEntries','getOwnPropertyDescriptor','getOwnPropertyDescriptors','getOwnPropertyNames','getOwnPropertySymbols','getPrototypeOf','hasOwn','hasOwnProperty','is','isExtensible','isFrozen','isPrototypeOf','isSealed','keys','preventExtensions','propertyIsEnumerable','seal','setPrototypeOf','toLocaleString','toString','values','preventDefault','stopImmediatePropagation','stopPropagation','atob','btoa','fetch','FileReader','readAsArrayBuffer','readAsBinaryString','readAsDataURL','readAsText','navigator.clipboard','writeText','readText','URL.createObjectURL','URL.revokeObjectURL','clipboard','createObjectURL','revokeObjectURL','alert','Blob','FormData','Headers','Request','Response','WebSocket','XMLHttpRequest','MutationObserver','IntersectionObserver','ResizeObserver','CustomEvent','all','allSettled','any','catch','finally','race','reject','resolve','then','(','$','b','on','parse','stringify','createAnalyser','createBiquadFilter','createBuffer','createBufferSource','createChannelMerger','createChannelSplitter','createConstantSource','createConvolver','createDelay','createDynamicsCompressor','createGain','createIIRFilter','createOscillator','createPanner','createPeriodicWave','createScriptProcessor','createStereoPanner','createWaveShaper','decodeAudioData','setValueAtTime','connect','disconnect','start','stop','suspend','resume','valueToAngle','RTCPeerConnection','createOffer','createAnswer','setLocalDescription','setRemoteDescription','addIceCandidate','getUserMedia','sheet_to_json','aoa_to_sheet','sheet_to_csv','activeTexture','attachShader','bindAttribLocation','bindBuffer','bindFramebuffer','bindRenderbuffer','bindTexture','blendColor','blendEquation','blendEquationSeparate','blendFunc','blendFuncSeparate','bufferData','bufferSubData','checkFramebufferStatus','clear','clearColor','clearDepth','clearStencil','compileShader','compressedTexImage2D','compressedTexSubImage2D','copyTexImage2D','copyTexSubImage2D','createBuffer','createFramebuffer','createProgram','createRenderbuffer','createShader','createTexture','cullFace','deleteBuffer','deleteFramebuffer','deleteProgram','deleteRenderbuffer','deleteShader','deleteTexture','depthFunc','depthMask','depthRange','detachShader','disable','disableVertexAttribArray','drawArrays','drawElements','enable','enableVertexAttribArray','finish','flush','framebufferRenderbuffer','framebufferTexture2D','frontFace','generateMipmap','getActiveAttrib','getActiveUniform','getAttachedShaders','getAttribLocation','getBufferParameter','getContextAttributes','getError','getExtension','getFramebufferAttachmentParameter','getParameter','getProgramInfoLog','getProgramParameter','getRenderbufferParameter','getShaderInfoLog','getShaderParameter','getShaderPrecisionFormat','getShaderSource','getSupportedExtensions','getTexParameter','getUniform','getUniformLocation','getVertexAttrib','getVertexAttribOffset','hint','isBuffer','isContextLost','isEnabled','isFramebuffer','isProgram','isRenderbuffer','isShader','isTexture','lineWidth','linkProgram','pixelStorei','polygonOffset','readPixels','renderbufferStorage','sampleCoverage','scissor','shaderSource','stencilFunc','stencilFuncSeparate','stencilMask','stencilMaskSeparate','stencilOp','stencilOpSeparate','texImage2D','texParameterf','texParameteri','texSubImage2D','uniform1f','uniform1fv','uniform1i','uniform1iv','uniform2f','uniform2fv','uniform2i','uniform2iv','uniform3f','uniform3fv','uniform3i','uniform3iv','uniform4f','uniform4fv','uniform4i','uniform4iv','uniformMatrix2fv','uniformMatrix3fv','uniformMatrix4fv','useProgram','validateProgram','vertexAttrib1f','vertexAttrib1fv','vertexAttrib2f','vertexAttrib2fv','vertexAttrib3f','vertexAttrib3fv','vertexAttrib4f','vertexAttrib4fv','vertexAttribPointer','viewport','play','pause','load','canPlayType','addTextTrack','captureStream','fastSeek','seekToNextFrame','setSinkId','customElements.define','customElements.get','customElements.upgrade','customElements.whenDefined','connectedCallback','disconnectedCallback','adoptedCallback','attributeChangedCallback','open','deleteDatabase','createObjectStore','transaction','put','add','get','getAll','getAllKeys','delete','clear','createIndex','count','cursor','localStorage','sessionStorage','getItem','setItem','removeItem','clear','key','postMessage','terminate','importScripts','register','unregister','update','skipWaiting','claim','addEventListener','removeEventListener','dispatchEvent','crypto.subtle','generateKey','importKey','exportKey','encrypt','decrypt','sign','verify','digest','deriveKey','deriveBits','wrapKey','unwrapKey','animate','cancel','finish','pause','play','reverse','updatePlaybackRate','image','Image','PaymentRequest','show','abort','canMakePayment','share','canShare','write','scan','requestDevice','gatt.connect','getPrimaryService','getCharacteristic','readValue','writeValue','startNotifications','requestDevice','open','close','selectConfiguration','claimInterface','releaseInterface','selectAlternateInterface','controlTransferIn','controlTransferOut','clearHalt','transferIn','transferOut','isochronousTransferIn','isochronousTransferOut','reset','requestSession','endSession','requestReferenceSpace','getViewerPose','getPose','getInputSources','getInputPose','requestMIDIAccess','send','clear','getGamepads','vibrationActuator.playEffect','vibrationActuator.reset','lock','unlock','requestPermission','addEventListener','removeEventListener','requestSession','reconnect','terminate','navigator.credentials','create','get','store','preventSilentAccess','create','get','request','query','requestPort','open','close','read','write','requestDevice','open','close','sendReport','receiveReport','sendFeatureReport','receiveFeatureReport','VideoEncoder','VideoDecoder','AudioEncoder','AudioDecoder','ImageDecoder','encode','decode','flush','reset','close','createUnidirectionalStream','createBidirectionalStream','datagrams','close','requestAdapter','requestDevice','createBuffer','createTexture','createSampler','createBindGroupLayout','createPipelineLayout','createBindGroup','createShaderModule','createComputePipeline','createRenderPipeline','createCommandEncoder','createRenderBundleEncoder','createQuerySet','submit','onSubmittedWorkDone','createContext','createModel','createCompilation','createExecution','setInput','setOutput','startCompute','wait','instantiate','instantiateStreaming','compile','compileStreaming','validate','Memory','Table','Global','Module','Instance','CompileError','LinkError','RuntimeError','Error','EvalError','RangeError','ReferenceError','SyntaxError','TypeError','URIError','AggregateError','RegExp','exec','test','match','matchAll','search','replace','replaceAll','split','Date','now','parse','UTC','getDate','getDay','getFullYear','getHours','getMilliseconds','getMinutes','getMonth','getSeconds','getTime','getTimezoneOffset','getUTCDate','getUTCDay','getUTCFullYear','getUTCHours','getUTCMilliseconds','getUTCMinutes','getUTCMonth','getUTCSeconds','setDate','setFullYear','setHours','setMilliseconds','setMinutes','setMonth','setSeconds','setTime','setUTCDate','setUTCFullYear','setUTCHours','setUTCMilliseconds','setUTCMinutes','setUTCMonth','setUTCSeconds','toDateString','toISOString','toJSON','toLocaleDateString','toLocaleString','toLocaleTimeString','toString','toTimeString','toUTCString','valueOf','Map','Set','WeakMap','WeakSet','add','clear','delete','entries','forEach','get','has','keys','set','size','values','buffer','byteLength','byteOffset','copyWithin','entries','every','fill','filter','find','findIndex','forEach','includes','indexOf','join','keys','lastIndexOf','length','map','reduce','reduceRight','reverse','set','slice','some','sort','subarray','toLocaleString','toString','values','buffer','byteLength','byteOffset','getFloat32','getFloat64','getInt8','getInt16','getInt32','getUint8','getUint16','getUint32','setFloat32','setFloat64','setInt8','setInt16','setInt32','setUint8','setUint16','setUint32','Symbol','for','keyFor','toString','valueOf','Proxy','Reflect','apply','construct','defineProperty','deleteProperty','get','getOwnPropertyDescriptor','getPrototypeOf','has','isExtensible','ownKeys','preventExtensions','set','setPrototypeOf','Intl','Collator','DateTimeFormat','DisplayNames','ListFormat','Locale','NumberFormat','PluralRules','RelativeTimeFormat','Segmenter','console.log','console.debug','console.info','console.warn','console.error','console.assert','console.clear','console.count','console.countReset','console.dir','console.dirxml','console.group','console.groupCollapsed','console.groupEnd','console.table','console.time','console.timeLog','console.timeEnd','console.trace','log','error','warn','info','debug','decodeURI','decodeURIComponent','encodeURI','encodeURIComponent','escape','unescape','eval','isFinite','isNaN','parseFloat','parseInt','getBoundingClientRect','getRandomFluorescentColor','lightenColor','rgba','showStatusMessage','toFixed','formatTime','function','if','else','for','while','do','switch','case','default','break','continue','return','try','catch','finally','throw','new','this','super','class','extends','static','async','await','yield','export','import','void','typeof','instanceof','in','delete','with','debugger','var','let','const','enum','implements','interface','package','private','protected','public','arguments','true','false','null','undefined','NaN','Infinity','globalThis','callback','next'];let nodes=[],connections=[],draggingNode=null,dragOffsetX=0x0,dragOffsetY=0x0,connecting=null,isPanning=![],panStartX=0x0,panStartY=0x0,scale=0x1,translateX=0x0,translateY=0x0,spacePressed=![],activePopup=null,popupScrollPosition=0x0,dragStartWorldX=0x0,dragStartWorldY=0x0,selectionBox=null,isSelecting=![],selectionStartX=0x0,selectionStartY=0x0,selectedNodes=new Set(),shiftPressed=![],nodeDescriptions={},missingNodeNames=new Set();const FILTERED_NAMES=['È†ÖÁõÆ\x201'];try{const saved=localStorage['getItem']('nodeDescriptions');let nodeDescriptions=JSON['parse'](localStorage['getItem']('nodeDescriptions'))||{};saved&&(nodeDescriptions=JSON['parse'](saved));}catch(a){}let lastVisibleNodes=[],animationFrameId=null,currentLanguage='html',currentColorIndex=0x0,currentConnectionColorIndex=0x0;const originalCreateNode=createNode;createNode=function(b,c,d='ÁØÄÈªû',f='normal'){const g=originalCreateNode(b,c,d,f);return missingNodeNames['size']>0x0&&missingNodeNames['has'](d)&&setTimeout(checkMissingNodes,0x64),g;};const CONNECTION_COLORS=['#FF6B6B','#4ECDC4','#45B7D1','#96CEB4','#FFEAA7','#DDA0DD','#98D8C8','#F7DC6F','#BB8FCE','#85C1E9','#F8C471','#82E0AA','#F1948A','#7FB3D5','#FAD7A0','#AED6F1'],transformContainer=document['getElementById']('transform-container');let lastScale=0x1;document['getElementById']('save-btn')['addEventListener']('click',saveProject),document['getElementById']('load-btn')['addEventListener']('click',()=>{document['getElementById']('file-input')['click']();}),document['getElementById']('file-input')['addEventListener']('change',loadProject),document['getElementById']('load-html-btn')['addEventListener']('click',()=>{const b=document['getElementById']('code-language-selector'),c=b?b['value']:'html',d=document['getElementById']('html-file-input');d['accept']=c==='python'?'.py':'.html,.htm',d['click']();}),document['getElementById']('html-file-input')['addEventListener']('change',handleFileUpload),document['getElementById']('code-language-selector')['addEventListener']('change',b=>{currentLanguage=b['target']['value'],nodes['forEach'](c=>{(c['element']['querySelector']('.paragraph-input')?.['value']||c['element']['querySelector']('.paragraph-popup')?.['textContent'])&&analyzeVariables(c);});}),document['getElementById']('check-missing-nodes-btn')['addEventListener']('click',checkMissingNodes),document['addEventListener']('DOMContentLoaded',function(){loadDeletedNodeNames();const b=document['getElementById']('load-html-btn');if(b){const c=document['createElement']('button');c['className']='toolbar-btn',c['id']='extract-empty-nodes-btn',c['textContent']='üßπüóëÔ∏èNODE',b['parentNode']['insertBefore'](c,b['nextSibling']),c['addEventListener']('click',extractEmptyNodesAndDelete);const d=document['createElement']('button');d['className']='toolbar-btn',d['id']='clear-deleted-names-btn',d['textContent']='Ê∏ÖÈô§Â∑≤Âà™Èô§Ë®òÈåÑ',d['title']='Ê∏ÖÈô§Â∑≤Ë®òÈåÑÁöÑÂ∑≤Âà™Èô§ÁØÄÈªûÂêçÁ®±',c['parentNode']['insertBefore'](d,c['nextSibling']),d['addEventListener']('click',clearDeletedNodeNames);}});function formatNodeTitlesAsCSV(b){if(!b||b['length']===0x0)return'';const c=b['map'](f=>f['title']?f['title']['trim']():'')['filter'](f=>f!==''),d=c['map'](f=>'\x27'+f+'\x27');return d['join'](',');}function extractEmptyNodesAndDelete(){const b=[];nodes['forEach'](d=>{if(d&&d['element']){const f=d['element']['querySelector']('.paragraph-input');if(f&&f['value']['trim']()===''){const g=d['element']['querySelector']('.node-title'),h=g?g['value']:'Êú™ÂëΩÂêçÁØÄÈªû';!deletedNodeNames['has'](h)&&b['push']({'nodeId':d['id'],'title':h,'element':d['element']});}}});if(b['length']===0x0){showStatusMessage('Ê≤íÊúâÊâæÂà∞Á©∫ÁôΩÁØÄÈªû','warning');return;}const c=formatNodeTitlesAsCSV(b);copyToClipboard(c),selectEmptyNodes(b),showDeleteConfirmation(b,c),new Promise(d=>setTimeout(d,0x1f40))['then'](()=>{rearrangeAllNodesEnhanced(),showStatusMessage('Ëá™ÂãïËôïÁêÜÂÆåÊàêÔºÅ','success');})['catch'](d=>{showStatusMessage('ËôïÁêÜÂ§±ÊïóÔºÅ','error');});}function copyToClipboard(b){navigator['clipboard']['writeText'](b)['then'](()=>{})['catch'](c=>{const d=document['createElement']('textarea');d['value']=b,document['body']['appendChild'](d),d['select'](),document['execCommand']('copy'),document['body']['removeChild'](d);});}function selectEmptyNodes(b){selectedNodes['clear'](),b['forEach'](c=>{selectedNodes['add'](c['nodeId']);const d=c['element'];d['classList']['add']('selected');});}function showDeleteConfirmation(b,c){const d='ÊâæÂà∞\x20'+b['length']+'\x20ÂÄãÁ©∫ÁôΩÁØÄÈªû:\x0a\x0a'+b['map'](f=>'‚Ä¢\x20'+f['title'])['join']('\x0a')+'\x0a\x0aÁØÄÈªûÂêçÁ®±Â∑≤Ë§áË£ΩÂà∞Ââ™Ë≤ºÊùø:\x20'+c+'\x0a\x0aÊòØÂê¶Ë¶ÅÂà™Èô§ÈÄô‰∫õÁØÄÈªûÔºü';deleteSelectedNodes(b),showStatusMessage('Â∑≤Ëá™ÂãïÂà™Èô§\x20'+b['length']+'\x20ÂÄãÁ©∫ÁôΩÁØÄÈªûÔºåÂêçÁ®±Â∑≤Ë§áË£Ω:\x20'+c,'success');}function arrangeSelectedNodesVertically(){if(selectedNodes['size']===0x0){showStatusMessage('Ë´ãÂÖàÈÅ∏ÊìáË¶ÅÊéíÂàóÁöÑÁØÄÈªû','warning');return;}const b=Array['from'](selectedNodes),c=b['map'](i=>nodes[i]),d=sortNodesByChildCount(c),f=findTopmostYPosition(c),g=findLeftmostXPosition(c),h=0x32;d['forEach']((i,j)=>{i['x']=g,i['y']=f+j*h,updateNodePosition(i);}),drawConnections(),showStatusMessage('Â∑≤ÂûÇÁõ¥ÊéíÂàó\x20'+selectedNodes['size']+'\x20ÂÄãÁØÄÈªûÔºàÁÑ°Â≠êÁØÄÈªûÂÑ™ÂÖàÔºâ','success');}function selectAllJumpNodes(){clearSelection();let b=0x0;nodes['forEach'](c=>{const d=c['element']['querySelector']('.jump-to-btn');d&&!d['classList']['contains']('hidden')&&d['style']['display']!=='none'&&(selectedNodes['add'](c['id']),c['element']['classList']['add']('selected'),b++);}),drawConnections(),b>0x0?showStatusMessage('Â∑≤ÈÅ∏Âèñ\x20'+b+'\x20ÂÄãÂåÖÂê´Ë∑≥ËΩâÊåâÈàïÁöÑÁØÄÈªû','success'):showStatusMessage('Êú™ÊâæÂà∞‰ªª‰ΩïÈ°ØÁ§∫Ë∑≥ËΩâÊåâÈàïÁöÑÁØÄÈªû','warning');}function sortNodesByChildCount(b){return b['sort']((c,d)=>{const f=getChildNodeCount(c['id']),g=getChildNodeCount(d['id']);if(f===0x0&&g>0x0)return-0x1;if(f>0x0&&g===0x0)return 0x1;if(f>0x0&&g>0x0)return f-g;return 0x0;});}function findTopmostYPosition(b){if(b['length']===0x0)return 0x0;let c=Infinity;return b['forEach'](d=>{d['y']<c&&(c=d['y']);}),c;}function findLeftmostXPosition(b){if(b['length']===0x0)return 0x0;let c=Infinity;return b['forEach'](d=>{d['x']<c&&(c=d['x']);}),c;}async function rearrangeAllNodesEnhanced(){try{collapseAllNodes(),arrangeNodesByLevelEnhanced();}catch(b){}try{await drawConnections();try{selectAllJumpNodes();}catch(c){}try{deleteSelectedNodes();}catch(d){}showStatusMessage('Â∑≤ÂÆåÊàêÊâÄÊúâÁØÄÈªûÁöÑÂ¢ûÂº∑ÁâàÈáçÊñ∞ÊéíÂàó','success');}catch(f){showStatusMessage('ÈáçÊñ∞ÊéíÂàóÁØÄÈªûÊôÇÁôºÁîüÈåØË™§','error');}return Promise['resolve']();}function arrangeNodesByLevelEnhanced(){const b=findRootNodes();if(b['length']===0x0)return;const c=0x32,d=0x32,f=sortFirstLevelNodes(b),g=arrangeFirstLevelNodes(f,c,d);arrangeSubsequentLevelsEnhanced(g);}function sortFirstLevelNodes(b){return b['sort']((c,d)=>{const f=getChildNodeCount(c['id']),g=getChildNodeCount(d['id']),h=hasChildren(c['id']),i=hasChildren(d['id']);if(!h&&i)return-0x1;if(h&&!i)return 0x1;if(h&&i)return f-g;return 0x0;});}function getChildNodeCount(b){return connections['filter'](c=>c['fromNode']===b)['length'];}function hasChildren(b){return connections['some'](c=>c['fromNode']===b);}function arrangeFirstLevelNodes(b,c,d){const f=[];let g=c,h=d;const i=findTopLeftNodeFromArray(b),j=b['filter'](k=>k!==i);return i&&(i['x']=g,i['y']=h,updateNodePosition(i),f['push']({'node':i,'childCount':getChildNodeCount(i['id']),'children':getChildNodes(i['id'])}),j['length']>0x0&&(alignNodeGroup(j,i,g,h),j['forEach'](k=>{f['push']({'node':k,'childCount':getChildNodeCount(k['id']),'children':getChildNodes(k['id'])});})),f['sort']((k,l)=>{const m=k['node']['x'],n=l['node']['x'],o=k['node']['y'],p=l['node']['y'];if(o!==p)return o-p;return m-n;})),f;}function getChildNodes(b){const c=connections['filter'](d=>d['fromNode']===b);return c['map'](d=>nodes[d['toNode']]);}function collectNextLevelNodesByParent(b){const c=[];return b['forEach'](d=>{if(!d||!d['node'])return;const f=getChildNodes(d['node']['id']);if(f['length']>0x0){const g=sortChildNodes(f);c['push']({'parent':d['node'],'parentIndex':b['indexOf'](d),'nodes':g,'childCount':f['length']});}}),c;}function collectNextLevelNodesByParent(b){const c=[];return b['forEach'](d=>{const f=getChildNodes(d['node']['id']);if(f['length']>0x0){const g=sortChildNodes(f);c['push']({'parent':d['node'],'parentIndex':b['indexOf'](d),'nodes':g,'childCount':f['length']});}}),c;}function sortChildNodes(b){return b;}function rearrangeAllNodes(){collapseAllNodes(),arrangeNodesByLevel(),drawConnections(),showStatusMessage('Â∑≤ÂÆåÊàêÊâÄÊúâÁØÄÈªûÁöÑÈáçÊñ∞ÊéíÂàó','success');}function collapseAllNodes(){nodes['forEach'](b=>{const c=b['element']['querySelector']('.collapse-btn');c&&c['textContent']==='-'&&c['click']();});}function arrangeNodesByLevel(){const b=findRootNodes();if(b['length']===0x0)return;const c=0x32,d=0x32;let f=c,g=d;const h=b,i=findTopLeftNodeFromArray(h);if(i){i['x']=f,i['y']=g,updateNodePosition(i);const l=h['filter'](m=>m!==i);l['length']>0x0&&alignNodeGroup(l,i,f,g),g=getBottomPosition(i)+0x64;}let j=0x2,k=h;while(k['length']>0x0){const m=findNextLevelNodes(k);if(m['length']===0x0)break;const n=getRightmostPosition(k)+0xc8,o=d;arrangeLevelNodes(m,n,o),k=m,j++;}}function findRootNodes(){const b=new Set();return connections['forEach'](c=>{b['add'](c['toNode']);}),nodes['filter'](c=>!b['has'](c['id']));}function findTopLeftNodeFromArray(b){let c=null,d=Infinity,f=Infinity;return b['forEach'](g=>{(g['x']<d||g['x']===d&&g['y']<f)&&(d=g['x'],f=g['y'],c=g);}),c;}function alignNodeGroup(b,c,d,f){if(b['length']===0x0)return;const g=new Set(b['map'](l=>l['id'])),h=selectedNodes;selectedNodes=g;const i=0xa,j=0x1e,k=groupNodesIntoColumns(c,g,nodes);arrangeColumns(k,c,j,i,nodes),selectedNodes=h;}function findNextLevelNodes(b){const c=new Set();return b['forEach'](d=>{const f=connections['filter'](g=>g['fromNode']===d['id']);f['forEach'](g=>{c['add'](g['toNode']);});}),nodes['filter'](d=>c['has'](d['id']));}function getRightmostPosition(b){let c=-Infinity;return b['forEach'](d=>{const f=d['x']+d['element']['offsetWidth'];f>c&&(c=f);}),c;}function getBottomPosition(b){return b['y']+b['element']['offsetHeight'];}function arrangeLevelNodes(b,c,d){if(b['length']===0x0)return;const f=findTopLeftNodeFromArray(b),g=b['filter'](h=>h!==f);f&&(f['x']=c,f['y']=d,updateNodePosition(f),g['length']>0x0&&alignNodeGroup(g,f,c,d));}function checkMissingNodes(){clearMissingHighlights();const b=new Set();nodes['forEach'](f=>{const g=f['element']['querySelector']('.node-title');if(g){const h=g['value']['trim']();h&&!isFilteredName(h)&&!deletedNodeNames['has'](h)&&b['add'](h);}});const c=new Set(),d=new Set();nodes['forEach'](f=>{const g=f['element']['querySelectorAll']('.item-text');g['forEach'](h=>{const i=h['value']['trim']();if(i){if(!isFilteredName(i)&&!isInBlacklist(i)&&!deletedNodeNames['has'](i)){const j=extractFunctionCallsFromString(i);j['length']>0x0?j['forEach'](k=>{const l=k['name'];if(l&&shouldExtractFunctionName(l)){c['add'](l);!b['has'](l)&&(d['add'](l),h['parentElement']['classList']['add']('highlight-missing'),f['element']['classList']['add']('highlight-missing'));const m=extractParametersForYourFormat(k['params']);m['forEach'](n=>{shouldExtractFunctionName(n)&&(c['add'](n),!b['has'](n)&&(d['add'](n),h['parentElement']['classList']['add']('highlight-missing'),f['element']['classList']['add']('highlight-missing')));});}}):(c['add'](i),!b['has'](i)&&(d['add'](i),h['parentElement']['classList']['add']('highlight-missing'),f['element']['classList']['add']('highlight-missing')));}}}),extractFunctionNamesFromNodeContent(f,c,d,b);}),nodes['forEach'](f=>{const g=f['element']['querySelector']('.node-title'),h=g?g['value']['trim']():'';h&&d['has'](h)&&f['element']['classList']['add']('highlight-missing');}),missingNodeNames=d;if(d['size']>0x0){const f=Array['from'](d)['join'](',\x20');showStatusMessage('ÁôºÁèæ\x20'+d['size']+'\x20ÂÄãÊú™Âä†ÂÖ•ÁöÑÁØÄÈªûÂêçÁ®±:\x20'+f,'warning');if(generatedNodeCount>=0x32){showStatusMessage('Â∑≤ÈÅîÂà∞ÁØÄÈªûÊï∏ÈáèÈôêÂà∂\x20('+generatedNodeCount+'/50)ÔºåÂÅúÊ≠¢Ëá™ÂãïËôïÁêÜ','warning'),stopAutoProcessing();return;}!autoProcessingInterval&&startAutoProcessing();}else showStatusMessage('ÊâÄÊúâÈ†ÖÁõÆÂêçÁ®±ÈÉΩÊúâÂ∞çÊáâÁöÑÁØÄÈªûÔºÅ','success');}function extractFunctionCallsFromString(b){const c=[],d=/\b([a-zA-Z_$][a-zA-Z0-9_$]*)\s*\(([^)]*)\)/g;let f;while((f=d['exec'](b))!==null){const g=f[0x1],h=f[0x2];isValidFunctionCall(g,h)&&c['push']({'name':g,'params':h,'fullMatch':f[0x0]});}return c;}function isValidFunctionCall(b,c){const d=new Set(['if','else','for','while','do','switch','case','return','throw','try','catch','finally','new','delete','typeof','instanceof','in','console','document','window','true','false','null','undefined']);if(d['has'](b))return![];if(!/^[a-zA-Z_$][a-zA-Z0-9_$]*$/['test'](b))return![];return!![];}function clearDeletedNodeNames(){deletedNodeNames['clear'](),sessionStorage['removeItem']('deletedNodeNames'),showStatusMessage('Â∑≤Ê∏ÖÈô§Â∑≤Âà™Èô§ÁØÄÈªûÂêçÁ®±Ë®òÈåÑ','info');}function extractFunctionNamesFromNodeContent(b,c,d,f){try{let g='';const h=b['element']['querySelector']('.paragraph-btn');if(h){const m=h['dataset']['originalContent'];m&&(g=m);}else{const n=[b['element']['querySelector']('.paragraph-input'),b['element']['querySelector']('.node-content')]['filter'](o=>o!==null);n['forEach'](o=>{(o['value']||o['textContent'])&&(g+=(o['value']||o['textContent'])+'\x0a');});}if(!g['trim']())return;const i=new Set(),j=/\b([a-zA-Z_$][a-zA-Z0-9_$]*)\s*\(([^)]*)\)/g;let k;while((k=j['exec'](g))!==null){const o=k[0x0],p=k[0x1],q=k[0x2];shouldExtractFunctionName(p)&&(i['add'](p),c['add'](p),!f['has'](p)&&(d['add'](p),b['element']['classList']['add']('highlight-missing')));const r=extractParametersForYourFormat(q);r['forEach'](s=>{shouldExtractFunctionName(s)&&!i['has'](s)&&(i['add'](s),c['add'](s),!f['has'](s)&&(d['add'](s),b['element']['classList']['add']('highlight-missing')));});}const l=[/\bfunction\s+([a-zA-Z_$][a-zA-Z0-9_$]*)\s*\(/g,/\b(?:const|let|var)\s+([a-zA-Z_$][a-zA-Z0-9_$]*)\s*=\s*(?:function|\([^)]*\)\s*=>)/g,/\.addEventListener\s*\(\s*['"][^'"]*['"]\s*,\s*([a-zA-Z_$][a-zA-Z0-9_$]*)/g,/([a-zA-Z_$][0-9a-zA-Z_$]*)\s*\(/g];l['forEach'](s=>{let t;while((t=s['exec'](g))!==null){const u=t[0x1];u&&shouldExtractFunctionName(u)&&!i['has'](u)&&(i['add'](u),c['add'](u),!f['has'](u)&&(d['add'](u),b['element']['classList']['add']('highlight-missing')));}});if(i['size']>0x0){}}catch(s){}}function extractParametersForYourFormat(b){if(!b||b['trim']()['length']===0x0)return[];const c=b['split'](',')['map'](d=>d['trim']())['filter'](d=>{if(!d||d['length']===0x0)return![];if(!/^[a-zA-Z_$][a-zA-Z0-9_$]*$/['test'](d))return![];const f=['true','false','null','undefined','this','self'];if(f['includes'](d))return![];return!![];});return c;}function isValidFunctionCall(b,c){const d=new Set(['if','else','for','while','do','switch','case','return','throw','try','catch','finally','new','delete','typeof','instanceof','in','console','document','window']);if(d['has'](b))return![];if(!/^[a-zA-Z_$][a-zA-Z0-9_$]*$/['test'](b))return![];return!![];}function shouldExtractFunctionName(b){if(!b||b['length']<0x2||/^[0-9]/['test'](b))return![];if(b['includes']('.')||b['includes']('[')||b['includes'](']'))return![];if(isFilteredName(b))return![];if(isInBlacklist(b))return![];if(isBuiltInFunction(b))return![];if(deletedNodeNames&&deletedNodeNames['has'](b))return![];return!![];}function isBuiltInFunction(b){const c=new Set(['console','log','error','warn','info','alert','prompt','confirm','setTimeout','setInterval','clearTimeout','clearInterval','parseInt','parseFloat','isNaN','isFinite','Object','Array','String','Number','Boolean','Date','Math','JSON','Promise','window','document','if','else','for','while','do','switch','case','return','throw','try','catch','finally','var','let','const','function','class']);return c['has'](b);}function isBuiltInFunction(b){const c=new Set(['console','log','error','warn','info','debug','alert','prompt','confirm','setTimeout','setInterval','clearTimeout','clearInterval','parseInt','parseFloat','isNaN','isFinite','encodeURI','decodeURI','encodeURIComponent','decodeURIComponent','Object','Array','String','Number','Boolean','Date','Math','RegExp','Error','JSON','Promise','window','document','navigator','location','require','import','export','this','self','global','true','false','null','undefined','if','else','for','while','do','switch','case','break','continue','return','throw','try','catch','finally','new','delete','typeof','instanceof','in','var','let','const','function','class','extends','super']);return c['has'](b)||b['startsWith']('get')||b['startsWith']('set')||b['startsWith']('is')||b['startsWith']('has')||b['startsWith']('to');}function isFilteredName(b){return FILTERED_NAMES['includes'](b)||b['startsWith']('È†ÖÁõÆ\x20')||b['startsWith']('item\x20');}function isInBlacklist(b){return currentLanguage==='python'?PYTHON_FUNCTION_BLACKLIST['includes'](b):FUNCTION_BLACKLIST['includes'](b);}function clearMissingHighlights(){document['querySelectorAll']('.node.highlight-missing')['forEach'](b=>{b['classList']['remove']('highlight-missing');}),document['querySelectorAll']('.item.highlight-missing')['forEach'](b=>{b['classList']['remove']('highlight-missing');}),document['querySelectorAll']('[style*=\x22outline\x22]')['forEach'](b=>{(b['style']['outline']['includes']('red')||b['style']['outline']['includes']('#ff4444'))&&(b['style']['outline']='');}),missingNodeNames['clear']();}function recheckMissingNodes(){missingNodeNames['size']>0x0&&checkMissingNodes();}function setupMissingNodeCheckOnTitleChange(){document['addEventListener']('input',b=>{if(b['target']['classList']['contains']('node-title')){const c=b['target']['value']['trim']();missingNodeNames['size']>0x0&&(clearTimeout(window['missingCheckTimeout']),window['missingCheckTimeout']=setTimeout(recheckMissingNodes,0x12c));}}),document['addEventListener']('input',b=>{b['target']['classList']['contains']('item-text')&&(missingNodeNames['size']>0x0&&(clearTimeout(window['missingCheckTimeout']),window['missingCheckTimeout']=setTimeout(recheckMissingNodes,0x12c)));});}function setupMissingNodeMonitoring(){const b=window['createNode'];window['createNode']=function(c,d,f='ÁØÄÈªû',g='normal'){const h=b(c,d,f,g);return missingNodeNames['size']>0x0&&setTimeout(recheckMissingNodes,0x64),h;};}document['addEventListener']('DOMContentLoaded',function(){setupMissingNodeCheckOnTitleChange(),setupMissingNodeMonitoring();const b=document['getElementById']('rearrange-all-btn');b&&b['addEventListener']('click',rearrangeAllNodes);});function setupMissingNodeDeleteMonitoring(){const b=nodesContainer['addEventListener'];document['addEventListener']('click',c=>{c['target']['classList']['contains']('delete-node-btn')&&(missingNodeNames['size']>0x0&&setTimeout(recheckMissingNodes,0x64));});}function initMissingNodeCheck(){setupMissingNodeCheckOnTitleChange(),setupMissingNodeMonitoring(),setupMissingNodeDeleteMonitoring();}document['readyState']==='loading'?document['addEventListener']('DOMContentLoaded',initMissingNodeCheck):initMissingNodeCheck();setupMissingNodeCheckOnTitleChange();function saveProject(){try{const b=JSON['parse'](localStorage['getItem']('loadedHtmlFunctions')||'{}'),c=nodes['map'](l=>{const m=l['element'],n={'id':l['id'],'x':l['x'],'y':l['y'],'colorIndex':l['colorIndex']||0x0,'title':m['querySelector']('.node-title')['value']||'Êú™ÂëΩÂêçÁØÄÈªû','isFrame':l['isFrame']||![],'metadata':{'lastUpdated':new Date()['toISOString']()}};if(!l['isFrame']){let o='';const p=m['querySelector']('.paragraph-input'),q=m['querySelector']('.paragraph-btn'),r=m['querySelector']('.paragraph-popup');if(q&&r)o=r['textContent']||q['dataset']['originalContent']||'';else p&&(o=p['value']);const s=Array['from'](m['querySelectorAll']('.variable-btn')),t=s['map'](u=>({'name':u['dataset']['variableName'],'active':u['dataset']['active']==='true'}));Object['assign'](n,{'content':o,'description':nodeDescriptions[l['id']]||'','isConvertedToButton':!!q,'isChildrenHidden':m['classList']['contains']('children-hidden'),'isCollapsed':m['classList']['contains']('collapsed'),'items':Array['from'](m['querySelectorAll']('.item-text'))['map'](u=>u['value']),'variableStates':t,'variableAnalysisExpanded':m['querySelector']('.variable-analysis-container')?.['classList']['contains']('expanded')||![],'metadata':{'contentLength':o['length'],'lastUpdated':new Date()['toISOString']()}}),l['isGroupNode']&&(n['isGroupNode']=!![],n['containedNodes']=l['containedNodes']||[],n['originalConnections']=l['originalConnections']||[],n['incomingConnections']=l['incomingConnections']||[],n['outgoingConnections']=l['outgoingConnections']||[],n['originalConnections']=l['originalConnections']||[],n['incomingConnections']=connections['filter'](u=>u['toNode']===l['id'])['map'](u=>({'fromNode':u['fromNode'],'fromOutput':u['fromOutput'],'toNode':u['toNode']})),n['outgoingConnections']=connections['filter'](u=>u['fromNode']===l['id'])['map'](u=>({'fromNode':u['fromNode'],'fromOutput':u['fromOutput'],'toNode':u['toNode']})));}else{n['width']=parseFloat(m['style']['width'])||m['offsetWidth'],n['height']=parseFloat(m['style']['height'])||m['offsetHeight'];const u=m['querySelector']('.frame-content');u&&(n['content']=Array['from'](u['querySelectorAll']('.frame-note'))['map'](v=>({'text':v['textContent'],'style':v['style']['cssText']})));}return n;}),d=connections['map'](l=>({'fromNode':l['fromNode'],'fromOutput':l['fromOutput']||0x0,'toNode':l['toNode'],'highlighted':l['highlighted']||![]})),f={'version':'2.8','nodes':c,'connections':d,'nodeDescriptions':nodeDescriptions,'loadedHtmlFunctions':loadedHtmlFunctions,'viewState':{'scale':scale,'translateX':translateX,'translateY':translateY},'savedAt':new Date()['toISOString']()},g=JSON['stringify'](f,null,0x2),h=new Blob([g],{'type':'application/json'}),i=URL['createObjectURL'](h),j='node-project-'+new Date()['toISOString']()['replace'](/[:.]/g,'-')+'.json',k=document['createElement']('a');k['href']=i,k['download']=j,k['style']['display']='none',document['body']['appendChild'](k),k['click'](),setTimeout(()=>{document['body']['removeChild'](k),URL['revokeObjectURL'](i);},0x64);}catch(l){alert('‰øùÂ≠òÈåØË™§:\x20'+l['message']);}}function loadProject(b){const c=b['target']['files'][0x0];if(!c)return;const d=new FileReader();d['onload']=f=>{try{const g=JSON['parse'](f['target']['result']);nodesContainer['innerHTML']='',nodes=[],connections=[],ALL_ACTIVE_POPUPS['clear'](),activePopup=null;g['loadedHtmlFunctions']&&(loadedHtmlFunctions=g['loadedHtmlFunctions']);g['nodeDescriptions']?nodeDescriptions=g['nodeDescriptions']:nodeDescriptions={};g['viewState']&&(scale=g['viewState']['scale']||0x1,translateX=g['viewState']['translateX']||window['innerWidth']/0x2-0x64,translateY=g['viewState']['translateY']||window['innerHeight']/0x2-0x32,applyTransform());const h={},i=[];g['nodes']?.['forEach'](j=>{if(j['isGroupNode']){i['push'](j);return;}if(j['isFrame']){const p=createNode(j['x'],j['y'],j['title']||'Êñ∞Ê°ÜÊû∂');p['isFrame']=!![];if(j['colorIndex']!==undefined){const w=COLOR_CLASSES[j['colorIndex']%COLOR_CLASSES['length']];p['element']['classList']['add'](w),p['colorIndex']=j['colorIndex'];}const q=p['element'];q['classList']['add']('frame-node'),q['style']['zIndex']='1';const r=q['querySelector']('.paragraph-input'),s=q['querySelector']('.items'),t=q['querySelector']('.add-item-btn'),u=q['querySelector']('.output-port');if(r)r['remove']();if(s)s['remove']();if(t)t['remove']();if(u)u['remove']();q['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22frame-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22node-title\x22\x20value=\x22'+(j['title']||'Êñ∞Ê°ÜÊû∂')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-node-btn\x22>√ó</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22frame-content\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22frame-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-note-btn\x22>Ê∑ªÂä†Ë®ªÈáã</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22resize-handle\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';j['width']&&j['height']&&(q['style']['width']=j['width']+'px',q['style']['height']=j['height']+'px');const v=q['querySelector']('.frame-content');j['content']&&v&&j['content']['forEach'](x=>{const y=document['createElement']('div');y['className']='frame-note',y['contentEditable']='true',y['textContent']=x['text'],y['style']['cssText']=x['style']||'',v['appendChild'](y);});setupFrameEvents(p),nodesContainer['appendChild'](q),h[j['id']]=p;return;}const k=createNode(j['x'],j['y'],j['title']||'ÁØÄÈªû');h[j['id']]=k;const l=COLOR_CLASSES[j['colorIndex']%COLOR_CLASSES['length']];k['element']['classList']['add'](l),k['colorIndex']=j['colorIndex'];if(j['isCollapsed']){k['element']['classList']['add']('collapsed');const x=k['element']['querySelector']('.collapse-btn');if(x){x['textContent']='+';const y=k['element']['querySelectorAll']('.output-port:not(.header-port)'),z=k['element']['querySelector']('.header-port');y['forEach'](A=>A['style']['display']='none');if(!z){const A=document['createElement']('div');A['className']='output-port\x20header-port',A['dataset']['type']='output',A['style']['display']='block',k['element']['querySelector']('.node-header')['appendChild'](A);}else z['style']['display']='block';}}const m=k['element']['querySelector']('.paragraph-input');if(m&&j['content']!==undefined){m['value']=j['content'];if(j['isConvertedToButton']&&j['content']['trim']()){const B=document['createElement']('button');B['className']='paragraph-btn',B['textContent']=j['content']['length']>0x32?j['content']['substring'](0x0,0x2f)+'...':j['content'],B['dataset']['originalContent']=j['content'];const C=document['createElement']('div');C['className']='paragraph-popup',C['textContent']=j['content'],C['classList']['add'](l);const D=document['createElement']('div');D['style']['position']='relative',D['style']['display']='inline-block',D['style']['width']='100%';const E=m['cloneNode'](!![]);E['style']['display']='none',D['appendChild'](E),D['appendChild'](B),D['appendChild'](C),m['replaceWith'](D),setupParagraphButtonEvents(B,C,E,k);}}const n=k['element']['querySelector']('.items');n&&j['items']&&(n['innerHTML']='',k['outputs']=[],j['items']['forEach']((F,G)=>{const H=document['createElement']('div');H['className']='item',H['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22drag-handle\x22>‚ò∞</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22item-text\x22\x20value=\x22'+escapeHtml(F||'È†ÖÁõÆ\x20'+(G+0x1))+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-node-btn\x22>+</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22output-port\x22\x20data-type=\x22output\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',n['appendChild'](H),k['outputs']['push'](G),setupAddNodeButton(H,k,G,container),setupOutputPort(H,k,G,container),setupItemDragAndDrop(k['element'],k);}));if(j['content']&&j['content']['trim']()){analyzeVariables(k);j['variableStates']&&j['variableStates']['forEach'](H=>{const I=k['element']['querySelector']('.variable-btn[data-variable-name=\x22'+H['name']+'\x22]');I&&(I['dataset']['active']=H['active']['toString'](),H['active']&&(I['style']['backgroundColor']='#4a90e2',I['style']['color']='white'));});const F=k['element']['querySelector']('.variable-analysis-container'),G=k['element']['querySelector']('.toggle-variable-analysis-btn');F&&G&&(j['variableAnalysisExpanded']?(F['classList']['add']('expanded'),G['textContent']='-'):(F['classList']['remove']('expanded'),G['textContent']='+'));}k['childStates']=new Map();const o=g['connections']?.['filter'](H=>H['fromNode']===j['id'])['map'](H=>g['nodes']['find'](I=>I['id']===H['toNode']));o&&o['length']>0x0&&o['forEach'](H=>{H&&k['childStates']['set'](H['id'],{'x':H['x'],'y':H['y'],'collapsed':H['isCollapsed']||![]});});if(j['isChildrenHidden']){k['element']['classList']['add']('children-hidden');const H=k['element']['querySelector']('.hide-children-btn');if(H){H['textContent']='È°ØÁ§∫Â≠ê';const I=connections['filter'](J=>J['fromNode']===k['id'])['map'](J=>nodes[J['toNode']]);I['forEach']((J,K)=>{!k['childStates']['has'](J['id'])&&k['childStates']['set'](J['id'],{'x':J['x'],'y':J['y'],'collapsed':J['element']['classList']['contains']('collapsed')}),!J['element']['classList']['contains']('collapsed')&&J['element']['querySelector']('.collapse-btn')['click'](),J['x']=k['x']+0xc8/scale,J['y']=k['y']+K*0x2b/scale,updateNodePosition(J);});}}}),i['forEach'](j=>{const k=createGroupNodeElement(j['x'],j['y'],j['title']),l=initializeGroupNodeData(k,j['x'],j['y'],j['containedNodes']||[]);l['isGroupNode']=!![],l['originalConnections']=j['originalConnections']||[],l['incomingConnections']=j['incomingConnections']||[],l['outgoingConnections']=j['outgoingConnections']||[],setupUngroupButton(k,l),j['containedNodes']?.['forEach'](m=>{h[m]&&h[m]['element']&&(h[m]['element']['style']['display']='none');}),h[j['id']]=l;}),g['connections']?.['forEach'](j=>{const k=h[j['fromNode']]!==undefined,l=h[j['toNode']]!==undefined;if(k&&l)connections['push']({'fromNode':h[j['fromNode']]['id'],'fromOutput':j['fromOutput']||0x0,'toNode':h[j['toNode']]['id']});else{}}),i['forEach'](j=>{const k=h[j['id']];if(!k)return;k['incomingConnections']['forEach'](l=>{h[l['fromNode']]&&h[l['toNode']]&&connections['push']({'fromNode':h[l['fromNode']]['id'],'fromOutput':l['fromOutput'],'toNode':k['id']});}),k['outgoingConnections']['forEach'](l=>{h[l['fromNode']]&&h[l['toNode']]&&connections['push']({'fromNode':k['id'],'fromOutput':l['fromOutput'],'toNode':h[l['toNode']]['id']});});}),drawConnections(),showStatusMessage('È†ÖÁõÆËºâÂÖ•ÂÆåÊàê','success');}catch(j){showStatusMessage('ËºâÂÖ•Â§±ÊïóÔºåË´ãÊ™¢Êü•Êñá‰ª∂Ê†ºÂºè','error');}},d['readAsText'](c),b['target']['value']='';}function setupFrameEvents(b){const c=b['element'];c['querySelector']('.delete-node-btn')['addEventListener']('click',l=>{connections=connections['filter'](m=>m['fromNode']!==b['id']&&m['toNode']!==b['id']),nodes=nodes['filter'](m=>m['id']!==b['id']),c['remove'](),drawConnections(),l['stopPropagation']();});const d=c['querySelector']('.resize-handle');let f=![],g,h,i,j;const k=d['cloneNode'](!![]);d['parentNode']['replaceChild'](k,d),k['addEventListener']('mousedown',function(l){f=!![],g=parseFloat(c['style']['width']||c['offsetWidth']),h=parseFloat(c['style']['height']||c['offsetHeight']),i=l['clientX'],j=l['clientY'],l['stopPropagation'](),l['preventDefault']();}),document['addEventListener']('mousemove',function(l){if(l['target']['closest']('.frame-node'))return;if(!f)return;const m=(l['clientX']-i)/scale,n=(l['clientY']-j)/scale,o=Math['max'](0x12c,g+m),p=Math['max'](0xc8,h+n);c['style']['width']=o+'px',c['style']['height']=p+'px',l['preventDefault']();}),document['addEventListener']('mouseup',function(){f=![];}),c['querySelector']('.add-note-btn')['addEventListener']('click',()=>{const l=c['querySelector']('.frame-content'),m=document['createElement']('div');m['className']='frame-note',m['contentEditable']='true',l['appendChild'](m),m['focus']();});}function autoColorizeSelectedNode(){if(selectedNodes['size']===0x1&&isAutoColorizeEnabled){const b=Array['from'](selectedNodes)[0x0],c=nodes[b];if(!c)return;clearAllTemporaryColors(),colorizeChildConnections(b,0x0),drawConnections();}}function clearAllTemporaryColors(){nodes['forEach'](b=>{if(b['temporaryColorApplied']){const c=b['element'],d=c['querySelector']('.paragraph-popup');c['classList']['remove']('transparent');for(let f=0x0;f<=0xf;f++){c['classList']['remove']('color-'+f);if(d)d['classList']['remove']('color-'+f);}if(b['colorIndex']!==undefined){for(let j=0x0;j<=0xf;j++){c['classList']['remove']('color-'+j);}c['classList']['remove']('transparent');const g=c['classList']['contains']('transparent'),h=COLOR_CLASSES[b['colorIndex']];g?c['classList']['add']('transparent',h):c['classList']['add'](h);if(d){for(let k=0x0;k<=0xf;k++){d['classList']['remove']('color-'+k);}d['classList']['add'](h);}}delete b['temporaryColorIndex'],delete b['temporaryColorApplied'];}}),connections['forEach'](b=>{delete b['colorClass'];});}function selectNodesInBox(b,c,d,f){clearSelection();const g=Math['min'](b,d),h=Math['max'](b,d),i=Math['min'](c,f),j=Math['max'](c,f);nodes['forEach'](k=>{if(k['isFrame'])return;const l=k['element']['getBoundingClientRect'](),m=(l['left']+l['right'])/0x2,n=(l['top']+l['bottom'])/0x2;m>g&&m<h&&n>i&&n<j&&(selectedNodes['add'](k['id']),k['element']['classList']['add']('selected'));}),drawConnections();}function exportSelectedNodes(){if(selectedNodes['size']===0x0){showStatusMessage('Ë´ãÂÖàÈÅ∏ÊìáË¶ÅÂ∞éÂá∫ÁöÑÁØÄÈªû','warning');return;}try{const b=Array['from'](selectedNodes),c=new Set(b);b['forEach'](m=>{const n=nodes[m];n['isGroupNode']&&n['containedNodes']&&n['containedNodes']['forEach'](o=>{c['add'](o);});});const d=Array['from'](c)['map'](m=>{const n=nodes[m],o=n['element'];let p='';const q=o['querySelector']('.paragraph-input'),r=o['querySelector']('.paragraph-btn'),s=o['querySelector']('.paragraph-popup');if(r&&s)p=s['textContent']||r['dataset']['originalContent']||'';else q&&(p=q['value']);const t={'id':n['id'],'x':n['x'],'y':n['y'],'colorIndex':n['colorIndex']||0x0,'title':o['querySelector']('.node-title')['value']||'Êú™ÂëΩÂêçÁØÄÈªû','content':p,'description':nodeDescriptions[n['id']]||'','isConvertedToButton':!!r,'items':Array['from'](o['querySelectorAll']('.item-text'))['map'](u=>u['value']),'metadata':{'contentLength':p['length'],'lastUpdated':new Date()['toISOString']()}};return n['isGroupNode']&&(t['isGroupNode']=!![],t['containedNodes']=n['containedNodes']||[]),t;}),f=connections['filter'](m=>{return c['has'](m['fromNode'])&&c['has'](m['toNode']);})['map'](m=>({'fromNode':m['fromNode'],'fromOutput':m['fromOutput']||0x0,'toNode':m['toNode']})),g={'version':'2.5','nodes':d,'connections':f,'exportedAt':new Date()['toISOString']()},h=JSON['stringify'](g,null,0x2),i=new Blob([h],{'type':'application/json'}),j=URL['createObjectURL'](i),k='selected-nodes-'+new Date()['toISOString']()['replace'](/[:.]/g,'-')+'.json',l=document['createElement']('a');l['href']=j,l['download']=k,l['style']['display']='none',document['body']['appendChild'](l),l['click'](),setTimeout(()=>{document['body']['removeChild'](l),URL['revokeObjectURL'](j);},0x64),showStatusMessage('Â∑≤Â∞éÂá∫\x20'+b['length']+'\x20ÂÄãÈÅ∏‰∏≠ÁØÄÈªû','success');}catch(m){showStatusMessage('Â∞éÂá∫ÈåØË™§:\x20'+m['message'],'error');}}function importSelectedNodes(b){const c=b['target']['files'][0x0];if(!c)return;const d=new FileReader();d['onload']=f=>{try{const g=JSON['parse'](f['target']['result']);nodesContainer['innerHTML']='',nodes=[],connections=[],ALL_ACTIVE_POPUPS['clear'](),activePopup=null,nodeDescriptions=g['nodeDescriptions']||{};const h=JSON['parse'](f['target']['result']);if(!h['nodes']||!Array['isArray'](h['nodes']))throw new Error('ÁÑ°ÊïàÁöÑÂ∞éÂÖ•Êñá‰ª∂Ê†ºÂºè');const i=toWorldX(window['innerWidth']/0x2),j=toWorldY(window['innerHeight']/0x2);let k=Infinity,l=Infinity,m=-Infinity,n=-Infinity;h['nodes']['forEach'](u=>{k=Math['min'](k,u['x']),l=Math['min'](l,u['y']),m=Math['max'](m,u['x']),n=Math['max'](n,u['y']);});const o=(k+m)/0x2,p=(l+n)/0x2,q=i-o,r=j-p,s={};let t=Math['max'](...nodes['map'](u=>u['id']),-0x1)+0x1;h['nodes']['forEach'](u=>{if(u['isGroupNode'])return;const v=createNode(u['x']+q,u['y']+r,u['title']||'ÁØÄÈªû');s[u['id']]=v['id'],u['colorIndex']!==undefined&&changeNodeColor(v,u['colorIndex']),u['description']&&(nodeDescriptions[v['id']]=u['description']),setupNodeContent(v,u);}),h['nodes']['forEach'](u=>{if(!u['isGroupNode'])return;const v=createNode(u['x']+q,u['y']+r,u['title']||'Áæ§ÁµÑÁØÄÈªû','group');s[u['id']]=v['id'],u['colorIndex']!==undefined&&changeNodeColor(v,u['colorIndex']),Array['isArray'](u['containedNodes'])&&(v['containedNodes']=u['containedNodes']['map'](w=>s[w]),v['containedNodes']['forEach'](w=>{nodes[w]&&(nodes[w]['element']['style']['display']='none');})),updateGroupNodeInfo(v);}),Array['isArray'](h['connections'])&&h['connections']['forEach'](u=>{s[u['fromNode']]!==undefined&&s[u['toNode']]!==undefined&&connections['push']({'fromNode':s[u['fromNode']],'fromOutput':u['fromOutput']||0x0,'toNode':s[u['toNode']]});}),drawConnections(),updateNodeList(),showStatusMessage('Â∑≤Â∞éÂÖ•\x20'+h['nodes']['length']+'\x20ÂÄãÁØÄÈªû','success');}catch(u){showStatusMessage('Â∞éÂÖ•Â§±ÊïóÔºåË´ãÊ™¢Êü•Êñá‰ª∂Ê†ºÂºè','error');}},d['readAsText'](c),b['target']['value']='';}function handleFileUpload(b){const c=b['target']['files'][0x0];if(!c)return;const d=document['getElementById']('code-language-selector'),f=d?d['value']:'html',g=c['name']['toLowerCase']();let h=![],i=[];f==='python'?(h=g['endsWith']('.py'),i=['.py']):(h=g['endsWith']('.html')||g['endsWith']('.htm'),i=['.html','.htm']);if(!h){const k=i['join']('\x20Êàñ\x20');showStatusMessage('ÈåØË™§:\x20Ë´ã‰∏äÂÇ≥\x20'+(f==='python'?'Python':'HTML')+'\x20Êñá‰ª∂\x20('+k+')','error'),b['target']['value']='';return;}const j=new FileReader();j['onload']=l=>{try{const m=l['target']['result'];f==='python'?handlePythonFile(m):handleHtmlFile(m),showStatusMessage(c['name']+'\x20Êñá‰ª∂‰∏äÂÇ≥ÊàêÂäü','success');}catch(n){showStatusMessage('ËôïÁêÜÊñá‰ª∂ÊôÇÁôºÁîüÈåØË™§:\x20'+n['message'],'error');}},j['onerror']=l=>{showStatusMessage('ËÆÄÂèñÊñá‰ª∂Â§±Êïó:\x20'+l['message'],'error');},j['readAsText'](c,'UTF-8'),b['target']['value']='';}function handlePythonFile(b){const c={},d=/def\s+([a-zA-Z_][a-zA-Z0-9_]*)\s*\([^)]*\)\s*:\s*([\s\S]*?)(?=\n\S|\n$|\n\s*@|\n\s*def\s)/g;let f;while((f=d['exec'](b))!==null){const g=f[0x1];let h=f[0x2]['trim']();h=h['replace'](/^\s+/gm,''),c[g]={'code':'def\x20'+g+'('+f[0x0]['split']('(')[0x1]['split'](')')[0x0]+'):\x0a'+h,'start':f['index'],'end':f['index']+f[0x0]['length']};}loadedHtmlFunctions=c,updateNodesWithFunctions(c),autoUpdateParagraphButtons(c);}function handleHtmlFile(b){const c=extractFunctions(b);Object['keys'](c)['forEach']((d,f)=>{const g=c[d];}),loadedHtmlFunctions=c,showStatusMessage('ÊàêÂäüËß£Êûê\x20'+Object['keys'](c)['length']+'\x20ÂÄãÂáΩÊï∏','success'),window['debugFunctions']=c;if(c['closeAllLists']){}else{const d=Object['keys'](c)['filter'](f=>f['toLowerCase']()['includes']('closealllists')||f['toLowerCase']()['includes']('close'));}autoUpdateParagraphButtons(c);}function autoUpdateParagraphButtons(b){let c=0x0;const d=[];nodes['forEach'](f=>{const g=f['element']['querySelector']('.paragraph-btn');if(!g)return;const h=g['dataset']['originalContent']||'',i=f['element']['querySelector']('.node-title')?.['value']['trim']()||'';if(b[i]&&b[i]['code']){const j=b[i]['code'];if(h!==j){g['dataset']['originalContent']=j,g['textContent']=j['length']>0x32?j['substring'](0x0,0x2f)+'...':j;const k=f['element']['querySelector']('.paragraph-popup');k&&(k['textContent']=j);const l=f['element']['querySelector']('.paragraph-input');l&&(l['value']=j),c++,d['push'](f);}}}),c>0x0?(showStatusMessage('Â∑≤Ëá™ÂãïÊõ¥Êñ∞\x20'+c+'\x20ÂÄãÁØÄÈªûÁöÑÂÖßÂÆπ','success'),d['forEach'](f=>{highlightNodeTemporarily(f);})):showStatusMessage('ÊâÄÊúâÁØÄÈªûÂÖßÂÆπÂ∑≤ÊòØÊúÄÊñ∞ÁãÄÊÖã','info');}function highlightNodeTemporarily(b){const c=b['element']['style']['outline'],d=b['element']['style']['outlineOffset'],f=b['element']['style']['zIndex'];b['element']['style']['outline']='3px\x20solid\x20#ffeb3b',b['element']['style']['outlineOffset']='2px',b['element']['style']['zIndex']='1000',b['element']['style']['transition']='outline\x200.3s\x20ease',setTimeout(()=>{b['element']['style']['outline']=c,b['element']['style']['outlineOffset']=d,b['element']['style']['zIndex']=f;},0x1388);}function addNewFrame(){let b=window['innerWidth']/0x2-0x96,c=window['innerHeight']/0x2-0x64;if(nodes['length']>0x0){const s=nodes[nodes['length']-0x1];b=s['x']+0xfa/scale,c=s['y'];}const d=createNode(b,c,'Êñ∞Ê°ÜÊû∂');d['isFrame']=!![],d['colorIndex']=0x0,d['element']['classList']['add'](COLOR_CLASSES[d['colorIndex']]);const f=d['element'];f['classList']['add']('frame-node'),f['style']['zIndex']='1';const g=f['querySelector']('.paragraph-input'),h=f['querySelector']('.items'),i=f['querySelector']('.add-item-btn'),j=f['querySelector']('.output-port');if(g)g['remove']();if(h)h['remove']();if(i)i['remove']();if(j)j['remove']();f['innerHTML']='\x0a\x20\x20\x20\x20<div\x20class=\x22frame-header\x22>\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22node-title\x22\x20value=\x22Êñ∞Ê°ÜÊû∂\x22>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-node-btn\x22>√ó</button>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<div\x20class=\x22frame-content\x22>\x0a\x20\x20\x20\x20\x20\x20<!--\x20Ë®ªÈáãÂ∞áÂú®ÈÄôË£°Ê∑ªÂä†\x20-->\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<div\x20class=\x22frame-notes-container\x22></div>\x0a\x20\x20\x20\x20<div\x20class=\x22frame-footer\x22>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-note-btn\x22>Ê∑ªÂä†Ë®ªÈáã</button>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22resize-handle\x22></div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20',f['remove'](),nodesContainer['appendChild'](f);const k=f['querySelector']('.node-title');k['style']['textAlign']='center',k['style']['fontWeight']='bold',f['querySelector']('.delete-node-btn')['addEventListener']('click',t=>{connections=connections['filter'](u=>u['fromNode']!==d['id']&&u['toNode']!==d['id']),nodes=nodes['filter'](u=>u['id']!==d['id']),f['remove'](),drawConnections(),t['stopPropagation']();});const l=f['querySelector']('.resize-handle');let m=![],n,o,p,q;f['addEventListener']('mousedown',t=>{if(t['target']===l||t['target']['closest']('.delete-node-btn'))return;t['stopPropagation']();const u=f['getBoundingClientRect'](),v=toWorldX(u['left']),w=toWorldY(u['top']),x=toWorldX(u['right']),y=toWorldY(u['bottom']),z=nodes['filter'](A=>{if(A['isFrame']||A['id']===d['id'])return![];const B=A['element']['getBoundingClientRect'](),C=toWorldX((B['left']+B['right'])/0x2),D=toWorldY((B['top']+B['bottom'])/0x2);return C>v&&C<x&&D>w&&D<y;});draggingNode=d,dragStartWorldX=toWorldX(t['clientX']),dragStartWorldY=toWorldY(t['clientY']),dragOffsetX=dragStartWorldX-d['x'],dragOffsetY=dragStartWorldY-d['y'],d['containedNodes']=z['map'](A=>({'node':A,'offsetX':A['x']-d['x'],'offsetY':A['y']-d['y']})),t['preventDefault']();}),l['addEventListener']('mousedown',t=>{m=!![],n=parseFloat(f['style']['width']||f['offsetWidth']),o=parseFloat(f['style']['height']||f['offsetHeight']),p=t['clientX'],q=t['clientY'],t['stopPropagation'](),t['preventDefault']();}),document['addEventListener']('mousemove',t=>{if(m){const u=(t['clientX']-p)/scale,v=(t['clientY']-q)/scale,w=Math['max'](0x12c,n+u),x=Math['max'](0xc8,o+v);f['style']['width']=w+'px',f['style']['height']=x+'px',t['preventDefault']();}}),document['addEventListener']('mouseup',()=>{m=![];}),f['querySelector']('.add-note-btn')['addEventListener']('click',()=>{const t=f['querySelector']('.frame-notes-container'),u=document['createElement']('div');u['className']='frame-note',u['contentEditable']='true',u['style']['margin']='5px',u['style']['padding']='8px',u['style']['backgroundColor']='rgba(30,\x2030,\x2030,\x200.7)',u['style']['color']='#e0e0e0',u['style']['borderRadius']='4px',u['style']['minHeight']='20px',t['appendChild'](u),u['focus']();});const r=document['createElement']('style');r['textContent']='\x0a\x20\x20\x20\x20.frame-node\x20{\x0a\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20min-width:\x20300px;\x0a\x20\x20\x20\x20\x20\x20min-height:\x20200px;\x0a\x20\x20\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20\x20\x20background-color:\x20#2d2d2d;\x20/*\x20ÊöóÈªëËÉåÊôØ\x20*/\x0a\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#444;\x20/*\x20ÊöóÈªëÈÇäÊ°Ü\x20*/\x0a\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20overflow:\x20hidden;\x0a\x20\x20\x20\x20\x20\x20color:\x20#e0e0e0;\x20/*\x20ÊöóÈªëÊñáÂ≠óÈ°èËâ≤\x20*/\x0a\x20\x20\x20\x20\x20\x20user-select:\x20none;\x0a\x20\x20-webkit-user-select:\x20none;\x0a\x20\x20pointer-events:\x20auto;\x20/*\x20Ensure\x20it\x20can\x20still\x20be\x20dragged\x20*/\x0a\x20\x20\x20\x20}\x0a\x0a.frame-node\x20*\x20{\x0a\x20\x20user-select:\x20none;\x0a\x20\x20-webkit-user-select:\x20none;\x0a}\x0a.frame-header\x20{\x0a\x20\x20padding:\x208px;\x0a\x20\x20background-color:\x20var(--primary-bg);\x0a\x20\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x0a\x20\x20display:\x20flex;\x0a\x20\x20justify-content:\x20space-between;\x0a\x20\x20align-items:\x20center;\x0a\x20\x20color:\x20var(--text-color);\x20/*\x20Á¢∫‰øùÊñáÂ≠óÂèØËÆÄ\x20*/\x0a\x20\x20transition:\x20background-color\x200.2s\x20ease;\x20/*\x20Ê∑ªÂä†Âπ≥ÊªëÈÅéÊ∏°\x20*/\x0a}\x0a\x0a.frame-header:hover\x20{\x0a\x20\x20background-color:\x20#252525;\x20/*\x20Êá∏ÂÅúÊôÇÁï•ÂæÆËÆä‰∫Æ\x20*/\x0a}\x0a\x0a.frame-content\x20{\x0a\x20\x20flex-grow:\x201;\x0a\x20\x20padding:\x208px;\x0a\x20\x20overflow-y:\x20auto;\x0a\x20\x20background-color:\x20var(--secondary-bg);\x0a\x20\x20color:\x20var(--text-color);\x0a}\x0a\x0a/*\x20Ëá™ÂÆöÁæ©ÊªæÂãïÊ¢ùÊ®£Âºè\x20*/\x0a.frame-content::-webkit-scrollbar\x20{\x0a\x20\x20width:\x208px;\x0a}\x0a.frame-content::-webkit-scrollbar-track\x20{\x0a\x20\x20background:\x20var(--primary-bg);\x0a}\x0a.frame-content::-webkit-scrollbar-thumb\x20{\x0a\x20\x20background:\x20var(--border-color);\x0a\x20\x20border-radius:\x204px;\x0a}\x0a\x0a.frame-notes-container\x20{\x0a\x20\x20padding:\x208px;\x0a\x20\x20background-color:\x20var(--primary-bg);\x0a\x20\x20border-top:\x201px\x20solid\x20var(--border-color);\x0a\x20\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x0a\x20\x20display:\x20flex;\x0a\x20\x20flex-direction:\x20column;\x0a\x20\x20gap:\x208px;\x0a\x20\x20color:\x20var(--text-color);\x0a}\x0a\x0a.frame-footer\x20{\x0a\x20\x20height:\x2016px;\x0a\x20\x20background-color:\x20var(--footer-bg);\x20/*\x20Áµ±‰∏ÄÊöóÈªë‰∏ªÈ°å\x20*/\x0a\x20\x20cursor:\x20nwse-resize;\x0a\x20\x20transition:\x20background-color\x200.2s\x20ease;\x0a}\x0a\x0a.frame-footer:hover\x20{\x0a\x20\x20background-color:\x20#3a3a3a;\x20/*\x20Êá∏ÂÅúÊôÇËÆä‰∫Æ\x20*/\x0a}\x0a\x20\x20',document['head']['appendChild'](r);}function colorizeChildConnections(b,c=null,d=0x0){if(d>0x14)return;const f=connections['filter'](g=>g['fromNode']===b);f['forEach']((g,h)=>{let i;d===0x0?i=h%0x10:i=c;g['colorClass']='color-'+i;const j=nodes[g['toNode']];if(!j)return;(!j['temporaryColorApplied']||j['temporaryColorIndex']!==i)&&(applyTemporaryColorToNode(j,i),colorizeChildConnections(j['id'],i,d+0x1));});if(d===0x0){const g=nodes[b];g&&(!g['temporaryColorApplied']||g['temporaryColorIndex']!==0x0)&&applyTemporaryColorToNode(g,0x0);}}function applyTemporaryColorToNode(b,c){const d=b['element'],f=d['querySelector']('.paragraph-popup'),g=[];for(let h=0x0;h<=0xf;h++){g['push']('color-'+h);}g['forEach'](j=>{d['classList']['remove'](j);if(f)f['classList']['remove'](j);}),d['classList']['remove']('transparent'),d['classList']['add']('transparent','color-'+c);if(f){for(let j=0x0;j<=0xf;j++){f['classList']['remove']('color-'+j);}f['classList']['add']('color-'+c);}b['temporaryColorIndex']=c,b['temporaryColorApplied']=!![];}function updateNodesWithFunctions(b){let c=0x0;const d=[];nodes['forEach'](f=>{const g=f['element']['querySelector']('.node-title');if(g){const h=g['value']['trim']();b[h]&&b[h]['code']&&(updateNodeContent(f,b[h]['code']),c++,d['push'](f));}}),c>0x0?(showStatusMessage('Â∑≤Êõ¥Êñ∞\x20'+c+'\x20ÂÄãÁØÄÈªûÁöÑÂÖßÂÆπ','success'),d['forEach'](f=>{highlightNodeTemporarily(f);})):showStatusMessage('Êú™ÊâæÂà∞ÂåπÈÖçÁöÑÂáΩÊï∏ÂêçÁ®±','warning');}function setupNodeContent(b,c){const d=b['element']['querySelector']('.paragraph-input');if(d&&c['content']!==undefined){d['value']=c['content'];if(c['isConvertedToButton']&&c['content']['trim']()){const g=document['createElement']('button');g['className']='paragraph-btn',g['textContent']=c['content']['length']>0x32?c['content']['substring'](0x0,0x2f)+'...':c['content'],g['dataset']['originalContent']=c['content'];const h=document['createElement']('div');h['className']='paragraph-popup',h['textContent']=c['content'],h['classList']['add'](COLOR_CLASSES[c['colorIndex']%COLOR_CLASSES['length']]);const i=document['createElement']('div');i['style']['position']='relative',i['style']['display']='inline-block',i['style']['width']='100%';const j=d['cloneNode'](!![]);j['style']['display']='none',i['appendChild'](j),i['appendChild'](g),i['appendChild'](h),d['replaceWith'](i),setupParagraphButtonEvents(g,h,j,b);}}const f=b['element']['querySelector']('.items');f&&c['items']&&(f['innerHTML']='',b['outputs']=[],c['items']['forEach']((k,l)=>{const m=document['createElement']('div');m['className']='item',m['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22drag-handle\x22>‚ò∞</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22item-text\x22\x20value=\x22'+escapeHtml(k||'È†ÖÁõÆ\x20'+(l+0x1))+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-node-btn\x22>+</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22output-port\x22\x20data-type=\x22output\x22></div>\x0a\x20\x20\x20\x20\x20\x20',f['appendChild'](m),b['outputs']['push'](l),setupAddNodeButton(m,b,l,container),setupOutputPort(m,b,l,container),setupItemDragAndDrop(b['element'],b);}));}function initMinimap(){minimapCanvas['width']=minimapCanvas['offsetWidth'],minimapCanvas['height']=minimapCanvas['offsetHeight'],updateMinimap();}function updateMinimap(){if(!nodes['length'])return;let b=Infinity,c=Infinity,d=-Infinity,f=-Infinity;nodes['forEach'](m=>{const n=m['isFrame']?parseFloat(m['element']['style']['width']||m['element']['offsetWidth']):0xc8,o=getNodeHeight(m['element']);b=Math['min'](b,m['x']),c=Math['min'](c,m['y']),d=Math['max'](d,m['x']+n),f=Math['max'](f,m['y']+o);});const g=0x32;b-=g,c-=g,d+=g,f+=g;const h=d-b,i=f-c,j=minimapCanvas['width']/h,k=minimapCanvas['height']/ i,l=Math['min'](j,k);minimapCtx['clearRect'](0x0,0x0,minimapCanvas['width'],minimapCanvas['height']),nodes['forEach'](m=>{const n=(m['x']-b)*l,o=(m['y']-c)*l,p=(m['isFrame']?parseFloat(m['element']['style']['width']||m['element']['offsetWidth']):0xc8)*l,q=getNodeHeight(m['element'])*l;minimapCtx['fillStyle']=m['isFrame']?'rgba(255,\x20255,\x200,\x200.3)':'rgba(255,\x20255,\x20255,\x200.3)',minimapCtx['fillRect'](n,o,p,q),minimapCtx['strokeStyle']='rgba(255,\x20255,\x20255,\x200.5)',minimapCtx['lineWidth']=0x1,minimapCtx['strokeRect'](n,o,p,q);}),updateViewportIndicator(b,c,l);}function updateViewportIndicator(b,c,d){const f=0x320,g=-0x0,h=1.2,i=1.2,j=2.6,k=2.6,l=0x141,m=(window['innerWidth']-l)*h,n=window['innerHeight']*i,o=m/scale,p=n/scale,q=(-translateX*j-l+f)/scale,r=(-translateY*k+g)/scale,s=(q-b)*d,t=(r-c)*d,u=o*d,v=p*d,w=Math['max'](0x0,Math['min'](s,minimapCanvas['width']-u)),x=Math['max'](0x0,Math['min'](t,minimapCanvas['height']-v));viewportIndicator['style']['left']=w+'px',viewportIndicator['style']['top']=x+'px',viewportIndicator['style']['width']=u+'px',viewportIndicator['style']['height']=v+'px';}function searchNodesByName(){const b=document['getElementById']('node-search-input')['value']['trim']()['toLowerCase']();if(!b)return;nodes['forEach'](d=>{d['element']['classList']['remove']('highlight-found');});const c=nodes['filter'](d=>{const f=d['element']['querySelector']('.node-title');return f&&(f['value']||f['textContent']||f['innerText'])['toLowerCase']()['includes'](b);});if(c['length']>0x0){const d=c[0x0];d['element']['classList']['add']('highlight-found');const f=d['element']['getBoundingClientRect'](),g=f['left']+f['width']/0x2,h=f['top']+f['height']/0x2,i=(g-translateX)/scale,j=(h-translateY)/scale;animationFrameId&&(cancelAnimationFrame(animationFrameId),animationFrameId=null),smoothMoveTo(i,j,scale,0x320);}else alert('Êú™ÊâæÂà∞ÂåπÈÖçÁöÑÁØÄÈªûÊ®ôÈ°å');}function smoothMoveTo(b,c,d,f=0x320){const g=performance['now'](),h=translateX,i=translateY,j=scale,k=window['innerWidth']/0x2-b*d,l=window['innerHeight']/0x2-c*d;function m(n){const o=n-g,p=Math['min'](o/f,0x1),q=easeInOutCubic(p);translateX=h+(k-h)*q,translateY=i+(l-i)*q,scale=j+(d-j)*q,applyTransform();if(p<0x1)animationFrameId=requestAnimationFrame(m);else{translateX=k+left-panel['width'],translateY=l,scale=d,applyTransform();const r=document['querySelector']('.node.highlight-found\x20.node-title');r&&(r['classList']['add']('title-highlight'),setTimeout(()=>r['classList']['remove']('title-highlight'),0x3e8)),animationFrameId=null;}}animationFrameId=requestAnimationFrame(m);}function easeInOutCubic(b){return b<0.5?0x4*b*b*b:0x1-Math['pow'](-0x2*b+0x2,0x3)/0x2;}function arrangePopups(){const b=Array['from'](ALL_ACTIVE_POPUPS);if(b['length']===0x0)return;const c=window['innerWidth'],d=window['innerHeight'],f=0xa,g={'small':{'width':Math['min'](0x15e,c*0.4),'height':Math['min'](0xfa,d*0.35)},'medium':{'width':Math['min'](0x190,c*0.5),'height':Math['min'](0x12c,d*0.45)}},h=document['createElement']('style');h['textContent']='\x0a.node.highlight-found\x20{\x0a\x20\x20box-shadow:\x200\x200\x2015px\x205px\x20rgba(0,\x20255,\x20255,\x200.7)\x20!important;\x0a\x20\x20transition:\x20box-shadow\x200.3s;\x0a}\x0a',document['head']['appendChild'](h),b['forEach']((k,l)=>{if(l>=0x5)k['style']['width']=g['small']['width']+'px',k['style']['height']=g['small']['height']+'px';else l>=0x3?(k['style']['width']=g['medium']['width']+'px',k['style']['height']=g['medium']['height']+'px'):(k['style']['maxWidth']=c*0.8+'px',k['style']['maxHeight']=d*0.8+'px',k['style']['width']='',k['style']['height']='');k['style']['display']='block';});if(b['length']<=0x3){const k=b['slice'](0x0,0x3);adjustWidths(k,f,c),arrangeGridLayout(k,f,c,d);return;}const j=b['slice'](0x0,0x3);adjustWidths(j,f,c),arrangeGridLayout(j,f,c,d);if(b['length']>=0x4){const l=j['map'](x=>parseFloat(x['style']['top'])+x['getBoundingClientRect']()['height']),m=[...l]['map']((x,y)=>({'h':x,'i':y}))['sort']((x,y)=>x['h']-y['h'])['map'](x=>x['i']),n=m[0x0],o=m[0x1],p=b[0x3],q=p['getBoundingClientRect']();let r=l[n]+f;const s=b['length']>=0x5?b[0x4]:null,t=s?.['getBoundingClientRect']();let u=l[o]+f;const v=Math['max'](r+q['height'],u+(t?.['height']||0x0)),w=Math['max'](0x0,(d-v)/0x2);if(w>0x0)j['forEach'](x=>{x['style']['top']=parseFloat(x['style']['top'])+w+'px';}),p['style']['left']=parseFloat(j[n]['style']['left'])+'px',p['style']['top']=r+w+'px',s&&(s['style']['left']=parseFloat(j[o]['style']['left'])+'px',s['style']['top']=u+w+'px');else{const x=d/v;j['forEach'](z=>{const A=z['getBoundingClientRect']();z['style']['height']=A['height']*x*0.9+'px';}),arrangeGridLayout(j,f,c,d);const y=j['map'](z=>parseFloat(z['style']['top'])+z['getBoundingClientRect']()['height']);p['style']['left']=parseFloat(j[n]['style']['left'])+'px',p['style']['top']=y[n]+f+'px',s&&(s['style']['left']=parseFloat(j[o]['style']['left'])+'px',s['style']['top']=y[o]+f+'px');}}if(b['length']>=0x6){let z=f,A=f,B=0x0;for(let C=0x5;C<b['length'];C++){const D=b[C],E=D['getBoundingClientRect']();z+E['width']>c&&(z=f,A+=B+f,B=0x0),D['style']['left']=z+'px',D['style']['top']=A+'px',z+=E['width']+f,B=Math['max'](B,E['height']),A+E['height']>d&&(z=f,A=f);}}}function adjustWidths(b,c,d){let f=0x0;const g=[];b['forEach'](h=>{h['style']['width']='';const i=h['getBoundingClientRect']();g['push'](i['width']),f+=i['width'];}),f+=c*(b['length']-0x1);if(f>d){const h=(d-c*(b['length']-0x1))/(f-c*(b['length']-0x1));b['forEach']((j,k)=>{j['style']['width']=g[k]*h+'px';});}}function arrangeGridLayout(b,c,d,f){if(b['length']===0x0)return;let g=0x0,h=0x0;b['forEach'](w=>{const x=w['getBoundingClientRect']();g+=x['width']+c,h+=x['height']+c;});const j=d/f;let k=Math['ceil'](Math['sqrt'](b['length']*j)),l=Math['ceil'](b['length']/k);while(l>k&&(l-0x1)*k>=b['length']){l--,k=Math['ceil'](b['length']/l);}const m=new Array(k)['fill'](0x0),n=new Array(l)['fill'](0x0);b['forEach']((w,x)=>{const y=x%k,z=Math['floor'](x/k),A=w['getBoundingClientRect']();m[y]=Math['max'](m[y],A['width']),n[z]=Math['max'](n[z],A['height']);});const o=m['reduce']((w,x)=>w+x+c,-c),p=n['reduce']((w,x)=>w+x+c,-c),q=(d-o)/0x2,r=(f-p)/0x2,s=[];let t=q;for(let w=0x0;w<k;w++){s['push'](t),t+=m[w]+c;}const u=[];let v=r;for(let x=0x0;x<l;x++){u['push'](v),v+=n[x]+c;}b['forEach']((y,z)=>{const A=z%k,B=Math['floor'](z/k),C=y['getBoundingClientRect']();y['style']['left']=s[A]+'px',y['style']['top']=u[B]+'px',y['style']['width']=C['width']+'px',y['style']['height']=C['height']+'px';});}function setupParagraphButtonEvents(b,c,d,f){if(!b||!b['parentNode']||!c)return;const g=b['cloneNode'](!![]),h=document['createElement']('div');h['style']['display']='flex',h['style']['alignItems']='center',h['style']['marginBottom']='10px';const i=createCopyButton(),j=createUpdateButton();h['appendChild'](g),h['appendChild'](j),minimapCanvas['addEventListener']('click',p=>{const q=minimapCanvas['getBoundingClientRect'](),r=p['clientX']-q['left'],s=p['clientY']-q['top'];let t=Infinity,u=Infinity,v=-Infinity,w=-Infinity;nodes['forEach'](F=>{t=Math['min'](t,F['x']),u=Math['min'](u,F['y']),v=Math['max'](v,F['x']+0xc8),w=Math['max'](w,F['y']+getNodeHeight(F['element']));});const x=0x32;t-=x,u-=x,v+=x,w+=x;const y=v-t,z=w-u,A=minimapCanvas['width']/y,B=minimapCanvas['height']/z,C=Math['min'](A,B),D=r/C+t,E=s/C+u;smoothMoveTo(D,E,this['scale'],0x12c);});try{b['parentNode']['replaceChild'](h,b);}catch(p){return;}const {originalParent:k,originalNextSibling:l,originalStyles:m}=saveOriginalPopupPosition(c);setupCopyButtonEvents(i,c),setupUpdateButtonEvents(j,c,f),c['appendChild'](i),setupPopupToggleEvents(g,c,f);const n=createClickOutsideHandler(c,k,l,m,f),o=createClearHandler(c,d,f);return document['addEventListener']('click',n),document['addEventListener']('keydown',o),c['dataset']['eventHandlers']=JSON['stringify']({'click':n,'keydown':o}),setupPopupCleanup(c,n,o),g;}function createButtonContainer(b){const c=document['createElement']('div');return c['style']['display']='flex',c['style']['alignItems']='center',c['style']['marginBottom']='10px',{'buttonContainer':c,'newBtn':b};}function createButtonContainer(b){const c=document['createElement']('div');return c['style']['display']='flex',c['style']['alignItems']='center',c['style']['marginBottom']='10px',{'buttonContainer':c,'newBtn':b['cloneNode'](!![])};}function createCopyButton(){const b=document['createElement']('button');return b['className']='copy-btn',b['textContent']='',b;}function createUpdateButton(){const b=document['createElement']('button');return b['className']='update-btn',b['textContent']='Êõ¥Êñ∞',b['title']='Êõ¥Êñ∞ÂÖßÂÆπ‰∏¶Ë™øÊï¥ÈÄ£Êé•',b;}function setupCopyButtonEvents(b,c){b['addEventListener']('click',d=>{d['stopPropagation'](),handleCopyText(c['textContent'],b);});}function handleCopyText(b,c){try{navigator['clipboard']['writeText'](b)['then'](()=>{updateButtonTextTemporarily(c,'Â∑≤Ë§áË£Ω!');})['catch'](d=>{updateButtonTextTemporarily(c,'Ë§áË£ΩÂ§±Êïó');});}catch(d){updateButtonTextTemporarily(c,'Ë§áË£ΩÂ§±Êïó');}}function updateButtonTextTemporarily(b,c){b['textContent']=c,setTimeout(()=>{b['textContent']='';},0x7d0);}function setupUpdateButtonEvents(b,c,d){b['addEventListener']('click',f=>{f['stopPropagation'](),showUpdateDialog(c['textContent'],g=>{g!==null&&updateNodeContent(d,g);});});}function saveOriginalPopupPosition(b){return{'originalParent':b['parentNode'],'originalNextSibling':b['nextSibling'],'originalStyles':{'position':b['style']['position'],'left':b['style']['left'],'top':b['style']['top'],'zIndex':b['style']['zIndex']}};}function setupPopupToggleEvents(b,c,d){b['addEventListener']('click',f=>{d['popupContainer']&&(d['popupContainer']['remove'](),d['popupContainer']=null);const g=document['createElement']('div');g['style']['position']='fixed',g['style']['zIndex']='2147483647';const h=c['cloneNode'](!![]);h['style']['display']='block',h['style']['width']='100%',h['style']['height']='100%',h['style']['overflow']='auto',g['appendChild'](h),document['body']['appendChild'](g),d['popupContainer']=g,ALL_ACTIVE_POPUPS['add'](h),activePopup=h,arrangePopups(),f['stopPropagation']();});}function createClickOutsideHandler(b,c,d,f,g){return h=>{const i=Array['from'](ALL_ACTIVE_POPUPS)['some'](k=>k['contains'](h['target'])),j=g['element']['contains'](h['target']);!i&&!j&&closeAllPopups(b,c,d,f,g);};}function closeAllPopups(b,c,d,f,g){ALL_ACTIVE_POPUPS['forEach'](h=>{h['style']['display']='none',restoreOriginalPosition(h,c,d,f),h['parentNode']&&h['parentNode']['removeChild'](h);}),ALL_ACTIVE_POPUPS['clear'](),activePopup=null,g['popupContainer']&&(g['popupContainer']['remove'](),g['popupContainer']=null);}function restoreOriginalPosition(b,c,d,f){c&&b['parentNode']===document['body']&&c['insertBefore'](b,d),Object['entries'](f)['forEach'](([g,h])=>{b['style'][g]=h;});}function createClearHandler(b,c,d){return f=>{f['key']['toLowerCase']()==='x'&&activePopup===b&&(clearParagraphInput(c,d,b),f['preventDefault']());};}function clearParagraphInput(b,c,d){b['value']='',resetItemsList(c),d['style']['display']='none',ALL_ACTIVE_POPUPS['delete'](d),activePopup=null;}function setupPopupCleanup(b,c,d){b['addEventListener']('DOMNodeRemoved',()=>{document['removeEventListener']('click',c),document['removeEventListener']('keydown',d),ALL_ACTIVE_POPUPS['delete'](b);});}function showUpdateDialog(b,c){const d=document['createElement']('div');d['className']='update-dialog',d['innerHTML']='\x0a\x20\x20\x20\x20<div\x20class=\x22update-dialog-content\x22>\x0a\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22update-dialog-textarea\x22>'+escapeHtml(b)+'</textarea>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22update-dialog-buttons\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22update-dialog-cancel\x22>ÂèñÊ∂à</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22update-dialog-confirm\x22>Á¢∫Ë™ç</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20',document['body']['appendChild'](d);const f=d['querySelector']('#update-dialog-textarea'),g=d['querySelector']('.update-dialog-cancel'),h=d['querySelector']('.update-dialog-confirm');f['focus'](),g['addEventListener']('click',()=>{document['body']['removeChild'](d),c(null);}),h['addEventListener']('click',()=>{const i=f['value']['trim']();document['body']['removeChild'](d),c(i);}),d['addEventListener']('keydown',i=>{i['key']==='Escape'&&(document['body']['removeChild'](d),c(null));});}function updateNodeContent(b,c){const d=b['element'],f=d['querySelector']('.paragraph-popup'),g=d['querySelector']('.paragraph-btn');f['textContent']=c,g['textContent']=c['length']>0x32?c['substring'](0x0,0x2f)+'...':c,g['dataset']['originalContent']=c;const h=extractFunctionName(c);h&&(d['querySelector']('.node-title')['value']=h,updateSameNameHighlights());const i=extractCalledFunctions(c,h),j=i['filter'](n=>{const o=currentLanguage==='python'?PYTHON_FUNCTION_BLACKLIST['includes'](n):FUNCTION_BLACKLIST['includes'](n);if(o){}return!o;}),k=Array['from'](d['querySelectorAll']('.item-text'))['map'](n=>n['value']),l=new Map();connections['forEach'](n=>{if(n['fromNode']===b['id']){const o=k[n['fromOutput']];l['set'](n['fromOutput']+'_'+o,{'toNode':n['toNode'],'toInput':n['toInput']});}}),connections=connections['filter'](n=>n['fromNode']!==b['id']);const m=d['querySelector']('.items');m['innerHTML']='',b['outputs']=[],j['forEach']((n,o)=>{const p=document['createElement']('div');p['className']='item',p['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20<span\x20class=\x22drag-handle\x22>‚ò∞</span>\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22item-text\x22\x20value=\x22'+escapeHtml(n)+'\x22>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-node-btn\x22>+</button>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22output-port\x22\x20data-type=\x22output\x22></div>\x0a\x20\x20\x20\x20',m['appendChild'](p),b['outputs']['push'](o),setupAddNodeButton(p,b,o,container),setupOutputPort(p,b,o,container),setupItemDragAndDrop(d,b);let q=![];const r=o+'_'+n;if(l['has'](r)){const {toNode:s,toInput:t}=l['get'](r);connections['push']({'fromNode':b['id'],'fromOutput':o,'toNode':s,'toInput':t}),q=!![];}if(!q)for(const [u,v]of l){const [w,x]=u['split']('_');if(x===n){if(!connections['some'](y=>y['fromNode']===b['id']&&y['toNode']===v['toNode']&&y['toInput']===v['toInput'])){connections['push']({'fromNode':b['id'],'fromOutput':o,'toNode':v['toNode'],'toInput':v['toInput']}),l['delete'](u);break;}}}}),analyzeVariables(b),drawConnections(),showStatusMessage('ÂÖßÂÆπÂ∑≤Êõ¥Êñ∞ÔºåÈÄ£Êé•Á≤æÁ¢∫‰øùÊåÅÔºåÂ∑≤ÈÅéÊøæÈªëÂêçÂñÆÂáΩÊï∏','success');}function resizeCanvas(){canvas['width']=container['offsetWidth'],canvas['height']=container['offsetHeight'];}resizeCanvas(),window['addEventListener']('resize',resizeCanvas);function toWorldX(b){return b/scale+translateX;}function toWorldY(b){return b/scale+translateY;}function extractFunctionName(b){if(currentLanguage==='python'){const c=[/def\s+([a-zA-Z_][0-9a-zA-Z_]*)\s*\(/,/class\s+([a-zA-Z_][0-9a-zA-Z_]*)\s*\(?/,/([a-zA-Z_][0-9a-zA-Z_]*)\s*=\s*lambda\s+/];for(const d of c){const f=b['match'](d);if(f)return f[0x1];}return null;}else{const g=[/function\s+([a-zA-Z_$][0-9a-zA-Z_$]*)\s*\(/,/const\s+([a-zA-Z_$][0-9a-zA-Z_$]*)\s*=\s*\([^)]*\)\s*=>/,/let\s+([a-zA-Z_$][0-9a-zA-Z_$]*)\s*=\s*\([^)]*\)\s*=>/,/var\s+([a-zA-Z_$][0-9a-zA-Z_$]*)\s*=\s*\([^)]*\)\s*=>/,/const\s+([a-zA-Z_$][0-9a-zA-Z_$]*)\s*=\s*function/,/let\s+([a-zA-Z_$][0-9a-zA-Z_$]*)\s*=\s*function/,/var\s+([a-zA-Z_$][0-9a-zA-Z_$]*)\s*=\s*function/,/class\s+([a-zA-Z_$][0-9a-zA-Z_$]*)\s*{/];for(const h of g){const i=b['match'](h);if(i)return i[0x1];}return null;}}function extractCalledFunctions(b,c){const d=new Set();if(currentLanguage==='python'){const f=/([a-zA-Z_][0-9a-zA-Z_]*)\s*\([^)]*\)/g;let g;while((g=f['exec'](b))!==null){const h=g[0x1],i=PYTHON_FUNCTION_BLACKLIST['includes'](h);if(h['trim']()==='(e')continue;if(!i&&h!==c)d['add'](h);else{if(i){}}}}else{const j=/([a-zA-Z_$][0-9a-zA-Z_$]*)\s*\([^)]*\)/g;let k;while((k=j['exec'](b))!==null){const m=k[0x1],n=FUNCTION_BLACKLIST['includes'](m);if(m['trim']()==='(e')continue;if(!n&&m!==c)d['add'](m);else{if(n){}}}const l=extractAdditionalFunctionNames(b);l['forEach'](o=>{if(o['trim']()==='(e')return;o!==c&&d['add'](o);});}return Array['from'](d);}const PYTHON_FUNCTION_BLACKLIST=['abs','all','any','ascii','bin','bool','breakpoint','bytearray','bytes','callable','chr','classmethod','compile','complex','delattr','dict','dir','divmod','enumerate','eval','exec','filter','float','format','frozenset','getattr','globals','hasattr','hash','help','hex','id','input','int','isinstance','issubclass','iter','len','list','locals','map','max','memoryview','min','next','object','oct','open','ord','pow','print','property','range','repr','reversed','round','set','setattr','slice','sorted','staticmethod','str','sum','super','tuple','type','vars','zip','__import__','__build_class__','__loader__','__spec__','and','as','assert','async','await','break','class','continue','def','del','elif','else','except','False','finally','for','from','global','if','import','in','is','lambda','None','nonlocal','not','or','pass','raise','return','True','try','while','with','yield','append','clear','copy','count','extend','index','insert','pop','remove','reverse','sort','capitalize','casefold','center','encode','endswith','expandtabs','find','format','format_map','isalnum','isalpha','isascii','isdecimal','isdigit','isidentifier','islower','isnumeric','isprintable','isspace','istitle','isupper','join','ljust','lower','lstrip','maketrans','partition','replace','rfind','rindex','rjust','rpartition','rsplit','rstrip','split','splitlines','startswith','strip','swapcase','title','translate','upper','zfill','get','items','keys','popitem','setdefault','update','values','__globals__','__code__','__class__','__subclasses__','__bases__','__getattribute__'];function escapeHtml(b){return b['replace'](/&/g,'&amp;')['replace'](/</g,'&lt;')['replace'](/>/g,'&gt;')['replace'](/"/g,'&quot;')['replace'](/'/g,'&#039;');}function showStatusMessage(b,c='info'){const d=document['createElement']('div');d['textContent']=b,d['style']['position']='fixed',d['style']['bottom']='20px',d['style']['right']='20px',d['style']['padding']='10px\x2020px',d['style']['background']=c==='error'?'#ff4444':'#4CAF50',d['style']['color']='white',d['style']['borderRadius']='4px',d['style']['zIndex']='10000',document['body']['appendChild'](d),setTimeout(()=>{d['style']['transition']='opacity\x200.5s',d['style']['opacity']='0',setTimeout(()=>d['remove'](),0x1f4);},0xbb8);}function extractFunctions(b){const c={},d=/function\s+([a-zA-Z_$][0-9a-zA-Z_$]*)\s*\([^)]*\)\s*\{/g;let f,g=0x0;while((f=d['exec'](b))!==null){const h=f[0x1],i=f['index'],j=b['indexOf']('{',i);if(j!==-0x1){const k=extractBalancedBraces(b,j);if(k){c[h]={'code':b['substring'](i,i+f[0x0]['length']+k['length']),'start':i,'end':i+f[0x0]['length']+k['length']},g++;if(h==='closeAllLists'){}}}}if(!c['closeAllLists']){const l=b['indexOf']('closeAllLists');if(l!==-0x1){const m=b['substring'](Math['max'](0x0,l-0x64),Math['min'](b['length'],l+0xc8));}}return c;}function extractBalancedBraces(b,c){let d=0x0,f=c;for(;f<b['length'];f++){if(b[f]==='{')d++;else{if(b[f]==='}'){d--;if(d===0x0)return b['substring'](c,f+0x1);}}}return null;}function setupAddNodeButton(b,c,d,f){b['querySelector']('.add-node-btn')['addEventListener']('click',g=>{const h=b['querySelector']('.item-text')['value'],i=h['trim']();if(loadedHtmlFunctions[i]){}else{const n=i['toLowerCase']();for(const o in loadedHtmlFunctions){if(o['toLowerCase']()===n)break;}}if(functionContent){}else{const p=Object['keys'](loadedHtmlFunctions),q=p['filter'](r=>r['toLowerCase']()['includes'](i['toLowerCase']())||i['toLowerCase']()['includes'](r['toLowerCase']()));}const j=connections['filter'](r=>r['fromNode']===c['id']&&r['fromOutput']===d)['length'],k=c['x']+0xc8/scale,l=c['y']+j*0x78/scale,m=createNode(k,l,i,'normal',functionContent);functionContent?(setTimeout(()=>{const r=m['element']['querySelector']('.paragraph-input');if(r){if(r['value']!==functionContent){r['value']=functionContent;const s=new Event('input',{'bubbles':!![]});r['dispatchEvent'](s);}}},0x64),showStatusMessage('Â∑≤Ëá™ÂãïÂ°´ÂÖ•ÂáΩÊï∏\x20\x22'+(foundKey||i)+'\x22\x20ÁöÑÂÖßÂÆπ','success')):showStatusMessage('ÂâµÂª∫ÁØÄÈªû\x20\x22'+i+'\x22Ôºå‰ΩÜÊú™ÊâæÂà∞Â∞çÊáâÂáΩÊï∏ÂÖßÂÆπ','warning'),connections['push']({'fromNode':c['id'],'fromOutput':d,'toNode':m['id']}),drawConnections(),g['stopPropagation']();});}function setupAddNodeButton(b,c,d,f){b['querySelector']('.add-node-btn')['addEventListener']('click',g=>{const h=b['querySelector']('.item-text')['value'],i=h['trim']();let j=null,k=null;if(loadedHtmlFunctions[i])j=loadedHtmlFunctions[i]['code'],k=i;else{const p=i['toLowerCase']();for(const q in loadedHtmlFunctions){if(q['toLowerCase']()===p){j=loadedHtmlFunctions[q]['code'],k=q;break;}}}if(j){}else{const r=Object['keys'](loadedHtmlFunctions),s=r['filter'](t=>t['toLowerCase']()['includes'](i['toLowerCase']())||i['toLowerCase']()['includes'](t['toLowerCase']()));}const l=connections['filter'](t=>t['fromNode']===c['id']&&t['fromOutput']===d)['length'],m=c['x']+0xc8/scale,n=c['y']+l*0x78/scale,o=createNode(m,n,i,'normal',j);j?(setTimeout(()=>{const t=o['element']['querySelector']('.paragraph-input');if(t){if(t['value']!==j){t['value']=j;const u=new Event('input',{'bubbles':!![]});t['dispatchEvent'](u);}}},0x64),showStatusMessage('Â∑≤Ëá™ÂãïÂ°´ÂÖ•ÂáΩÊï∏\x20\x22'+(k||i)+'\x22\x20ÁöÑÂÖßÂÆπ','success')):showStatusMessage('ÂâµÂª∫ÁØÄÈªû\x20\x22'+i+'\x22Ôºå‰ΩÜÊú™ÊâæÂà∞Â∞çÊáâÂáΩÊï∏ÂÖßÂÆπ','warning'),connections['push']({'fromNode':c['id'],'fromOutput':d,'toNode':o['id']}),drawConnections(),g['stopPropagation']();});}function setupOutputPort(b,c,d,f){b['querySelector']('.output-port')['addEventListener']('mousedown',g=>{if(spacePressed||g['button']===0x1)return;const h=g['target']['getBoundingClientRect']();connecting={'startX':h['left']+h['width']/0x2,'startY':h['top']+h['height']/0x2,'fromNode':c['id'],'fromOutput':d},f['classList']['add']('connecting'),g['stopPropagation']();});}function createFunctionItems(b,c,d){const f=b['element']['querySelector']('.items');f['innerHTML']='';const g=getNodeContent(b),h=extractAdditionalFunctionNames(g),i=[...new Set([...c,...h])];i['forEach']((j,k)=>{const l=document['createElement']('div');l['className']='item',l['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20<span\x20class=\x22drag-handle\x22>‚ò∞</span>\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22item-text\x22\x20value=\x22'+j+'\x22>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-node-btn\x22>+</button>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22output-port\x22\x20data-type=\x22output\x22></div>\x0a\x20\x20\x20\x20',f['appendChild'](l),b['outputs']=i['map']((m,n)=>n),setupAddNodeButton(l,b,k,d),setupOutputPort(l,b,k,d),setupItemDragAndDrop(b['element'],b);});}function extractAdditionalFunctionNames(b){const c=new Set();if(!b)return[];const d=[/document\.getElementById\(['"]([^'"]+)['"]\)\.addEventListener\([^,]+,\s*([^)\s,]+)/g,/\.addEventListener\(['"]([^'"]+)['"],\s*([^)\s,]+)/g,/onclick\s*=\s*["']([^("']+)\([^)]*\)["']/g,/on(?:mouse|touch|key|load|submit|change)\s*=\s*["']([^("']+)\([^)]*\)["']/g,/\$\(['"]#[^'"]+['"]\)\.(?:click|on)\(\s*([^)\s,]+)/g,/\$\(['"][^'"]+['"]\)\.on\(['"](?:click|mouse|touch|key)['"],\s*([^)\s,]+)/g];d['forEach'](l=>{let m;while((m=l['exec'](b))!==null){const n=m[m['length']-0x1];if(n['trim']()==='(e')continue;const o=currentLanguage==='python'?PYTHON_FUNCTION_BLACKLIST['includes'](n):FUNCTION_BLACKLIST['includes'](n);if(!o)c['add'](n);else{}}});const f=/document\.getElementById\(['"]([^'"]+)['"]\)\.addEventListener\([^,]+,\s*([^)\s,]+)/g;let g;while((g=f['exec'](b))!==null){const l=g[0x1],m=g[0x2];if(m['trim']()==='(e')continue;const n=currentLanguage==='python'?PYTHON_FUNCTION_BLACKLIST['includes'](m):FUNCTION_BLACKLIST['includes'](m);if(!n)c['add'](m);else{}}const h=/onclick\s*=\s*["']([^("']+)\([^)]*\)["']/g;while((g=h['exec'](b))!==null){const o=g[0x1];if(o['trim']()==='(e')continue;const p=currentLanguage==='python'?PYTHON_FUNCTION_BLACKLIST['includes'](o):FUNCTION_BLACKLIST['includes'](o);if(!p)c['add'](o);else{}}const i=/\.addEventListener\(['"]click['"],\s*([^)\s,]+)/g;while((g=i['exec'](b))!==null){const q=g[0x1];if(q['trim']()==='(e')continue;const r=currentLanguage==='python'?PYTHON_FUNCTION_BLACKLIST['includes'](q):FUNCTION_BLACKLIST['includes'](q);if(!r)c['add'](q);else{}}const j=/\$\(['"]#[^'"]+['"]\)\.click\(\s*([^)\s,]+)/g;while((g=j['exec'](b))!==null){const s=g[0x1];if(s['trim']()==='(e')continue;const t=currentLanguage==='python'?PYTHON_FUNCTION_BLACKLIST['includes'](s):FUNCTION_BLACKLIST['includes'](s);if(!t)c['add'](s);else{}}const k=/\$\(['"]#[^'"]+['"]\)\.on\(['"]click['"],\s*([^)\s,]+)/g;while((g=k['exec'](b))!==null){const u=g[0x1];if(u['trim']()==='(e')continue;const v=currentLanguage==='python'?PYTHON_FUNCTION_BLACKLIST['includes'](u):FUNCTION_BLACKLIST['includes'](u);if(!v)c['add'](u);else{}}return Array['from'](c);}function cleanupExistingItems(b){const c=b['element']['querySelector']('.items');if(!c)return;const d=c['querySelectorAll']('.item');let f=0x0;d['forEach'](g=>{const h=g['querySelector']('.item-text');h&&h['value']['trim']()==='(e'&&(g['remove'](),f++);});if(f>0x0){const g=c['querySelectorAll']('.item');b['outputs']=Array['from'](g)['map']((h,i)=>i),g['forEach']((h,i)=>{const j=h['querySelector']('.output-port');j&&(j['dataset']['outputIndex']=i,j['dataset']['originalIndex']=i),setupAddNodeButton(h,b,i,container),setupOutputPort(h,b,i,container);}),setupItemDragAndDrop(b['element'],b),drawConnections();}}function setupParagraphPopup(b,c,d){const f=document['createElement']('button');f['className']='paragraph-btn',f['textContent']=c['length']>0x32?c['substring'](0x0,0x2f)+'...':c;const g=document['createElement']('div');g['className']='paragraph-popup',g['textContent']=c;const h=getCurrentColorClass(d);g['classList']['add'](h);const i=document['createElement']('div');i['style']['position']='relative',i['style']['display']='inline-block',i['style']['width']='100%';const j=b['cloneNode'](!![]);j['style']['display']='none',i['appendChild'](j),i['appendChild'](f),i['appendChild'](g),b['replaceWith'](i),f['addEventListener']('click',l=>{d['popupContainer']&&(d['popupContainer']['remove'](),d['popupContainer']=null);const m=f['getBoundingClientRect'](),n=m['left']+m['width']/0x2,o=m['top']+m['height']/0x2,p=(n-translateX)/scale,q=(o-translateY)/scale,r=0x258,s=0xc8;d['popupContainer']=document['createElement']('div');const t=d['popupContainer'];t['style']['position']='fixed',t['style']['left']='0',t['style']['top']='0',t['style']['width']=r+'px',t['style']['height']=s+'px',t['style']['transform']='\x0a\x20\x20\x20\x20\x20\x20translate('+(p*scale+translateX-r/0x2)+'px,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(q*scale+translateY-s/0x2)+'px)\x0a\x20\x20\x20\x20',t['style']['zIndex']='10000';const u=g['cloneNode'](!![]);u['style']['display']='block',u['style']['position']='absolute',u['style']['width']='100%',u['style']['height']='100%',u['style']['overflow']='auto',t['appendChild'](u),document['body']['appendChild'](t),activePopup=u,popupScrollPosition=0x0,updatePopupScroll(),l['stopPropagation'](),analyzeVariables(d);});const k=function(l){l['key']['toLowerCase']()==='x'&&activePopup===g&&(j['value']='',resetItemsList(d),i['replaceWith'](j),document['removeEventListener']('keydown',k),d['popupContainer']&&(d['popupContainer']['remove'](),d['popupContainer']=null),activePopup=null,l['preventDefault']());};document['addEventListener']('keydown',k),document['addEventListener']('click',l=>{d['popupContainer']&&!d['popupContainer']['contains'](l['target'])&&!i['contains'](l['target'])&&(d['popupContainer']['remove'](),d['popupContainer']=null,activePopup=null);});}function analyzeVariables(b){let c='';const d=b['element']['querySelector']('.paragraph-btn'),f=b['element']['querySelector']('.paragraph-input');if(d&&d['dataset']['originalContent'])c=d['dataset']['originalContent'];else f&&(c=f['value']);const g=b['element']['querySelector']('.variable-analysis-content');g['innerHTML']='';const h=extractVariables(c);if(h['length']===0x0){g['innerHTML']='<div\x20class=\x22no-variables-message\x22>Êú™ÊâæÂà∞ËÆäÊï∏ËÅ≤Êòé</div>';return;}const i=document['getElementById']('code-language-selector'),j=i?i['value']:'html';h['forEach'](l=>{let m=![];j==='python'?m=PYTHON_FUNCTION_BLACKLIST['includes'](l):m=FUNCTION_BLACKLIST['includes'](l);if(m)return;const n=document['createElement']('button');n['className']='variable-btn',n['textContent']=l,n['dataset']['variableName']=l,n['dataset']['active']='false',n['addEventListener']('click',o=>{o['stopPropagation'](),toggleVariableHighlight(l,b,n),highlightVariableInPopup(l,b);}),g['appendChild'](n);});if(g['children']['length']===0x0){g['innerHTML']='<div\x20class=\x22no-variables-message\x22>ÊâÄÊúâËÆäÊï∏ÈÉΩÂú®ÈªëÂêçÂñÆ‰∏≠</div>';return;}const k=b['element']['querySelector']('.variable-analysis-container');k&&(k['classList']['add']('expanded'),g['style']['display']='block');}function highlightVariableInPopup(b,c){const d=c['element']['querySelector']('.paragraph-popup');if(!d)return;const f=d['querySelectorAll']('.variable-highlight');f['forEach'](k=>{const l=k['parentNode'];l['replaceChild'](document['createTextNode'](k['textContent']),k),l['normalize']();});const g=new RegExp(currentLanguage==='python'?'\x5cb'+escapeRegExp(b)+'\x5cb(?![([])':'\x5cb'+escapeRegExp(b)+'\x5cb','g'),h=document['createTreeWalker'](d,NodeFilter['SHOW_TEXT']),i=[];let j;while(j=h['nextNode']()){j['nodeValue']['trim']()&&g['test'](j['nodeValue'])&&i['push'](j);}i['forEach'](k=>{const l=k['parentNode'];if(l['nodeName']==='SPAN'&&l['classList']['contains']('variable-highlight'))return;const m=k['nodeValue'],n=m['replace'](g,q=>{return'<span\x20class=\x22variable-highlight\x22>'+q+'</span>';}),o=document['createElement']('div');o['innerHTML']=n;const p=document['createDocumentFragment']();while(o['firstChild']){p['appendChild'](o['firstChild']);}l['replaceChild'](p,k);});}function escapeRegExp(b){return b['replace'](/[.*+?^${}()|[\]\\]/g,'\x5c$&');}function toggleVariableHighlight(b,c,d){const f=d['dataset']['active']==='true';f?(d['dataset']['active']='false',d['style']['backgroundColor']='',resetConnectionColors(),removeVariableHighlights(c['element']),connections['forEach'](g=>{if(g['highlighted']){const h=nodes[g['toNode']];removeVariableHighlights(h['element']);}})):(d['dataset']['active']='true',d['style']['backgroundColor']='#4a90e2',highlightVariableConnections(b,c),highlightVariableInPopup(b,c));}function removeVariableHighlights(b){const c=b['querySelector']('.paragraph-popup');if(!c)return;const d=c['querySelectorAll']('.variable-highlight');d['forEach'](f=>{const g=f['parentNode'];g['replaceChild'](document['createTextNode'](f['textContent']),f),g['normalize']();});}function highlightVariableConnections(b,c){resetConnectionColors();const d=getNodeContent(c);if(!d['includes'](b))return;const f=new Set();connections['forEach'](g=>{if(g['fromNode']===c['id']){const h=nodes[g['toNode']],i=getNodeContent(h);i['includes'](b)&&(g['highlighted']=!![],f['add'](h));}}),f['forEach'](g=>{highlightVariableInPopup(b,g);}),drawConnections();}function getNodeContent(b){const c=b['element']['querySelector']('.paragraph-btn'),d=b['element']['querySelector']('.paragraph-input');return c?.['dataset']['originalContent']||d?.['value']||'';}function extractVariables(b){const c=new Set();if(currentLanguage==='python'){const d=/^\s*([a-zA-Z_][a-zA-Z0-9_]*)\s*=/gm,f=/for\s+([a-zA-Z_][a-zA-Z0-9_]*)\s+in/g,g=/def\s+\w+\s*\(([^)]*)\)/g;let h;while((h=d['exec'](b))!==null){c['add'](h[0x1]);}while((h=f['exec'](b))!==null){c['add'](h[0x1]);}while((h=g['exec'](b))!==null){h[0x1]['split'](',')['forEach'](i=>{const j=i['trim']()['split']('=')[0x0];if(j)c['add'](j);});}}else{const i=/(?:const|let|var)\s+([a-zA-Z_$][0-9a-zA-Z_$]*)/g;let j;while((j=i['exec'](b))!==null){c['add'](j[0x1]);}}return Array['from'](c);}function resetConnectionColors(){connections['forEach'](b=>{b['highlighted']=![];}),drawConnections();}function getCurrentColorClass(b){const c=b['element'];for(const d of COLOR_CLASSES){if(c['classList']['contains'](d))return d;}return COLOR_CLASSES[0x0];}function changeNodeColor(b,c){b['element']['classList']['remove'](...COLOR_CLASSES);const d=COLOR_CLASSES[c%COLOR_CLASSES['length']];b['element']['classList']['add'](d),b['colorIndex']=c;const f=b['element']['querySelector']('.paragraph-popup');f&&(f['classList']['remove'](...COLOR_CLASSES),f['classList']['add'](d));if(b['popupContainer']){const g=b['popupContainer']['querySelector']('.paragraph-popup');g&&(g['classList']['remove'](...COLOR_CLASSES),g['classList']['add'](d));}}function resetItemsList(b){const c=b['element']['querySelector']('.items');c['innerHTML']='\x0a\x20\x20\x20\x20<div\x20class=\x22item\x22>\x0a\x20\x20\x20\x20\x20\x20<span\x20class=\x22drag-handle\x22>‚ò∞</span>\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22item-text\x22\x20value=\x22\x22>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-node-btn\x22>+</button>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22output-port\x22\x20data-type=\x22output\x22></div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20',b['outputs']=[0x0];const d=c['querySelector']('.item');setupAddNodeButton(d,b,0x0,container),setupOutputPort(d,b,0x0,container),setupItemDragAndDrop(b['element'],b);const f=b['element']['querySelector']('.paragraph-container');if(f){const g=document['createElement']('textarea');g['className']='paragraph-input',g['placeholder']='Ë≤º‰∏äÊÆµËêΩÂÖßÂÆπ...',f['replaceWith'](g);}}function toggleNodeColors(){clearAllTemporaryColors(),selectedNodes['forEach'](b=>{const c=nodes[b];if(c){const d=c['element'],f=d['querySelector']('.paragraph-popup'),g=c['colorIndex']!==undefined?c['colorIndex']:currentColorIndex,h=(g+0x1)%COLOR_CLASSES['length'];COLOR_CLASSES['forEach'](k=>{d['classList']['remove'](k);if(f)f['classList']['remove'](k);});const i=d['classList']['contains']('transparent'),j=i?'transparent\x20'+COLOR_CLASSES[h]:COLOR_CLASSES[h];d['className']=d['className']['split']('\x20')['filter'](k=>!COLOR_CLASSES['includes'](k)&&k!=='transparent')['join']('\x20')+'\x20'+j,f&&(f['className']=f['className']['split']('\x20')['filter'](k=>!COLOR_CLASSES['includes'](k))['join']('\x20')+'\x20'+COLOR_CLASSES[h]),c['colorIndex']=h;}}),currentColorIndex=(currentColorIndex+0x1)%COLOR_CLASSES['length'],showStatusMessage('Â∑≤ÂàáÊèõÂà∞‰∏ã‰∏ÄÂÄãÈ°èËâ≤','success');}function createGroupNodeElement(b,c,d='Áæ§ÁµÑÁØÄÈªû'){const f=document['createElement']('div');return f['className']='node\x20group-node',f['style']['left']=b+'px',f['style']['top']=c+'px',f['innerHTML']='\x0a\x20\x20\x20\x20<div\x20class=\x22node-header\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22input-port\x22\x20data-type=\x22input\x22></div>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22collapse-btn\x22>-</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22jump-to-btn\x20hidden\x22\x20title=\x22Ë∑≥ËΩâÂà∞ÂêåÂêçÁØÄÈªû\x22></button>\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22node-title\x22\x20value=\x22'+d+'\x22>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-node-btn\x22>√ó</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22ungroup-btn\x22>Ëß£Êï£</button>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22output-port\x20header-port\x22\x20data-type=\x22output\x22\x20style=\x22display:none\x22></div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<div\x20class=\x22collapsible\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22group-node-info\x22>ÂåÖÂê´\x200\x20ÂÄãÁØÄÈªû</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22items\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22item-text\x22\x20value=\x22\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-node-btn\x22>+</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22output-port\x22\x20data-type=\x22output\x22\x20data-output-index=\x220\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20',nodesContainer['appendChild'](f),f;}function initializeGroupNodeData(b,c,d,f=[]){const g={'element':b,'id':nodes['length'],'outputs':[0x0],'x':c,'y':d,'jumpIndex':0x0,'isGroupNode':!![],'containedNodes':f,'originalConnections':[],'incomingConnections':[],'outgoingConnections':[]};f['forEach'](i=>{const j=nodes[i];if(j){const k={'nodeId':j['id'],'incoming':[],'outgoing':[]};connections['forEach'](l=>{l['toNode']===j['id']&&k['incoming']['push']({'fromNode':l['fromNode'],'fromOutput':l['fromOutput'],'toNode':l['toNode']});}),connections['forEach'](l=>{l['fromNode']===j['id']&&k['outgoing']['push']({'fromNode':l['fromNode'],'fromOutput':l['fromOutput'],'toNode':l['toNode']});}),g['originalConnections']['push'](k);}}),nodes['push'](g),updateGroupNodeInfo(g);const h=b['querySelector']('.jump-to-btn');return h['addEventListener']('click',i=>{jumpToSameNameNode(g),i['stopPropagation']();}),g;}function updateGroupNodeInfo(b){const c=b['element']['querySelector']('.group-node-info');c&&(c['textContent']='ÂåÖÂê´\x20'+b['containedNodes']['length']+'\x20ÂÄãÁØÄÈªû');}function setupUngroupButton(b,c){const d=b['querySelector']('.ungroup-btn');if(!d)return;d['replaceWith'](d['cloneNode'](!![]));const f=b['querySelector']('.ungroup-btn');f['addEventListener']('click',g=>{ungroupNodes(c),g['stopPropagation']();});}function ungroupNodes(b){if(!b||!b['isGroupNode'])return;try{b['containedNodes']['forEach'](d=>{const f=nodes[d];f&&(f['element']['style']['display']='');}),connections=connections['filter'](d=>d['fromNode']!==b['id']&&d['toNode']!==b['id']),b['originalConnections']['forEach'](d=>{d['incoming']['forEach'](f=>{connections['push']({'fromNode':f['fromNode'],'fromOutput':f['fromOutput'],'toNode':d['nodeId']});}),d['outgoing']['forEach'](f=>{connections['push']({'fromNode':d['nodeId'],'fromOutput':f['fromOutput'],'toNode':f['toNode']});});});const c=nodes['findIndex'](d=>d['id']===b['id']);c!==-0x1&&(nodes['splice'](c,0x1),b['element']['remove']()),nodes['forEach']((d,f)=>{d['id']=f;}),connections['forEach'](d=>{if(d['fromNode']>b['id'])d['fromNode']--;if(d['toNode']>b['id'])d['toNode']--;}),drawConnections(),updateNodeList(),showStatusMessage('Áæ§ÁµÑÂ∑≤ÊàêÂäüËß£Êï£','success');}catch(d){showStatusMessage('Ëß£Êï£Áæ§ÁµÑÊôÇÁôºÁîüÈåØË™§','error');}}function createGroupNodeFromSelection(){if(selectedNodes['size']<0x2)return;const b=Array['from'](selectedNodes)['map'](n=>nodes[n])['filter'](n=>n&&!n['isGroupNode']);if(b['length']<0x2)return;let c=Infinity,d=Infinity,f=-Infinity,g=-Infinity;b['forEach'](n=>{const o=n['element']['getBoundingClientRect']();c=Math['min'](c,n['x']),d=Math['min'](d,n['y']),f=Math['max'](f,n['x']+o['width']/scale),g=Math['max'](g,n['y']+o['height']/scale);});const h=(c+f)/0x2,i=(d+g)/0x2,j=createGroupNodeElement(h,i),k=initializeGroupNodeData(j,h,i,b['map'](o=>o['id']));b['forEach'](n=>{n['element']['style']['display']='none';});const l=j['querySelector']('.items');l['innerHTML']='';const m=new Map();return b['forEach'](n=>{connections['forEach'](o=>{o['fromNode']===n['id']&&(!m['has'](o['fromOutput'])&&m['set'](o['fromOutput'],[]),m['get'](o['fromOutput'])['push']({'toNode':o['toNode'],'nodeTitle':nodes[o['toNode']]['element']['querySelector']('.node-title')['value']}));});}),m['forEach']((n,o)=>{const p=document['createElement']('div');p['className']='item';const q=n[0x0]['nodeTitle']||'Ëº∏Âá∫\x20'+(o+0x1);p['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22item-text\x22\x20value=\x22'+escapeHtml(q)+'\x22>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-node-btn\x22>+</button>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22output-port\x22\x20data-type=\x22output\x22\x20data-output-index=\x22'+o+'\x22></div>\x0a\x20\x20\x20\x20',l['appendChild'](p),setupAddNodeButton(p,k,o,container),setupOutputPort(p,k,o,container);}),processGroupNodeConnections(k,b),setupGroupNodeEvents(j,k),clearSelection(),k;}function processGroupNodeConnections(b,c){const d=new Set(c['map'](h=>h['id']));b['incomingConnections']=connections['filter'](h=>!d['has'](h['fromNode'])&&d['has'](h['toNode']))['map'](h=>({'fromNode':h['fromNode'],'fromOutput':h['fromOutput'],'toNode':h['toNode']})),b['outgoingConnections']=connections['filter'](h=>d['has'](h['fromNode'])&&!d['has'](h['toNode']))['map'](h=>({'fromNode':h['fromNode'],'fromOutput':h['fromOutput'],'toNode':h['toNode']})),connections=connections['filter'](h=>!d['has'](h['fromNode'])&&!d['has'](h['toNode']));const f=new Set();b['incomingConnections']['forEach'](h=>{f['add'](h['fromNode']),connections['push']({'fromNode':h['fromNode'],'fromOutput':h['fromOutput'],'toNode':b['id']});});const g=new Map();b['outgoingConnections']['forEach'](h=>{!g['has'](h['fromOutput'])&&g['set'](h['fromOutput'],[]),g['get'](h['fromOutput'])['push'](h['toNode']),connections['push']({'fromNode':b['id'],'fromOutput':h['fromOutput'],'toNode':h['toNode']});}),g['size']>0x0&&(b['outputs']=Array['from'](g['keys']()),updateGroupNodeItems(b)),drawConnections();}function updateGroupNodeItems(b){const c=b['element']['querySelector']('.items');c['innerHTML']='',b['outputs']['forEach']((d,f)=>{const g=document['createElement']('div');g['className']='item',g['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22item-text\x22\x20value=\x22Ëº∏Âá∫\x20'+(f+0x1)+'\x22>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-node-btn\x22>+</button>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22output-port\x22\x20data-type=\x22output\x22\x20data-output-index=\x22'+d+'\x22></div>\x0a\x20\x20\x20\x20',c['appendChild'](g),setupAddNodeButton(g,b,d,container),setupOutputPort(g,b,d,container);});}function expandNodeWidth(b){if(!b)return;hoveredNode&&hoveredNode!==b&&isNodeWidthExpanded&&restoreNodeWidthImmediately();nodeWidthTimeout&&(clearTimeout(nodeWidthTimeout),nodeWidthTimeout=null);const c=b['element'];if(!c['classList']['contains']('collapsed'))return;const d=c['querySelector']('.node-title');if(!d)return;originalNodeWidth=c['offsetWidth'];const f=d['value']||'Êú™ÂëΩÂêçÁØÄÈªû',g=document['createElement']('span');g['style']['font']=getComputedStyle(d)['font'],g['style']['visibility']='hidden',g['style']['position']='absolute',g['style']['whiteSpace']='nowrap',g['textContent']=f,document['body']['appendChild'](g);const h=g['offsetWidth'];document['body']['removeChild'](g);const i=h+EXTRA_WIDTH,j=Math['max'](originalNodeWidth,i);c['style']['width']=j+'px',c['style']['minWidth']=j+'px',hoveredNode=b,isNodeWidthExpanded=!![],c['classList']['add']('width-expanded');}function restoreNodeWidth(){if(!hoveredNode||!isNodeWidthExpanded)return;nodeWidthTimeout&&clearTimeout(nodeWidthTimeout),nodeWidthTimeout=setTimeout(()=>{restoreNodeWidthImmediately();},0x64);}function restoreNodeWidthImmediately(){if(!hoveredNode)return;const b=hoveredNode['element'];b['style']['width']='',b['style']['minWidth']='',b['classList']['remove']('width-expanded'),originalNodeWidth=null,isNodeWidthExpanded=![];}function deleteNodeWithChildren(b){if(!b)return;clearSelection(),b['element']['classList']['add']('selected'),selectedNodes['add'](b['id']);const c=document['getElementById']('exclude-duplicates-checkbox')?.['checked']||![],d=new Set(selectedNodes);function f(h){const i=connections['filter'](j=>j['fromNode']===h)['map'](j=>j['toNode']);i['forEach'](j=>{const k=nodes[j];if(k&&!selectedNodes['has'](j)){let l=![];if(c){const m=k['element']['querySelector']('.jump-to-btn');l=m&&getComputedStyle(m)['display']!=='none';}!l&&(k['element']['classList']['add']('selected'),selectedNodes['add'](j),f(j));}});}f(b['id']);let g=0x0;selectedNodes['forEach'](h=>{if(!d['has'](h))g++;}),deleteSelectedNodes(),nodeWidthTimeout&&(clearTimeout(nodeWidthTimeout),nodeWidthTimeout=null),showStatusMessage('Â∑≤Âà™Èô§ÁØÄÈªû„Äå'+b['element']['querySelector']('.node-title')['value']+'„ÄçÂèäÂÖ∂\x20'+g+'\x20ÂÄãÂ≠êÁØÄÈªû','success');}function setupGroupNodeEvents(b,c){setupNodeDrag(b,c),setupCollapseButton(b,c),setupDeleteButton(b,c),setupUngroupButton(b,c),setupTitleInput(b),setupPortEvents(b,c),setupNodeHoverEvents(b,c);}function createNode(b,c,d='ÁØÄÈªû',f='normal',g=null){if(f==='group'){const h=createGroupNodeElement(b,c,d),i=initializeGroupNodeData(h,b,c);return setupGroupNodeEvents(h,i),setupNodeHoverEvents(h,i),i;}else{const j=createNodeElement(b,c,d),k=initializeNodeData(j,b,c);if(g){const l=j['querySelector']('.paragraph-input');if(l){l['value']=g;const m=new Event('input',{'bubbles':!![]});l['dispatchEvent'](m),setTimeout(()=>{analyzeVariables(k);},0x32);}}return setupNodeDrag(j,k),setupCollapseButton(j,k),setupDeleteButton(j,k),setupTitleInput(j),setupParagraphInput(j,k),setupInitialAddButton(j,k),setupAddItemButton(j,k),setupHideChildrenButton(j,k),setupGenerateButton(j,k),setupPortEvents(j,k),updateNodePosition(k),setupVariableAnalysis(j,k),setupNodeHoverEvents(j,k),k;}}function setupNodeHoverEvents(b,c){const d=c['element'];d['addEventListener']('mouseenter',f=>{shiftPressed&&d['classList']['contains']('collapsed')&&expandNodeWidth(c);}),d['addEventListener']('mouseleave',f=>{!shiftPressed&&isNodeWidthExpanded&&hoveredNode===c&&restoreNodeWidth();}),d['addEventListener']('mousedown',f=>{f['button']===0x0&&shiftPressed&&isNodeWidthExpanded&&hoveredNode===c&&(f['preventDefault'](),f['stopPropagation'](),deleteNodeWithChildren(c),hoveredNode=null,isNodeWidthExpanded=![]);});}function setupCollapseButton(b,c){const d=b['querySelector']('.collapse-btn');d['addEventListener']('click',f=>{b['classList']['toggle']('collapsed');const g=b['querySelector']('.collapsible'),h=b['querySelectorAll']('.output-port:not(.header-port)'),i=b['querySelector']('.header-port');if(b['classList']['contains']('collapsed')){h['forEach'](j=>j['style']['display']='none');if(!i){const j=document['createElement']('div');j['className']='output-port\x20header-port',j['dataset']['type']='output',j['style']['display']='block',b['querySelector']('.node-header')['appendChild'](j);}else i['style']['display']='block';d['textContent']='+';}else{h['forEach'](k=>k['style']['display']='block');if(i)i['style']['display']='none';d['textContent']='-';}drawConnections(),f['stopPropagation']();});}function createNodeElement(b,c,d){const f=document['createElement']('div');return f['className']='node\x20'+COLOR_CLASSES[0x0],f['style']['left']=b+'px',f['style']['top']=c+'px',f['innerHTML']='\x0a<div\x20class=\x22node-header\x22>\x0a\x20\x20<div\x20class=\x22input-port\x22\x20data-type=\x22input\x22></div>\x0a\x20\x20<button\x20class=\x22collapse-btn\x22>-</button>\x0a\x20\x20<button\x20class=\x22jump-to-btn\x20hidden\x22\x20title=\x22Ë∑≥ËΩâÂà∞ÂêåÂêçÁØÄÈªû\x22></button>\x0a\x20\x20<input\x20type=\x22text\x22\x20class=\x22node-title\x22\x20value=\x22'+d+'\x22>\x0a\x20\x20<button\x20class=\x22delete-node-btn\x22>√ó</button>\x0a\x20\x20<div\x20class=\x22output-port\x20header-port\x22\x20data-type=\x22output\x22\x20style=\x22display:none\x22></div>\x0a</div>\x0a\x20\x20\x20\x20<div\x20class=\x22collapsible\x22>\x0a\x20\x20\x20\x20\x20\x20<textarea\x20class=\x22paragraph-input\x22\x20placeholder=\x22Ë≤º‰∏äÊÆµËêΩÂÖßÂÆπ...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22items\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22drag-handle\x22>‚ò∞</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22item-text\x22\x20value=\x22\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-node-btn\x22>+</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22output-port\x22\x20data-type=\x22output\x22\x20data-output-index=\x220\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22buttons-container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-item-btn\x22>Êñ∞Âä†È†ÖÁõÆ</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22hide-children-btn\x22>Èö±ËóèÂ≠ê</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22generate-btn\x22>‰∏ÄÊ¨°ÁîüÊàê</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<!--\x20ËÆäÊï∏ÂàÜÊûêÂÆπÂô®\x20-->\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22variable-analysis-container\x22>\x0a\x20\x20<div\x20class=\x22variable-analysis-container\x22>\x0a\x20\x20\x20\x20<div\x20class=\x22variable-analysis-header\x22>\x0a\x20\x20\x20\x20\x20\x20<span\x20class=\x22variable-analysis-title\x22>ËÆäÊï∏ÂàÜÊûê</span>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22toggle-variable-analysis-btn\x22>‚àí</button>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<div\x20class=\x22variable-analysis-content\x22\x20style=\x22display:block\x22></div>\x0a\x20\x20</div>\x0a</div>\x0a\x20\x20',nodesContainer['appendChild'](f),f;}function setupVariableAnalysis(b,c){const d=b['querySelector']('.variable-analysis-header'),f=b['querySelector']('.toggle-variable-analysis-btn'),g=b['querySelector']('.variable-analysis-content');d['addEventListener']('click',h=>{!h['target']['classList']['contains']('toggle-variable-analysis-btn')&&toggleAnalysis(g,f);}),f['addEventListener']('click',h=>{h['stopPropagation'](),toggleAnalysis(g,f);}),g['style']['display']='block',f['textContent']='‚àí';}function toggleAnalysis(b,c){b['style']['display']==='none'?(b['style']['display']='block',c['textContent']='‚àí'):(b['style']['display']='none',c['textContent']='+');}function setupItemDragAndDrop(b,c){const d=b['querySelector']('.items');d['querySelectorAll']('.drag-handle')['forEach'](f=>{f['addEventListener']('mousedown',g=>{if(g['button']!==0x0)return;const h=g['target']['closest']('.item');if(!h)return;g['preventDefault'](),c['element']['querySelectorAll']('.output-port')['forEach'](n=>{!n['dataset']['originalIndex']&&(n['dataset']['originalIndex']=n['dataset']['outputIndex']||Array['from'](d['children'])['indexOf'](n['closest']('.item')));});const i=Array['from'](d['children']),j=i['indexOf'](h),k={'startX':g['clientX'],'startY':g['clientY'],'item':h,'originalIndex':j,'currentIndex':j,'placeholder':createPlaceholder(h),'isDragging':![]};function l(n){if(!k['isDragging']){const r=n['clientX']-k['startX'],s=n['clientY']-k['startY'];if(Math['sqrt'](r*r+s*s)<0x5)return;k['isDragging']=!![],h['classList']['add']('dragging'),h['style']['position']='absolute',h['style']['zIndex']='1000',h['style']['opacity']='0.8',d['insertBefore'](k['placeholder'],h);}h['style']['left']=n['clientX']-k['startX']+'px',h['style']['top']=n['clientY']-k['startY']+'px';const o=Array['from'](d['children'])['filter'](t=>t!==k['placeholder']),p=h['getBoundingClientRect'](),q=p['top']+p['height']/0x2;for(let t=0x0;t<o['length'];t++){const u=o[t];if(u===h)continue;const v=u['getBoundingClientRect'](),w=v['top']+v['height']/0x2;if(Math['abs'](q-w)<v['height']/0x2){const x=t;x!==k['currentIndex']&&(d['insertBefore'](k['placeholder'],x>k['currentIndex']?o[x]['nextSibling']:o[x]),k['currentIndex']=x);break;}}}function m(){document['removeEventListener']('mousemove',l),document['removeEventListener']('mouseup',m),k['isDragging']&&(d['insertBefore'](h,k['placeholder']),h['classList']['remove']('dragging'),h['style']['position']='',h['style']['left']='',h['style']['top']='',h['style']['zIndex']='',h['style']['opacity']='',k['originalIndex']!==k['currentIndex']&&(updateConnectionsAfterDrag(c,k['originalIndex'],k['currentIndex']),drawConnections(),updateNodePosition(c),updateNodeList())),k['placeholder']['remove']();}document['addEventListener']('mousemove',l),document['addEventListener']('mouseup',m);});});}function updateConnectionsAfterDrag(b,c,d){const f=Array['from'](b['element']['querySelectorAll']('.item')),g={};f['forEach']((h,i)=>{const j=h['querySelector']('.output-port'),k=parseInt(j['dataset']['originalIndex']);g[k]=i,j['dataset']['outputIndex']=i,j['dataset']['originalIndex']=i;}),b['outputs']=Array(f['length'])['fill'](0x0),connections['forEach'](h=>{h['fromNode']===b['id']&&g[h['fromOutput']]!==undefined&&(h['fromOutput']=g[h['fromOutput']]);}),drawConnections();}function createPlaceholder(b){const c=document['createElement']('div');return c['className']='item-placeholder',c['style']['height']=b['offsetHeight']+'px',c['style']['margin']='5px\x200',c['style']['background']='rgba(0,0,0,0.1)',c['style']['borderRadius']='4px',c;}function createPlaceholder(b){const c=document['createElement']('div');return c['className']='item-placeholder',c['style']['height']=b['offsetHeight']+'px',c['style']['margin']='5px\x200',c['style']['background']='rgba(0,0,0,0.1)',c['style']['borderRadius']='4px',c;}function setupCollapseButton(b,c){const d=b['querySelector']('.collapse-btn');d['addEventListener']('click',f=>{b['classList']['toggle']('collapsed');const g=b['querySelector']('.collapsible'),h=b['querySelectorAll']('.output-port:not(.header-port)'),i=b['querySelector']('.header-port');if(b['classList']['contains']('collapsed')){h['forEach'](j=>j['style']['display']='none');if(!i){const j=document['createElement']('div');j['className']='output-port\x20header-port',j['dataset']['type']='output',j['style']['display']='block',b['querySelector']('.node-header')['appendChild'](j);}else i['style']['display']='block';d['textContent']='+';}else{h['forEach'](k=>k['style']['display']='block');if(i)i['style']['display']='none';d['textContent']='-';}drawConnections(),f['stopPropagation']();});}function setupHideChildrenButton(b,c){const d=b['querySelector']('.hide-children-btn');c['childStates']=new Map(),d['addEventListener']('click',f=>{const g=connections['filter'](h=>h['fromNode']===c['id'])['map'](h=>nodes[h['toNode']]);if(!b['classList']['contains']('children-hidden'))b['classList']['add']('children-hidden'),d['textContent']='È°ØÁ§∫Â≠ê',g['forEach']((h,j)=>{c['childStates']['set'](h['id'],{'x':h['x'],'y':h['y'],'collapsed':h['element']['classList']['contains']('collapsed')});!h['element']['classList']['contains']('collapsed')&&h['element']['querySelector']('.collapse-btn')['click']();let k=0x26,l=c['y']+j*k/scale,m=0x64;j===0x0?l+=m/scale:l=c['y']+m/scale+j*k/scale,h['x']=c['x']+0xd2/scale,h['y']=l,updateNodePosition(h);});else{b['classList']['remove']('children-hidden'),d['textContent']='Èö±ËóèÂ≠ê';const h=g['map'](k=>({'node':k,'originalState':c['childStates']['get'](k['id'])}))['filter'](k=>k['originalState'])['sort']((k,l)=>k['originalState']['y']-l['originalState']['y']);let j=![];for(let k=0x1;k<h['length'];k++){const l=h[k-0x1],m=h[k],n=l['node']['element']['getBoundingClientRect']()['height']/scale,o=l['originalState']['y']+n;if(m['originalState']['y']<o){j=!![];break;}}if(j){let p=h[0x0]?.['originalState']['y']||c['y'];h['forEach'](({node:q,originalState:r})=>{q['x']=r['x'],q['y']=p,updateNodePosition(q);const s=q['element']['classList']['contains']('collapsed');s!==r['collapsed']&&q['element']['querySelector']('.collapse-btn')['click']();const t=q['element']['getBoundingClientRect']()['height']/scale;p+=t+0xa/scale;});}else h['forEach'](({node:q,originalState:r})=>{q['x']=r['x'],q['y']=r['y'],updateNodePosition(q);const s=q['element']['classList']['contains']('collapsed');s!==r['collapsed']&&q['element']['querySelector']('.collapse-btn')['click']();});c['childStates']['clear']();}drawConnections(),f['stopPropagation']();});}function updateJumpButton(b){const c=b['element']['querySelector']('.node-title')['value'],d=b['element']['querySelector']('.jump-to-btn'),f=nodes['filter'](g=>g['id']!==b['id']&&g['element']['querySelector']('.node-title')['value']===c);f['length']>0x0?(d['classList']['remove']('hidden'),d['setAttribute']('data-count',f['length']),d['title']='È°ØÁ§∫ÂêåÂêçÁØÄÈªû\x20(ÂÖ±\x20'+f['length']+'\x20ÂÄã)'):(d['classList']['add']('hidden'),d['removeAttribute']('data-count'));}function jumpToSameNameNode(b){const c=b['element']['querySelector']('.node-title')['value'],d=nodes['filter'](f=>f['id']!==b['id']&&f['element']['querySelector']('.node-title')['value']===c);d['length']>0x0&&(document['querySelectorAll']('.node')['forEach'](f=>{f['classList']['remove']('highlight');}),d['forEach'](f=>{f['element']['classList']['add']('highlight');}),showJumpHint(b,b['jumpIndex']+0x1,d['length']),b['jumpIndex']=(b['jumpIndex']+0x1)%d['length'],setTimeout(()=>{d['forEach'](f=>{f['element']['classList']['remove']('highlight');});},0x2710));}function showJumpHint(b,c,d){const f=document['createElement']('div');f['className']='jump-hint',f['textContent']=c+'/'+d,f['style']['position']='absolute',f['style']['left']='20px',f['style']['top']='20px',f['style']['background']='rgba(255,\x20204,\x200,\x200.8)',f['style']['color']='black',f['style']['padding']='5px\x2010px',f['style']['borderRadius']='10px',f['style']['zIndex']='10000',document['body']['appendChild'](f),setTimeout(()=>{f['style']['opacity']='0',f['style']['transition']='opacity\x200.5s',setTimeout(()=>f['remove'](),0x1f4);},0x3e8);}function initializeNodeData(b,c,d){const f={'element':b,'id':nodes['length'],'outputs':[0x0],'x':c,'y':d,'jumpIndex':0x0,'colorIndex':0x0};nodes['push'](f);const g=b['querySelector']('.jump-to-btn');return g['addEventListener']('click',h=>{jumpToSameNameNode(f),h['stopPropagation']();}),setTimeout(()=>{cleanupExistingItems(f);},0x64),f;}function setupNodeDrag(b,c){b['addEventListener']('mousedown',d=>{if(shiftPressed&&isNodeWidthExpanded&&hoveredNode===c)return;if(d['target']['className']['includes']('node')||d['target']['className']==='node-title'){if(spacePressed||d['button']===0x1)return;draggingNode=c,dragStartWorldX=toWorldX(d['clientX']),dragStartWorldY=toWorldY(d['clientY']),dragOffsetX=dragStartWorldX-c['x'],dragOffsetY=dragStartWorldY-c['y'],d['stopPropagation']();}});}document['addEventListener']('mousemove',b=>{if(shiftPressed&&isNodeWidthExpanded&&hoveredNode){const c=b['target'],d=c['closest']('.node');if(!d||d!==hoveredNode['element']){if(d&&d['classList']['contains']('collapsed')){const f=nodes['find'](g=>g['element']===d);f&&(restoreNodeWidthImmediately(),expandNodeWidth(f));}else{}}}});function addWidthExpansionStyles(){const b=document['createElement']('style');b['textContent']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20.node.width-expanded\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x200\x202px\x20#4a90e2\x20!important;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20width\x200.2s\x20ease;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x20100;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20.node.width-expanded\x20.node-title\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(74,\x20144,\x20226,\x200.1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20.node.width-expanded:hover\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20',document['head']['appendChild'](b);}function setupDeleteButton(b,c){b['querySelector']('.delete-node-btn')['addEventListener']('click',d=>{connections=connections['filter'](f=>f['fromNode']!==c['id']&&f['toNode']!==c['id']),nodes=nodes['filter'](f=>f['id']!==c['id']),nodes['forEach']((f,g)=>{f['id']=g;}),connections['forEach'](f=>{if(f['fromNode']>c['id'])f['fromNode']--;if(f['toNode']>c['id'])f['toNode']--;}),b['remove'](),drawConnections(),d['stopPropagation']();});}function setupTitleInput(b){const c=b['querySelector']('.node-title');c['addEventListener']('blur',()=>{c['value']=c['value']['trim'](),handleTitleChange(b,c);}),c['addEventListener']('input',f=>{const g=['A','Q','R','G'];if(g['includes'](f['data'])&&!f['ctrlKey']&&!f['metaKey']&&!f['altKey']&&!f['shiftKey'])return;handleTitleChange(b,c);}),c['addEventListener']('keydown',f=>{f['key']==='Enter'&&(c['blur'](),f['preventDefault']());const g=['a','q','r','g','A','Q','R','G'];g['includes'](f['key'])&&!f['ctrlKey']&&!f['metaKey']&&!f['altKey']&&!f['shiftKey']&&f['stopPropagation']();}),c['addEventListener']('click',f=>{f['stopPropagation']();});const d=findNodeByElement(b);return d&&updateJumpButton(d),d;}function handleTitleChange(b,c){const d=findNodeByElement(b),f=c['value']['trim'](),g=['A','Q','R','G'];if(g['includes'](f))return;if(d){d['language']=currentLanguage;const h=nodes['filter'](i=>i['id']!==d['id']&&i['element']['querySelector']('.node-title')['value']===c['value']);if(h['length']>0x0&&!nodeDescriptions[d['id']]){const i=h[0x0];nodeDescriptions[i['id']]&&(nodeDescriptions[d['id']]=nodeDescriptions[i['id']],updateNodeList());}}}function syncDescriptionsForSameNameNodes(b){const c=nodes[b];if(!c)return;const d=c['element']['querySelector']('.node-title')?.['value']||'Êú™ÂëΩÂêçÁØÄÈªû',f=nodeDescriptions[b];f&&f['trim']()!==''&&nodes['forEach'](g=>{if(g['id']!==b){const h=g['element']['querySelector']('.node-title')?.['value']||'Êú™ÂëΩÂêçÁØÄÈªû';h===d&&(nodeDescriptions[g['id']]=f);}});}function updateSameNameHighlights(){document['querySelectorAll']('.node')['forEach'](c=>{c['classList']['remove']('highlight-same-name');});const b={};nodes['forEach'](c=>{const d=c['element']['querySelector']('.node-title')['value'];!b[d]&&(b[d]=[]),b[d]['push'](c);}),Object['entries'](b)['forEach'](([c,d])=>{d['length']>0x1&&d['forEach'](f=>{f['element']['classList']['add']('highlight-same-name');});});}function setupParagraphInput(b,c){const d=b['querySelector']('.paragraph-input');d['addEventListener']('input',function(){handleParagraphInput(this,b,c),this['value']['trim']()&&analyzeVariables(c);});}function handleParagraphInput(b,c,d){const f=b['value']['trim']();if(f==='')return;const g=extractFunctionName(f);g&&(c['querySelector']('.node-title')['value']=g);const h=extractCalledFunctionsEnhanced(f,g);h['length']>0x0&&createFunctionItems(d,h,container),setupParagraphPopup(b,f,d),analyzeVariables(d),setTimeout(()=>{cleanupExistingItems(d);},0x96);}function extractCalledFunctionsEnhanced(b,c){const d=new Set();if(currentLanguage==='python'){const f=[/\b([a-zA-Z_][0-9a-zA-Z_]*)\s*\([^)]*\)/g,/\b([a-zA-Z_][0-9a-zA-Z_]*)\.([a-zA-Z_][0-9a-zA-Z_]*)\s*\(/g,/from\s+([a-zA-Z_][0-9a-zA-Z_]*)\s+import/g,/import\s+([a-zA-Z_][0-9a-zA-Z_]*)/g];f['forEach'](g=>{let h;while((h=g['exec'](b))!==null){let i=h[0x1];h[0x2]&&(i=h[0x2]),isValidFunctionName(i,c)&&d['add'](i);}});}else{const g=[/\b([a-zA-Z_$][0-9a-zA-Z_$]*)\s*\([^)]*\)/g,/\.addEventListener\s*\(\s*['"][^'"]*['"]\s*,\s*([a-zA-Z_$][0-9a-zA-Z_$]*)/g,/\b([a-zA-Z_$][0-9a-zA-Z_$]*)\.([a-zA-Z_$][0-9a-zA-Z_$]*)\s*\(/g,/\b(?:const|let|var)\s+([a-zA-Z_$][0-9a-zA-Z_$]*)\s*=\s*\([^)]*\)\s*=>/g,/\b(?:const|let|var)\s+([a-zA-Z_$][0-9a-zA-Z_$]*)\s*=\s*function/g,/,\s*([a-zA-Z_$][0-9a-zA-Z_$]*)\s*\)/g,/\.(?:click|on)\s*\(\s*([a-zA-Z_$][0-9a-zA-Z_$]*)/g,/(?:setTimeout|setInterval)\s*\(\s*([a-zA-Z_$][0-9a-zA-Z_$]*)/g,/([a-zA-Z_$][0-9a-zA-Z_$]*)\s*\(/g];g['forEach'](i=>{let j;while((j=i['exec'](b))!==null){let k=j[0x1];j[0x2]&&(k=j[0x2]),isValidFunctionName(k,c)&&d['add'](k);}});const h=['click','mousedown','mouseup','mousemove','touchstart','touchend','touchmove','wheel','keydown','keyup','submit','change'];h['forEach'](i=>{const j=new RegExp('\x5c.addEventListener\x5c(\x5cs*[\x27\x22]'+i+'[\x27\x22]\x5cs*,\x5cs*([a-zA-Z_$][0-9a-zA-Z_$]*)','g');let k;while((k=j['exec'](b))!==null){const l=k[0x1];isValidFunctionName(l,c)&&d['add'](l);}});}return Array['from'](d);}function isValidFunctionName(b,c){const d=['(e','e','event','evt','e1','e2'];if(d['includes'](b['trim']()))return![];const f=currentLanguage==='python'?PYTHON_FUNCTION_BLACKLIST['includes'](b):FUNCTION_BLACKLIST['includes'](b);if(f)return![];if(b===c)return![];if(b['length']<0x2||b['match'](/^[0-9]/)||isCommonBuiltin(b))return![];return!![];}function isCommonBuiltin(b){const c=['console','log','error','warn','info','debug','alert','prompt','confirm','parseInt','parseFloat','setTimeout','setInterval','clearTimeout','clearInterval','addEventListener','removeEventListener','dispatchEvent','querySelector','querySelectorAll','getElementById','getElementsByClassName','createElement','appendChild','removeChild','preventDefault','stopPropagation','stopImmediatePropagation','add','remove','toggle','contains','forEach','map','filter','reduce','find','some','every','includes','indexOf','toString','valueOf','hasOwnProperty','JSON','Math','Object','Array','String','Number','Boolean','Date','RegExp','Function','Promise','Symbol','Set','Map','window','document','navigator','location','history','localStorage','sessionStorage','XMLHttpRequest','fetch'];return c['includes'](b)||b['startsWith']('on')||b['startsWith']('$')||b==='undefined'||b==='null'||b==='true'||b==='false';}function setupInitialAddButton(b,c){b['querySelector']('.add-node-btn')['addEventListener']('click',d=>{const f=d['target']['closest']('.item'),g=f?f['querySelector']('.item-text')['value']:'',h=g['trim'](),i=connections['filter'](n=>n['fromNode']===c['id']&&n['fromOutput']===0x0)['length'],j=c['x']+0xc8/scale,k=c['y']+i*0x78/scale;let l=null;h&&loadedHtmlFunctions[h]&&(l=loadedHtmlFunctions[h]['code']);const m=createNode(j,k,h||'Êñ∞ÁØÄÈªû','normal',l);if(l)showStatusMessage('Â∑≤Ëá™ÂãïÂ°´ÂÖ•ÂáΩÊï∏\x20\x22'+h+'\x22\x20ÁöÑÂÖßÂÆπ','success');else h&&showStatusMessage('ÂâµÂª∫ÁØÄÈªû\x20\x22'+h+'\x22Ôºå‰ΩÜÊú™ÊâæÂà∞Â∞çÊáâÂáΩÊï∏ÂÖßÂÆπ','warning');connections['push']({'fromNode':c['id'],'fromOutput':0x0,'toNode':m['id']}),drawConnections(),d['stopPropagation']();});}function setupAddItemButton(b,c){b['querySelector']('.add-item-btn')['addEventListener']('click',()=>{addNewItem(b,c);});}function setupGenerateButton(b,c){const d=b['querySelector']('.generate-btn');if(!d)return;const f=d['cloneNode'](!![]);d['parentNode']['replaceChild'](f,d),f['addEventListener']('click',function(g){const h=b['querySelectorAll']('.item');if(h['length']===0x0){showStatusMessage('Ê≤íÊúâÈ†ÖÁõÆÂèØÁîüÊàê','warning');return;}const i=c['x']+0xc8/scale;let j=c['y'],k=0x0,l=0x0;const m=[],n=[];h['forEach']((p,q)=>{const r=p['querySelector']('.item-text')['value'],s=r['trim']();if(!s)return;const t=Math['floor'](q/0x4),u=q%0x4,v=i+t*0xfa/scale,w=j+u*0x78/scale;let x=null,y=s;if(loadedHtmlFunctions[s])x=loadedHtmlFunctions[s]['code'];else{const A=s['toLowerCase']();for(const B in loadedHtmlFunctions){if(B['toLowerCase']()===A){x=loadedHtmlFunctions[B]['code'],y=B;break;}}}!x?(l++,m['push'](s)):k++;const z=createNodeWithContent(v,w,s,x);n['push'](z),connections['push']({'fromNode':c['id'],'fromOutput':q,'toNode':z['id']});}),setTimeout(()=>{let p=0x0;n['forEach'](q=>{const r=q['element']['querySelector']('.items'),s=r['querySelectorAll']('.item')['length'];s>0x0&&p++;});},0x320),drawConnections();let o='ÊâπÈáèÁîüÊàêÂÆåÊàê:\x20ÂâµÂª∫\x20'+h['length']+'\x20ÂÄãÁØÄÈªû';k>0x0&&(o+=',\x20'+k+'\x20ÂÄãÂ∑≤Â°´ÂÖÖÂÖßÂÆπ„ÄÅÂâµÂª∫È†ÖÁõÆ‰∏¶ËΩâÊèõÁÇ∫ÊåâÈàï'),l>0x0&&(o+=',\x20'+l+'\x20ÂÄãÊú™ÊâæÂà∞ÂÖßÂÆπ'),showStatusMessage(o,k>0x0?'success':'warning'),g['stopPropagation']();});}function createNodeWithContent(b,c,d,f){const g=createNodeElement(b,c,d),h=initializeNodeData(g,b,c);if(f){const i=g['querySelector']('.paragraph-input');if(i){i['value']=f;const j=new Event('input',{'bubbles':!![]});i['dispatchEvent'](j),setTimeout(()=>{analyzeAndCreateItems(h,f),convertToParagraphButton(h),analyzeVariables(h);},0xc8);}}return setupNodeDrag(g,h),setupCollapseButton(g,h),setupDeleteButton(g,h),setupTitleInput(g),setupParagraphInput(g,h),setupInitialAddButton(g,h),setupAddItemButton(g,h),setupHideChildrenButton(g,h),setupGenerateButton(g,h),setupPortEvents(g,h),updateNodePosition(h),setupVariableAnalysis(g,h),h;}function analyzeAndCreateItems(b,c){const d=extractFunctionName(c),f=extractCalledFunctions(c,d);if(f['length']>0x0){const g=b['element']['querySelector']('.items');g['innerHTML']='',b['outputs']=[],f['forEach']((h,i)=>{const j=document['createElement']('div');j['className']='item',j['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22drag-handle\x22>‚ò∞</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22item-text\x22\x20value=\x22'+escapeHtml(h)+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-node-btn\x22>+</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22output-port\x22\x20data-type=\x22output\x22\x20data-output-index=\x22'+i+'\x22></div>\x0a\x20\x20\x20\x20\x20\x20',g['appendChild'](j),b['outputs']['push'](i),setupAddNodeButton(j,b,i,container),setupOutputPort(j,b,i,container),setupItemDragAndDrop(b['element'],b);});}else{}}function convertToParagraphButton(b){const c=b['element'],d=c['querySelector']('.paragraph-input');if(!d||d['style']['display']==='none')return;const f=d['value']['trim']();if(!f)return;const g=document['createElement']('button');g['className']='paragraph-btn',g['textContent']=f['length']>0x32?f['substring'](0x0,0x2f)+'...':f,g['dataset']['originalContent']=f;const h=document['createElement']('div');h['className']='paragraph-popup',h['textContent']=f;const i=getCurrentColorClass(b);h['classList']['add'](i);const j=document['createElement']('div');j['style']['position']='relative',j['style']['display']='inline-block',j['style']['width']='100%';const k=d['cloneNode'](!![]);k['style']['display']='none',j['appendChild'](k),j['appendChild'](g),j['appendChild'](h),d['replaceWith'](j),setupParagraphButtonEvents(g,h,k,b);}function rebindAllGenerateButtons(){nodes['forEach'](b=>{if(!b['isFrame']&&!b['isGroupNode']){const c=b['element']['querySelector']('.generate-btn');c&&setupGenerateButton(b['element'],b);}});}setTimeout(rebindAllGenerateButtons,0xbb8);function addNewItem(b,c){const d=b['querySelector']('.items'),f=d['children']['length'],g=document['createElement']('div');return g['className']='item',g['innerHTML']='\x0a\x20\x20\x20\x20<span\x20class=\x22drag-handle\x22>‚ò∞</span>\x0a\x20\x20\x20\x20<input\x20type=\x22text\x22\x20class=\x22item-text\x22\x20value=\x22\x22>\x0a\x20\x20\x20\x20<button\x20class=\x22add-node-btn\x22>+</button>\x0a\x20\x20\x20\x20<div\x20class=\x22output-port\x22\x20data-type=\x22output\x22\x20data-output-index=\x22'+f+'\x22></div>\x0a\x20\x20',d['appendChild'](g),g['querySelector']('.add-node-btn')['addEventListener']('click',h=>{handleAddNodeClick(c,f,h);}),setupItemDragAndDrop(b,c),c['outputs']['push'](0x0),setupOutputPort(g,c,f),g;}function handleAddNodeClick(b,c,d){const f=d['target']['closest']('.item'),g=f?f['querySelector']('.item-text')['value']:'',h=g['trim'](),i=connections['filter'](n=>n['fromNode']===b['id']&&n['fromOutput']===c)['length'],j=b['x']+0xc8/scale,k=b['y']+i*0x78/scale;let l=null;h&&loadedHtmlFunctions[h]&&(l=loadedHtmlFunctions[h]['code']);const m=createNode(j,k,h,'normal',l);if(l)showStatusMessage('Â∑≤Ëá™ÂãïÂ°´ÂÖ•ÂáΩÊï∏\x20\x22'+h+'\x22\x20ÁöÑÂÖßÂÆπ','success');else h&&showStatusMessage('ÂâµÂª∫ÁØÄÈªû\x20\x22'+h+'\x22Ôºå‰ΩÜÊú™ÊâæÂà∞Â∞çÊáâÂáΩÊï∏ÂÖßÂÆπ','warning');connections['push']({'fromNode':b['id'],'fromOutput':c,'toNode':m['id']}),drawConnections(),d['stopPropagation']();}function setupPortEvents(b,c){b['querySelector']('.input-port')['addEventListener']('mouseup',d=>{connecting&&(connections['push']({'fromNode':connecting['fromNode'],'fromOutput':connecting['fromOutput'],'toNode':c['id']}),connecting=null,container['classList']['remove']('connecting'),drawConnections());}),setupOutputPort(b['querySelector']('.output-port'),c,0x0);}function setupOutputPort(b,c,d){b['addEventListener']('mousedown',f=>{if(spacePressed||f['button']===0x1)return;const g=b['style']['display']!=='none'?b:c['element']['querySelector']('.header-port:nth-child('+(d+0x4)+')'),h=g['getBoundingClientRect']();connecting={'startX':h['left']+h['width']/0x2,'startY':h['top']+h['height']/0x2,'fromNode':c['id'],'fromOutput':d,'currentX':h['left']+h['width']/0x2,'currentY':h['top']+h['height']/0x2},container['classList']['add']('connecting'),f['stopPropagation']();});}function updateNodePosition(b){b['element']['style']['left']=b['x']+'px',b['element']['style']['top']=b['y']+'px',b['element']['style']['transform']='none';}function updatePopupScroll(){activePopup&&(activePopup['scrollTop']=popupScrollPosition);}function createSelectionBox(){return selectionBox=document['createElement']('div'),selectionBox['className']='selection-box',selectionBox['style']['display']='none',document['body']['appendChild'](selectionBox),selectionBox;}function updateSelectionBox(b,c,d,f){const g=Math['min'](b,d),h=Math['min'](c,f),i=Math['abs'](d-b),j=Math['abs'](f-c);selectionBox['style']['left']=g+'px',selectionBox['style']['top']=h+'px',selectionBox['style']['width']=i+'px',selectionBox['style']['height']=j+'px',selectionBox['style']['display']='block';}function clearSelection(){isNodeWidthExpanded&&hoveredNode&&restoreNodeWidthImmediately();clearAllTemporaryColors();const b=[];selectedNodes['forEach'](c=>{const d=nodes[c];d&&d['element']&&(d['element']['classList']['remove']('selected'),connections['forEach'](f=>{f['fromNode']===c&&f['colorClass']&&b['push'](f);}));}),b['forEach'](c=>{delete c['colorClass'];}),selectedNodes['clear'](),drawConnections();}document['addEventListener']('mousedown',b=>{if(b['target']['closest']('.node')&&!b['target']['closest']('.node-title')&&!b['target']['closest']('button')&&!b['target']['closest']('.paragraph-btn')&&!b['target']['closest']('.variable-btn')){const c=b['target']['closest']('.node'),d=findNodeByElement(c);d&&(shiftPressed?selectedNodes['has'](d['id'])?(d['element']['classList']['remove']('selected'),selectedNodes['delete'](d['id'])):(d['element']['classList']['add']('selected'),selectedNodes['add'](d['id'])):(clearSelection(),d['element']['classList']['add']('selected'),selectedNodes['add'](d['id'])),setTimeout(()=>{autoColorizeSelectedNode();},0xa)),b['stopPropagation']();}});function isNodeInSelection(b,c){if(b['type']==='frame-node')return![];const d=b['element']['getBoundingClientRect'](),f=container['getBoundingClientRect'](),g=d['left']-f['left'],h=d['right']-f['left'],i=d['top']-f['top'],j=d['bottom']-f['top'];return h>c['left']&&g<c['right']&&j>c['top']&&i<c['bottom'];}function selectNodesInBox(b,c){return!c&&clearSelection(),nodes['forEach'](d=>{isNodeInSelection(d,b)&&(d['type']!=='frame-node'&&(c?selectedNodes['has'](d['id'])?(d['element']['classList']['remove']('selected'),selectedNodes['delete'](d['id'])):(d['element']['classList']['add']('selected'),selectedNodes['add'](d['id'])):(d['element']['classList']['add']('selected'),selectedNodes['add'](d['id']))));}),setTimeout(()=>{autoColorizeSelectedNode();},0xa),selectedNodes['size']>0x0;}function selectNodeAndChildren(b,c=![]){const d=nodes[b];if(!d)return;let f=![];if(c){const h=d['element']['querySelector']('.jump-to-btn');f=h&&getComputedStyle(h)['display']!=='none';}!f&&!selectedNodes['has'](b)&&(d['element']['classList']['add']('selected'),selectedNodes['add'](b));const g=connections['filter'](i=>i['fromNode']===b)['map'](i=>i['toNode']);g['forEach'](i=>{selectNodeAndChildren(i,c);}),drawConnections();}function copySelectedNodesContent(){let b='';selectedNodes['forEach'](c=>{const d=nodes[c];if(d){const f=d['element']['querySelector']('.paragraph-popup'),g=d['element']['querySelector']('.paragraph-input');if(f)b+=f['textContent']+'\x0a\x0a';else g&&(b+=g['value']+'\x0a\x0a');}});if(b){const c=b['split']('\x0a')['filter'](d=>d['trim']()!=='')['length'];navigator['clipboard']['writeText'](b['trim']())['then'](()=>{showStatusMessage('Â∑≤Ë§áË£Ω\x20'+selectedNodes['size']+'\x20ÂÄãÁØÄÈªûÁöÑÂÖßÂÆπ\x20(ÂÖ±\x20'+c+'\x20Ë°å)','success');})['catch'](d=>{showStatusMessage('Ë§áË£ΩÂ§±Êïó','error');});}else showStatusMessage('Ê≤íÊúâÂèØË§áË£ΩÁöÑÂÖßÂÆπ','warning');}translateX=window['innerWidth']/0x2-0x64,translateY=window['innerHeight']/0x2-0x32,nodesContainer['style']['transform']='translate('+translateX+'px,\x20'+translateY+'px)\x20scale('+scale+')',container['addEventListener']('mousedown',b=>{if(b['button']===0x0&&!spacePressed&&!draggingNode){const c=b['target'],d=c['closest']('.node'),f=d?.['classList']['contains']('frame-node'),g=getNodesAtPoint(b['clientX'],b['clientY']);if(!d)isSelecting=!![],container['classList']['add']('selecting'),selectionStartX=b['clientX'],selectionStartY=b['clientY'],!selectionBox&&createSelectionBox(),updateSelectionBox(selectionStartX,selectionStartY,b['clientX'],b['clientY']),b['preventDefault']();else{if(f&&!c['closest']('.frame-header,\x20.frame-footer,\x20.resize-handle')){const h=g['find'](i=>!i['classList']['contains']('frame-node'));h?handleNodeSelection(b,h):(isSelecting=!![],container['classList']['add']('selecting'),selectionStartX=b['clientX'],selectionStartY=b['clientY'],!selectionBox&&createSelectionBox(),updateSelectionBox(selectionStartX,selectionStartY,b['clientX'],b['clientY']),b['preventDefault']());}else{if(selectedNodes['size']>0x0){const i=findNodeByElement(d);i&&selectedNodes['has'](i['id'])?(draggingNode=i,dragStartWorldX=toWorldX(b['clientX']),dragStartWorldY=toWorldY(b['clientY']),dragOffsetX=dragStartWorldX-i['x'],dragOffsetY=dragStartWorldY-i['y']):clearSelection();}else handleNodeSelection(b,d);}}}else(spacePressed||b['button']===0x1)&&(isPanning=!![],panStartX=b['clientX']-translateX,panStartY=b['clientY']-translateY,container['classList']['add']('panning'),b['preventDefault']());});function getNodesAtPoint(b,c){return Array['from'](document['querySelectorAll']('.node'))['filter'](d=>{const f=d['getBoundingClientRect']();return b>=f['left']&&b<=f['right']&&c>=f['top']&&c<=f['bottom'];})['sort']((d,f)=>{const g=parseInt(window['getComputedStyle'](d)['zIndex'])||0x0,h=parseInt(window['getComputedStyle'](f)['zIndex'])||0x0;return h-g;});}function handleNodeSelection(b,c){const d=findNodeByElement(c);if(!d)return;if(c['classList']['contains']('frame-node')&&b['target']['closest']('.frame-header,\x20.resize-handle')){draggingNode=d,dragStartWorldX=toWorldX(b['clientX']),dragStartWorldY=toWorldY(b['clientY']),dragOffsetX=dragStartWorldX-d['x'],dragOffsetY=dragStartWorldY-d['y'],b['stopPropagation']();return;}!c['classList']['contains']('frame-node')&&(!b['ctrlKey']&&clearSelection(),c['classList']['add']('selected'),selectedNodes['add'](d['id']),draggingNode=d,dragStartWorldX=toWorldX(b['clientX']),dragStartWorldY=toWorldY(b['clientY']),dragOffsetX=dragStartWorldX-d['x'],dragOffsetY=dragStartWorldY-d['y'],b['stopPropagation']());}document['addEventListener']('mouseup',b=>{draggingNode&&draggingNode['isFrame']&&delete draggingNode['containedNodes'];if(isSelecting){const c={'left':Math['min'](selectionStartX,b['clientX']),'right':Math['max'](selectionStartX,b['clientX']),'top':Math['min'](selectionStartY,b['clientY']),'bottom':Math['max'](selectionStartY,b['clientY'])};(c['right']-c['left']>0x5||c['bottom']-c['top']>0x5)&&(!shiftPressed&&clearSelection(),selectNodesInBox(c,shiftPressed)),isSelecting=![],container['classList']['remove']('selecting'),selectionBox&&(selectionBox['style']['display']='none');}draggingNode=null,connecting=null,isPanning=![],container['classList']['remove']('panning'),container['classList']['remove']('connecting'),drawConnections();}),document['addEventListener']('mousemove',b=>{if(isSelecting)updateSelectionBox(selectionStartX,selectionStartY,b['clientX'],b['clientY']);else{if(isPanning)translateX=b['clientX']-panStartX,translateY=b['clientY']-panStartY,applyTransform(),drawConnections();else{if(draggingNode){const c=toWorldX(b['clientX']),d=toWorldY(b['clientY']),f=c-dragStartWorldX,g=d-dragStartWorldY;selectedNodes['size']>0x0?selectedNodes['forEach'](h=>{const i=nodes[h];i&&(i['x']+=f,i['y']+=g,updateNodePosition(i));}):(draggingNode['x']=c-dragOffsetX,draggingNode['y']=d-dragOffsetY,updateNodePosition(draggingNode)),dragStartWorldX=c,dragStartWorldY=d,drawConnections();}else{if(draggingNode){const h=toWorldX(b['clientX']),i=toWorldY(b['clientY']),j=h-dragStartWorldX,k=i-dragStartWorldY;if(selectedNodes['size']>0x0){}else draggingNode['x']=h-dragOffsetX,draggingNode['y']=i-dragOffsetY,updateNodePosition(draggingNode),draggingNode['isFrame']&&draggingNode['containedNodes']&&draggingNode['containedNodes']['forEach'](({node:l,offsetX:m,offsetY:n})=>{l['x']=draggingNode['x']+m,l['y']=draggingNode['y']+n,updateNodePosition(l);});dragStartWorldX=h,dragStartWorldY=i,drawConnections();}else connecting&&(connecting['currentX']=b['clientX'],connecting['currentY']=b['clientY'],drawConnections());}}}});function disconnectNodeFromParent(b){const c=connections['filter'](d=>d['toNode']===b);if(c['length']===0x0){showStatusMessage('Ë©≤ÁØÄÈªûÊ≤íÊúâÁà∂ÁØÄÈªûÈÄ£Êé•','warning');return;}connections=connections['filter'](d=>d['toNode']!==b),drawConnections(),showStatusMessage('Â∑≤Êñ∑Èñã\x20'+c['length']+'\x20ÂÄãÁà∂ÁØÄÈªûÈÄ£Êé•','success');}const VERTICAL_SPACING=0xa;function multiColumnAlignNodes(){if(!selectedNodes||selectedNodes['size']<0x2)return;const b=0xa,c=0x1e;let d=findTopLeftNode(selectedNodes,nodes);if(!d)return;const f=groupNodesIntoColumns(d,selectedNodes,nodes);arrangeColumns(f,d,c,b,nodes),drawConnections(),showStatusMessage('Â∑≤Â∞á\x20'+selectedNodes['size']+'\x20ÂÄãÁØÄÈªûÈÄ≤Ë°åÂ§öÂàóÊéíÂàó','success');}function findTopLeftNode(b,c){let d=null,f=Infinity,g=Infinity;return b['forEach'](h=>{const i=c[h];(i['x']<f||i['x']===f&&i['y']<g)&&(f=i['x'],g=i['y'],d=i);}),d;}function groupNodesIntoColumns(b,c,d){const f=[[]],g=Array['from'](c)['map'](i=>d[i])['filter'](i=>i!==b);g['sort']((i,j)=>i['x']-j['x']),f[0x0]['push'](b);let h=0x0;return g['forEach']((i,j)=>{const k=f[h],l=k[0x0]['x']+k[0x0]['element']['offsetWidth']+0x1e;j>0x0&&i['x']>l&&(h++,f[h]=[]),f[h]['push'](i);}),f;}function arrangeColumns(b,c,d,f,g){const h=c['y'];let j=c['x']+c['element']['offsetWidth'];arrangeSingleColumn(b[0x0],h,f,c['x'],g);for(let k=0x1;k<b['length'];k++){const l=b[k],m=l[0x0]['x']-j>d*0x2,n=m?j+d*0x2:j+d;arrangeSingleColumn(l,h,f,n,g),j=n+getColumnWidth(l);}}function getColumnWidth(b){return Math['max'](...b['map'](c=>c['element']['offsetWidth']));}function arrangeSingleColumn(b,c,d,f,g){let h=c;b['sort']((i,j)=>i['y']-j['y']),b['forEach'](i=>{i['x']=f,i['y']=h,updateNodePosition(i),h+=i['element']['offsetHeight']+d;});}document['addEventListener']('keydown',b=>{const c=b['target']['tagName']==='INPUT'||b['target']['tagName']==='TEXTAREA'||b['target']['isContentEditable'];b['key']==='Delete'&&selectedNodes['size']>0x0&&(b['preventDefault'](),deleteSelectedNodes());b['key']['toLowerCase']()==='g'&&selectedNodes['size']>0x1&&(createGroupNodeFromSelection(),b['preventDefault']());b['key']['toLowerCase']()==='z'&&selectedNodes['size']>0x0&&!c&&(toggleNodeColors(),b['preventDefault']());b['key']['toLowerCase']()==='c'&&selectedNodes['size']>0x1&&!c&&(multiColumnAlignNodes(),b['preventDefault']());b['key']['toLowerCase']()==='v'&&selectedNodes['size']>0x1&&!c&&(collapseAndAlignSelectedNodes(),arrangeSelectedNodesVertically(),b['preventDefault']());(b['key']==='b'||b['key']==='B')&&(selectedNodes['size']>0x0&&arrangeSelectedNodesBalanced());if(b['key']['toLowerCase']()==='d'&&selectedNodes['size']===0x1&&!c){const f=selectedNodes['values']()['next']()['value'];disconnectNodeFromParent(f),b['preventDefault']();}b['key']['toLowerCase']()==='q'&&selectedNodes['size']>0x0&&(copySelectedNodesContent(),b['preventDefault']());b['code']==='Space'&&(spacePressed=!![],container['style']['cursor']='grab');b['key']==='Shift'&&(shiftPressed=!![]);if(b['key']['toLowerCase']()==='r'&&selectedNodes['size']===0x1){const g=Array['from'](selectedNodes)[0x0];clearAllTemporaryColors(),colorizeChildConnections(g,0x0),drawConnections(),showStatusMessage('Â∑≤ÈáçÊñ∞Ê®ôË®òÂ≠êÁØÄÈªûÈÄ£Êé•È°èËâ≤','success');}if(b['key']['toLowerCase']()==='a'&&selectedNodes['size']===0x1){const h=selectedNodes['values']()['next']()['value'],i=new Set(selectedNodes),j=document['getElementById']('exclude-duplicates-checkbox')['checked'];selectNodeAndChildren(h,j);let k=0x0;selectedNodes['forEach'](l=>{if(!i['has'](l))k++;}),showStatusMessage('Â∑≤ÈÅ∏Âèñ\x20'+k+'\x20ÂÄãÂ≠êÁØÄÈªû','success'),b['preventDefault']();}if(b['key']===']'&&selectedNodes['size']===0x1&&!c){const l=selectedNodes['values']()['next']()['value'];selectDirectChildrenOnly(l),b['preventDefault']();}if(b['key']==='['&&selectedNodes['size']===0x1&&!c){const m=selectedNodes['values']()['next']()['value'];selectDirectParentOnly(m),b['preventDefault']();}if(b['key']['toLowerCase']()==='e'&&!c){const n=window['innerWidth']/0x2,o=window['innerHeight']/0x2,p=toWorldX(n),q=toWorldY(o);createNode(p,q),b['preventDefault']();}if(!activePopup)return;const d=0x14;switch(b['key']['toLowerCase']()){case'w':popupScrollPosition=Math['max'](0x0,popupScrollPosition-d),updatePopupScroll(),b['preventDefault']();break;case's':const r=activePopup['scrollHeight']-activePopup['clientHeight'];popupScrollPosition=Math['min'](r,popupScrollPosition+d),updatePopupScroll(),b['preventDefault']();break;}});function selectDirectChildrenOnly(b){clearSelection();const c=connections['filter'](d=>d['fromNode']===b)['map'](d=>d['toNode']);c['forEach'](d=>{const f=nodes[d];f&&!selectedNodes['has'](d)&&(f['element']['classList']['add']('selected'),selectedNodes['add'](d));}),drawConnections(),showStatusMessage('Â∑≤ÈÅ∏Âèñ\x20'+c['length']+'\x20ÂÄãÁõ¥Êé•Â≠êÁØÄÈªû','success');}function selectDirectParentOnly(b){clearSelection();const c=connections['filter'](d=>d['toNode']===b)['map'](d=>d['fromNode']);c['forEach'](d=>{const f=nodes[d];f&&!selectedNodes['has'](d)&&(f['element']['classList']['add']('selected'),selectedNodes['add'](d));}),drawConnections(),showStatusMessage('Â∑≤ÈÅ∏Âèñ\x20'+c['length']+'\x20ÂÄãÁõ¥Êé•Áà∂ÁØÄÈªû','success');}function arrangeSelectedNodesBalanced(){if(selectedNodes['size']===0x0){showStatusMessage('Ë´ãÂÖàÈÅ∏ÊìáË¶ÅÊéíÂàóÁöÑÁØÄÈªû','warning');return;}const b=Array['from'](selectedNodes),c=b['map'](h=>nodes[h]),d=sortNodesByChildCountBalanced(c),f=findMostCommonXPosition(c),g=findTopmostYPosition(c);arrangeNodesInBalancedPattern(d,f,g),drawConnections(),showStatusMessage('Â∑≤Âπ≥Ë°°ÊéíÂàó\x20'+selectedNodes['size']+'\x20ÂÄãÁØÄÈªûÔºàÊúÄÂ§öÂ≠êÁØÄÈªûÂú®‰∏≠ÈñìÔºâ','success');}function sortNodesByChildCountBalanced(b){const c=b['sort']((g,h)=>{const j=getChildNodeCount(g['id']),k=getChildNodeCount(h['id']);return j-k;}),d=[],f=c['length'];for(let g=0x0;g<f;g++){g%0x2===0x0?d['push'](c['shift']()):d['push'](c['pop']());}return d;}function arrangeNodesInBalancedPattern(b,c,d){const f=0x32;if(b['length']===0x0)return;b['forEach']((g,h)=>{const i=d+h*f;g['y']=i,updateNodePosition(g);}),showBalancedArrangementInfo(b);}function findMostCommonXPosition(b){if(b['length']===0x0)return 0x0;return b[0x0]['x'];}function showBalancedArrangementInfo(b){const c=b['map']((j,k)=>{const l=j['element']['querySelector']('.node-title')['value'],m=getChildNodeCount(j['id']),n=k===0x0?'È†ÇÈÉ®':k===b['length']-0x1?'Â∫ïÈÉ®':k===Math['floor'](b['length']/0x2)?'‰∏≠Èñì':'ÂÖ∂‰ªñ';return{'title':l,'childCount':m,'position':n};}),d=c[0x0],f=c[c['length']-0x1],g=Math['floor'](c['length']/0x2),h=c[g];let i='ÊéíÂàóÂÆåÊàêÔºö';i+='È†ÇÈÉ®„Äå'+d['title']+'„Äç('+d['childCount']+'Â≠êÁØÄÈªû)\x20|\x20',i+='‰∏≠Èñì„Äå'+h['title']+'„Äç('+h['childCount']+'Â≠êÁØÄÈªû)\x20|\x20',i+='Â∫ïÈÉ®„Äå'+f['title']+'„Äç('+f['childCount']+'Â≠êÁØÄÈªû)',showStatusMessage(i,'info');}function deleteSelectedNodes(b=null){const c=b?b['map'](f=>nodes[f['nodeId']])['filter'](Boolean):Array['from'](selectedNodes)['map'](f=>nodes['find'](g=>g&&g['id']===f))['filter'](Boolean);b&&b['forEach'](f=>{f['title']&&deletedNodeNames['add'](f['title']);});c['forEach'](f=>{if(!f)return;connections=connections['filter'](i=>i['fromNode']!==f['id']&&i['toNode']!==f['id']);f['element']&&f['element']['parentNode']&&f['element']['remove']();f['popupContainer']&&f['popupContainer']['remove']();const g=f['element']?.['querySelector']('.paragraph-popup');g&&ALL_ACTIVE_POPUPS['delete'](g);const h=nodes['findIndex'](i=>i&&i['id']===f['id']);h!==-0x1&&nodes['splice'](h,0x1);}),reassignNodeIds(),selectedNodes['clear'](),drawConnections(),updateNodeList(),saveDeletedNodeNames();const d=b?b['length']:c['length'];showStatusMessage('Â∑≤Âà™Èô§\x20'+d+'\x20ÂÄãÁØÄÈªû','success');}function saveDeletedNodeNames(){try{const b=Array['from'](deletedNodeNames);sessionStorage['setItem']('deletedNodeNames',JSON['stringify'](b));}catch(c){}}function loadDeletedNodeNames(){try{const b=sessionStorage['getItem']('deletedNodeNames');if(b){const c=JSON['parse'](b);deletedNodeNames=new Set(c);}}catch(d){}}function reassignNodeIds(){nodes['forEach']((b,c)=>{if(b){const d=b['id'];b['id']=c,connections['forEach'](f=>{if(f['fromNode']===d)f['fromNode']=c;if(f['toNode']===d)f['toNode']=c;}),selectedNodes['has'](d)&&(selectedNodes['delete'](d),selectedNodes['add'](c));}});}function collapseAndAlignSelectedNodes(){if(selectedNodes['size']<0x2)return;const b=Array['from'](selectedNodes)['map'](c=>nodes[c])['filter'](c=>{if(!c||c['isFrame'])return![];const d=c['element']['querySelector']('.jump-to-btn'),f=d&&!d['classList']['contains']('hidden');return!f;});if(b['length']<0x2)return;b['forEach'](c=>{collapseNode(c);}),multiColumnAlignNodes(),showStatusMessage('Â∑≤ÊäòÁñä‰∏¶Â∞çÈΩä\x20'+b['length']+'\x20ÂÄãÁØÄÈªû','success');}function collapseNode(b){const c=b['element'],d=c['querySelector']('.collapse-btn');if(d&&!c['classList']['contains']('collapsed')){c['classList']['add']('collapsed');const f=c['querySelector']('.collapsible'),g=c['querySelectorAll']('.output-port:not(.header-port)'),h=c['querySelector']('.header-port');g['forEach'](i=>i['style']['display']='none');if(!h){const i=document['createElement']('div');i['className']='output-port\x20header-port',i['dataset']['type']='output',i['style']['display']='block',c['querySelector']('.node-header')['appendChild'](i);}else h['style']['display']='block';d['textContent']='+',drawConnections();}}document['addEventListener']('keyup',b=>{if(b['code']==='Space')spacePressed=![],isNodeWidthExpanded&&hoveredNode&&(restoreNodeWidthImmediately(),hoveredNode=null),!isPanning&&(container['style']['cursor']='');else b['key']==='Shift'&&(shiftPressed=![]);}),container['addEventListener']('click',b=>{b['target']===container&&selectedNodes['size']>0x0&&clearSelection();});function findNodeByElement(b){return nodes['find'](c=>c['element']===b);}container['addEventListener']('wheel',b=>{b['preventDefault']();const c=b['clientX'],d=b['clientY'],f=(c-translateX)/scale,g=(d-translateY)/scale,h=-b['deltaY'],i=h>0x0?scale*1.1:scale/1.1;scale=Math['min'](Math['max'](0.1,i),0x3),translateX=c-f*scale,translateY=d-g*scale,applyTransform();});function applyTransform(){transformContainer['style']['transform']='\x0a\x20\x20\x20\x20translate('+translateX+'px,\x20'+translateY+'px)\x0a\x20\x20\x20\x20scale('+scale+')\x0a\x20\x20',nodesContainer['style']['transform']='\x0a\x20\x20\x20\x20translate('+translateX+'px,\x20'+translateY+'px)\x0a\x20\x20\x20\x20scale('+scale+')\x0a\x20\x20',drawConnections(),updateNodeList(),updateMinimap();}function drawConnections(){return new Promise(b=>{ctx['clearRect'](0x0,0x0,canvas['width'],canvas['height']),ctx['setTransform'](0x1,0x0,0x0,0x1,0x0,0x0),connections['forEach'](c=>{const d=nodes[c['fromNode']],f=nodes[c['toNode']];let g;d['element']['classList']['contains']('collapsed')?g=d['element']['querySelector']('.header-port'):g=d['element']['querySelectorAll']('.output-port:not(.header-port)')[c['fromOutput']];const h=f['element']['querySelector']('.input-port');if(!g||!h)return;const i=g['getBoundingClientRect'](),j=h['getBoundingClientRect'](),k=container['getBoundingClientRect'](),l=i['left']+i['width']/0x2-k['left'],m=i['top']+i['height']/0x2-k['top'],n=j['left']+j['width']/0x2-k['left'],o=j['top']+j['height']/0x2-k['top'];ctx['beginPath'](),ctx['moveTo'](l,m);if(d['element']['classList']['contains']('collapsed')){const p=0x64+c['fromOutput']*0xf;ctx['bezierCurveTo'](l+p,m,n-0x64,o,n,o);}else ctx['bezierCurveTo'](l+0x64,m,n-0x64,o,n,o);if(c['highlighted'])ctx['strokeStyle']='#4a90e2',ctx['lineWidth']=0x3;else{if(c['colorClass']){const q=parseInt(c['colorClass']['split']('-')[0x1]);ctx['strokeStyle']=CONNECTION_COLORS[q%CONNECTION_COLORS['length']],ctx['lineWidth']=0x3;}else ctx['strokeStyle']='#888',ctx['lineWidth']=0x2;}ctx['stroke']();});if(connecting){const c=nodes[connecting['fromNode']];let d;c['element']['classList']['contains']('collapsed')?d=c['element']['querySelector']('.header-port[data-output-index=\x22'+connecting['fromOutput']+'\x22]'):d=c['element']['querySelectorAll']('.output-port:not(.header-port)')[connecting['fromOutput']];if(!d)return;const f=d['getBoundingClientRect'](),g=f['left']+f['width']/0x2-container['getBoundingClientRect']()['left'],h=f['top']+f['height']/0x2-container['getBoundingClientRect']()['top'],i=connecting['currentX']-container['getBoundingClientRect']()['left'],j=connecting['currentY']-container['getBoundingClientRect']()['top'];ctx['beginPath'](),ctx['moveTo'](g,h),ctx['lineTo'](i,j),ctx['strokeStyle']='#888',ctx['lineWidth']=0x2*(0x1/scale),ctx['stroke']();}requestAnimationFrame(()=>{b();});});}function startAutoProcessing(){const b=0x32;stopAutoProcessing();if(generatedNodeCount>=b){showStatusMessage('Â∑≤ÈÅîÂà∞ÁØÄÈªûÊï∏ÈáèÈôêÂà∂\x20('+generatedNodeCount+'/'+b+'ÂÄã)ÔºåÂÅúÊ≠¢Ëá™ÂãïËôïÁêÜ','warning');return;}autoProcessingStartTime=Date['now'](),processedNodes['clear'](),processingQueue=[],currentPhase='initial',showStatusMessage('ÈñãÂßãËá™ÂãïËôïÁêÜÁº∫Â§±ÁØÄÈªû\x20(Áï∂ÂâçÂÆåÊï¥ÁØÄÈªû:\x20'+generatedNodeCount+'/'+b+')','info'),autoProcessingInterval=setInterval(()=>{if(generatedNodeCount>=b){showStatusMessage('Â∑≤ÈÅîÂà∞ÁØÄÈªûÊï∏ÈáèÈôêÂà∂\x20('+generatedNodeCount+'/'+b+'ÂÄã)ÔºåËá™ÂãïÁµÇÊ≠¢','success'),stopAutoProcessing();return;}processAutoWorkflow();},0x320),setTimeout(()=>{autoProcessingInterval&&(stopAutoProcessing(),showStatusMessage('Ëá™ÂãïËôïÁêÜÂ∑≤Ë∂ÖÊôÇÁµÇÊ≠¢','warning'));},0x3a980);}function isNodeCompleted(b){const c=b['element']['querySelector']('.paragraph-input'),d=c&&c['value']['trim']()!=='',f=b['element']['querySelectorAll']('.item-text');let g=![];return f['length']>0x0?f['forEach'](h=>{h['value']['trim']()!==''&&(g=!![]);}):g=!![],d&&g;}function stopAutoProcessing(){autoProcessingInterval&&(clearInterval(autoProcessingInterval),autoProcessingInterval=null),clearMissingHighlights(),processedNodes['clear'](),processingQueue=[],currentPhase='completed',setTimeout(()=>{document['querySelectorAll']('.node.highlight-missing,\x20.item.highlight-missing')['forEach'](b=>{b['classList']['remove']('highlight-missing');});},0x32);}function processAutoWorkflow(){if(Date['now']()-autoProcessingStartTime>0x7530){stopAutoProcessing(),showStatusMessage('Ëá™ÂãïËôïÁêÜÂ∑≤Ë∂ÖÊôÇÁµÇÊ≠¢','warning');return;}if(generatedNodeCount>=0x32){showStatusMessage('Â∑≤ÈÅîÂà∞ÁØÄÈªûÊï∏ÈáèÈôêÂà∂\x20('+generatedNodeCount+'/50)ÔºåÂÅúÊ≠¢ÊâÄÊúâËá™ÂãïÂåñÊ≠•È©ü','warning'),stopAutoProcessing();return;}switch(currentPhase){case'initial':processInitialPhase();break;case'collapse_non_highlighted':processCollapseNonHighlighted();break;case'arrange_non_highlighted':processArrangeNonHighlighted();break;case'expand_highlighted':processExpandHighlighted();break;case'arrange_highlighted':processArrangeHighlighted();break;case'process_missing_items':processMissingItems();break;case'check_completion':checkCompletion();break;case'completed':stopAutoProcessing(),extractEmptyNodesAndDelete(),rearrangeAllNodesEnhanced(),showStatusMessage('Ëá™ÂãïËôïÁêÜÂÆåÊàêÔºÅ','success');break;}}function processInitialPhase(){showStatusMessage('ÈöéÊÆµ1:\x20ÂàùÂßãÊ™¢Êü•Áº∫Â§±ÁØÄÈªû...','info');const b=missingNodeNames['size']>0x0;checkMissingNodes();if(missingNodeNames['size']===0x0){currentPhase='completed';return;}currentPhase='collapse_non_highlighted';}function processCollapseNonHighlighted(){showStatusMessage('ÈöéÊÆµ2:\x20ÊäòÁñäÊ≤íÊúâÁ¥ÖÊ°ÜÁöÑÁØÄÈªû...','info');let b=![];nodes['forEach'](c=>{if(!c['element']['classList']['contains']('highlight-missing')&&!c['element']['classList']['contains']('collapsed')&&!processedNodes['has']('collapse_'+c['id'])){const d=c['element']['querySelector']('.collapse-btn');d&&(d['textContent']==='-'&&(d['click'](),processedNodes['add']('collapse_'+c['id']),b=!![]));}}),!b&&(currentPhase='arrange_non_highlighted');}function processArrangeNonHighlighted(){showStatusMessage('ÈöéÊÆµ3:\x20ÊéíÂàóÊ≤íÊúâÁ¥ÖÊ°ÜÁöÑÁØÄÈªû...','info');const b=nodes['filter'](c=>!c['element']['classList']['contains']('highlight-missing'));if(b['length']>0x0){const c=new Set(selectedNodes);clearSelection(),b['forEach'](d=>{selectedNodes['add'](d['id']),d['element']['classList']['add']('selected');}),multiColumnAlignNodes(),clearSelection(),c['forEach'](d=>{selectedNodes['add'](d),nodes[d]&&nodes[d]['element']['classList']['add']('selected');});}currentPhase='expand_highlighted';}function processExpandHighlighted(){showStatusMessage('ÈöéÊÆµ4:\x20Â±ïÈñãÊúâÁ¥ÖÊ°ÜÁöÑÁØÄÈªû...','info');let b=![];nodes['forEach'](c=>{if(c['element']['classList']['contains']('highlight-missing')&&c['element']['classList']['contains']('collapsed')&&!processedNodes['has']('expand_'+c['id'])){const d=c['element']['querySelector']('.collapse-btn');d&&d['textContent']==='+'&&(d['click'](),processedNodes['add']('expand_'+c['id']),b=!![]);}}),!b&&(currentPhase='arrange_highlighted');}function processArrangeHighlighted(){showStatusMessage('ÈöéÊÆµ5:\x20ÊéíÂàóÊúâÁ¥ÖÊ°ÜÁöÑÁØÄÈªû...','info');const b=nodes['filter'](c=>c['element']['classList']['contains']('highlight-missing'));if(b['length']>0x0){let c=-Infinity;nodes['forEach'](g=>{if(!g['element']['classList']['contains']('highlight-missing')){const h=g['x']+g['element']['offsetWidth'];c=Math['max'](c,h);}});c===-Infinity&&(c=0x32);const d=c+0x64;let f=0x32;b['forEach'](g=>{g['x']=d,g['y']=f,updateNodePosition(g),f+=g['element']['offsetHeight']+0x14;}),drawConnections();}currentPhase='process_missing_items';}function processMissingItems(){showStatusMessage('ÈöéÊÆµ6:\x20ËôïÁêÜÁº∫Â§±È†ÖÁõÆ...','info');let b=![];nodes['forEach'](c=>{const d=c['element']['querySelectorAll']('.item.highlight-missing');d['forEach'](f=>{const g='item_'+c['id']+'_'+Array['from'](f['parentNode']['children'])['indexOf'](f);if(!processedNodes['has'](g)){const h=f['querySelector']('.add-node-btn'),i=f['querySelector']('.item-text'),j=i?i['value']['trim']():'';if(h&&j&&!isInBlacklist(j)){if(generatedNodeCount>=0x32){showStatusMessage('Â∑≤ÈÅîÂà∞ÁØÄÈªûÊï∏ÈáèÈôêÂà∂\x20('+generatedNodeCount+'/50)ÔºåÂÅúÊ≠¢ÂâµÂª∫Êñ∞ÁØÄÈªû','warning'),stopAutoProcessing();return;}showStatusMessage('Ëá™ÂãïÂâµÂª∫ÁØÄÈªû:\x20'+j+'\x20('+generatedNodeCount+'/50)','info'),h['click'](),processedNodes['add'](g),b=!![],setTimeout(()=>{autoLoadFunctionContentToLatestNode(j);},0x12c);}}});}),!b&&(currentPhase='check_completion');}function checkCompletion(){showStatusMessage('ÈöéÊÆµ7:\x20Ê™¢Êü•ÂÆåÊàêÁãÄÊÖã...','info');if(generatedNodeCount>=0x32){showStatusMessage('Â∑≤ÈÅîÂà∞ÁØÄÈªûÊï∏ÈáèÈôêÂà∂\x20('+generatedNodeCount+'/50)ÔºåÂÅúÊ≠¢ËôïÁêÜ','warning'),currentPhase='completed',stopAutoProcessing();return;}const b=missingNodeNames['size'];checkMissingNodes();if(missingNodeNames['size']===0x0)currentPhase='completed',showStatusMessage('ÊâÄÊúâÁº∫Â§±ÁØÄÈªûÂ∑≤ËôïÁêÜÂÆåÊàêÔºÅ','success'),executeDoubleRearrangement();else missingNodeNames['size']===b?(showStatusMessage('Ê™¢Ê∏¨Âà∞ÂèØËÉΩÊ≠ªÂæ™Áí∞ÔºåÂº∑Âà∂ÁµÇÊ≠¢ËôïÁêÜ','warning'),currentPhase='completed',clearMissingHighlights(),executeDoubleRearrangement()):(processedNodes['clear'](),currentPhase='collapse_non_highlighted',showStatusMessage('ÈÇÑÊúâ\x20'+missingNodeNames['size']+'\x20ÂÄãÁº∫Â§±ÁØÄÈªûÔºåÁπºÁ∫åËôïÁêÜ...\x20(Áï∂ÂâçÂÆåÊï¥ÁØÄÈªû:\x20'+generatedNodeCount+'/50)','info'));}function executeDoubleRearrangement(){showStatusMessage('ÈñãÂßãÂü∑Ë°åÊúÄÁµÇÊéíÂàóÂÑ™Âåñ...','info');try{safeExecuteRearrangement(0x1)['then'](()=>{setTimeout(()=>{safeExecuteRearrangement(0x2)['then'](()=>{showStatusMessage('ÊúÄÁµÇÊéíÂàóÂÑ™ÂåñÂÆåÊàêÔºÅ','success'),clearMissingHighlights(),setTimeout(()=>{const b=document['querySelectorAll']('.highlight-missing');b['length']>0x0&&b['forEach'](c=>{c['classList']['remove']('highlight-missing');});},0xc8);});},0x1f4);});}catch(b){showStatusMessage('ÊéíÂàóÂÑ™ÂåñÂÆåÊàêÔºàÈÉ®ÂàÜÊìç‰ΩúÊúâË≠¶ÂëäÔºâ','warning'),clearMissingHighlights();}}async function safeExecuteRearrangement(b){return new Promise(async c=>{try{showStatusMessage('Âü∑Ë°åÁ¨¨'+b+'Ê¨°ÁØÄÈªûÊéíÂàó...','info'),await rearrangeAllNodesEnhanced(),c();}catch(d){c();}});}function autoLoadFunctionContentToLatestNode(b){if(nodes['length']>0x0){const c=nodes[nodes['length']-0x1],d=c['element']['querySelector']('.node-title');if(d&&(d['value']['includes'](b)||d['value']===b+'\x20ÁØÄÈªû')){const f=autoLoadFunctionContent(c,b);f&&(isNodeCompleted(c)&&(generatedNodeCount++,showStatusMessage('ÁØÄÈªûÂâµÂª∫ÂÆåÊàêÔºÅÁï∂ÂâçÂÆåÊï¥ÁØÄÈªûÊï∏Èáè:\x20'+generatedNodeCount+'/50','success'),generatedNodeCount>=0x32&&(showStatusMessage('Â∑≤ÈÅîÂà∞ÁØÄÈªûÊï∏ÈáèÈôêÂà∂\x20('+generatedNodeCount+'/50)ÔºåÂÅúÊ≠¢ÊâÄÊúâËá™ÂãïÂåñÊ≠•È©ü','warning'),stopAutoProcessing())));}}}function autoLoadFunctionContent(b,c){const d=JSON['parse'](localStorage['getItem']('loadedHtmlFunctions')||'{}');if(d[c]){const f=b['element']['querySelector']('.paragraph-input');if(f){f['value']=d[c]['code']||d[c];const g=new Event('input',{'bubbles':!![]});return f['dispatchEvent'](g),showStatusMessage('Â∑≤Ëá™ÂãïÂ°´ÂÖ•ÂáΩÊï∏\x20\x22'+c+'\x22\x20ÁöÑÂÖßÂÆπ','success'),!![];}}else return showStatusMessage('Êú™ÊâæÂà∞ÂáΩÊï∏\x20\x22'+c+'\x22\x20ÁöÑÂÖßÂÆπÔºå‰ΩÜÁØÄÈªûÂâµÂª∫ÂÆåÊàê','info'),!![];return![];}function autoLoadFunctionContent(b,c){const d=JSON['parse'](localStorage['getItem']('loadedHtmlFunctions')||'{}');if(d[c]){const f=b['element']['querySelector']('.paragraph-input');if(f){f['value']=d[c]['code']||d[c];const g=new Event('input',{'bubbles':!![]});return f['dispatchEvent'](g),showStatusMessage('Â∑≤Ëá™ÂãïÂ°´ÂÖ•ÂáΩÊï∏\x20\x22'+c+'\x22\x20ÁöÑÂÖßÂÆπ','success'),!![];}}return![];}function initAutoProcessing(){const b=document['createElement']('button');b['className']='toolbar-btn',b['id']='stop-auto-process-btn',b['textContent']='ÂÅúÊ≠¢Ëá™ÂãïËôïÁêÜ',b['style']['display']='none',b['addEventListener']('click',()=>{stopAutoProcessing(),showStatusMessage('ÊâãÂãïÂÅúÊ≠¢Ëá™ÂãïËôïÁêÜ','info');});const c=document['getElementById']('toolbar');c&&c['appendChild'](b);const d=startAutoProcessing;startAutoProcessing=function(){return b['style']['display']='inline-block',d['apply'](this,arguments);};const f=stopAutoProcessing;stopAutoProcessing=function(){return b['style']['display']='none',f['apply'](this,arguments);};}function init(){canvas['width']=container['offsetWidth'],canvas['height']=container['offsetHeight'],scale=0x1,translateX=container['offsetWidth']/0x2-0x64,translateY=container['offsetHeight']/0x2-0x32,applyTransform(),createNode(-0x64,-0x32),updateSameNameHighlights(),updateNodeList(),setInterval(checkVisibleNodes,0x1f4),initMinimap(),initAutoProcessing(),addWidthExpansionStyles();}function checkVisibleNodes(){const b=getVisibleNodes();JSON['stringify'](b)!==JSON['stringify'](lastVisibleNodes)&&(updateNodeList(),lastVisibleNodes=b);}function getVisibleNodes(){const b={'left':0x0,'right':window['innerWidth'],'top':0x0,'bottom':window['innerHeight']};return nodes['filter'](c=>{const d=c['element']['getBoundingClientRect'](),f=d['right']>b['left']&&d['left']<b['right']&&d['bottom']>b['top']&&d['top']<b['bottom'],g=c['element']['querySelector']('.node-name');g&&(g['style']['display']=f?'block':'none');const h=-0xc8,i=d['right']>b['left']-h&&d['left']<b['right']+h&&d['bottom']>b['top']-h&&d['top']<b['bottom']+h;return i;});}function getNodeHeight(b){const c=0x1e,d=b['querySelector']('.paragraph-input')?0x46:0x0,f=b['querySelectorAll']('.item')['length']*0x1e,g=0x1e;return c+d+f+g+0x14;}function updateNodeList(){const b=document['getElementById']('node-list');if(!b)return;requestAnimationFrame(()=>{saveCurrentDescriptions();const c=getVisibleNodes(),d=c['map'](i=>i['id'])['join'](','),f=(lastVisibleNodes||[])['map'](i=>i['id'])['join'](',');if(d===f)return;const g={};nodes['forEach'](i=>{const j=i['element']['querySelector']('.node-title')?.['value']||'Êú™ÂëΩÂêçÁØÄÈªû';nodeDescriptions[i['id']]&&nodeDescriptions[i['id']]['trim']()!==''&&(g[j]=nodeDescriptions[i['id']]);});const h=document['createDocumentFragment']();c['forEach'](i=>{const j=document['createElement']('div');j['className']='node-list-item';const k=i['element']['querySelector']('.node-title')?.['value']||'Êú™ÂëΩÂêçÁØÄÈªû';let l=nodeDescriptions[i['id']]||'';!l['trim']()&&g[k]&&(l=g[k],nodeDescriptions[i['id']]=l);j['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22node-list-name\x22>'+escapeHtml(k)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20class=\x22node-list-description\x22\x20data-node-id=\x22'+i['id']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20placeholder=\x22Ëº∏ÂÖ•ÁØÄÈªûÊèèËø∞...\x22>'+escapeHtml(l)+'</textarea>\x0a\x20\x20\x20\x20\x20\x20';const m=j['querySelector']('.node-list-description');m['addEventListener']('input',()=>{const n=m['value'];nodeDescriptions[m['dataset']['nodeId']]=n,saveCurrentDescriptions();if(n['trim']()!==''){const o=i['element']['querySelector']('.node-title')?.['value']||'Êú™ÂëΩÂêçÁØÄÈªû';nodes['forEach'](p=>{const q=p['element']['querySelector']('.node-title')?.['value']||'Êú™ÂëΩÂêçÁØÄÈªû';q===o&&p['id']!==i['id']&&(nodeDescriptions[p['id']]=n);}),syncDescriptionsForSameNameNodes(m['dataset']['nodeId']),updateNodeList();}}),h['appendChild'](j);}),b['innerHTML']='',b['appendChild'](h),lastVisibleNodes=c;});}function checkVisibleNodes(){!this['checkVisibleNodesDebounce']&&(this['checkVisibleNodesDebounce']=debounce(()=>{updateNodeList();},0x64)),this['checkVisibleNodesDebounce']();}function debounce(b,c){let d;return function(){const f=this,g=arguments;clearTimeout(d),d=setTimeout(()=>{b['apply'](f,g);},c);};}function saveCurrentDescriptions(){document['querySelectorAll']('.node-list-description')['forEach'](b=>{nodeDescriptions[b['dataset']['nodeId']]=b['value'];}),localStorage['setItem']('nodeDescriptions',JSON['stringify'](nodeDescriptions));}init(),translateX=window['innerWidth']/0x2-0x64,translateY=window['innerHeight']/0x2-0x32,nodesContainer['style']['transform']='translate('+translateX+'px,\x20'+translateY+'px)\x20scale('+scale+')';
  </script>
</body>

</html>